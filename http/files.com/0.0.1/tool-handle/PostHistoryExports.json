{
  "name": "PostHistoryExports",
  "description": "Create History Export",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "properties": {
          "end_at": {
            "description": "End date/time of export range.",
            "example": "2000-01-01T01:00:00Z",
            "format": "date-time",
            "type": "string",
            "x-ms-summary": "End date/time of export range."
          },
          "query_action": {
            "description": "Filter results by this this action type. Valid values: `create`, `read`, `update`, `destroy`, `move`, `login`, `failedlogin`, `copy`, `user_create`, `user_update`, `user_destroy`, `group_create`, `group_update`, `group_destroy`, `permission_create`, `permission_destroy`, `api_key_create`, `api_key_update`, `api_key_destroy`",
            "example": "read",
            "type": "string",
            "x-ms-summary": "Filter results by this this action type. Valid values: `create`, `read`, `update`, `destroy`, `move`, `login`, `failedlogin`, `copy`, `user_create`, `user_update`, `user_destroy`, `group_create`, `group_update`, `group_destroy`, `permission_create`, `permission_destroy`, `api_key_create`, `api_key_update`, `api_key_destroy`"
          },
          "query_destination": {
            "description": "Return results that are file moves with this path as destination.",
            "example": "DestFolder",
            "type": "string",
            "x-ms-summary": "Return results that are file moves with this path as destination."
          },
          "query_failure_type": {
            "description": "If searching for Histories about login failures, this parameter restricts results to failures of this specific type.  Valid values: `expired_trial`, `account_overdue`, `locked_out`, `ip_mismatch`, `password_mismatch`, `site_mismatch`, `username_not_found`, `none`, `no_ftp_permission`, `no_web_permission`, `no_directory`, `errno_enoent`, `no_sftp_permission`, `no_dav_permission`, `no_restapi_permission`, `key_mismatch`, `region_mismatch`, `expired_access`, `desktop_ip_mismatch`, `desktop_api_key_not_used_quickly_enough`, `disabled`, `country_mismatch`",
            "example": "bad_password",
            "type": "string",
            "x-ms-summary": "If searching for Histories about login failures, this parameter restricts results to failures of this specific type.  Valid values: `expired_trial`, `account_overdue`, `locked_out`, `ip_mismatch`, `password_mismatch`, `site_mismatch`, `username_not_found`, `none`, `no_ftp_permission`, `no_web_permission`, `no_directory`, `errno_enoent`, `no_sftp_permission`, `no_dav_permission`, `no_restapi_permission`, `key_mismatch`, `region_mismatch`, `expired_access`, `desktop_ip_mismatch`, `desktop_api_key_not_used_quickly_enough`, `disabled`, `country_mismatch`"
          },
          "query_file_id": {
            "description": "Return results that are file actions related to the file indicated by this File ID",
            "example": "1",
            "type": "string",
            "x-ms-summary": "Return results that are file actions related to the file indicated by this File ID"
          },
          "query_folder": {
            "description": "Return results that are file actions related to files or folders inside this folder path.",
            "example": "Folder",
            "type": "string",
            "x-ms-summary": "Return results that are file actions related to files or folders inside this folder path."
          },
          "query_interface": {
            "description": "Filter results by this this interface type. Valid values: `web`, `ftp`, `robot`, `jsapi`, `webdesktopapi`, `sftp`, `dav`, `desktop`, `restapi`, `scim`, `office`, `mobile`, `as2`, `inbound_email`, `remote`",
            "example": "ftp",
            "type": "string",
            "x-ms-summary": "Filter results by this this interface type. Valid values: `web`, `ftp`, `robot`, `jsapi`, `webdesktopapi`, `sftp`, `dav`, `desktop`, `restapi`, `scim`, `office`, `mobile`, `as2`, `inbound_email`, `remote`"
          },
          "query_ip": {
            "description": "Filter results by this IP address.",
            "example": "127.0.0.1",
            "type": "string",
            "x-ms-summary": "Filter results by this IP address."
          },
          "query_parent_id": {
            "description": "Return results that are file actions inside the parent folder specified by this folder ID",
            "example": "1",
            "type": "string",
            "x-ms-summary": "Return results that are file actions inside the parent folder specified by this folder ID"
          },
          "query_path": {
            "description": "Return results that are file actions related to this path.",
            "example": "MyFile.txt",
            "type": "string",
            "x-ms-summary": "Return results that are file actions related to this path."
          },
          "query_src": {
            "description": "Return results that are file moves originating from this path.",
            "example": "SrcFolder",
            "type": "string",
            "x-ms-summary": "Return results that are file moves originating from this path."
          },
          "query_target_id": {
            "description": "If searching for Histories about specific objects (such as Users, or API Keys), this paremeter restricts results to objects that match this ID.",
            "example": "1",
            "type": "string",
            "x-ms-summary": "If searching for Histories about specific objects (such as Users, or API Keys), this paremeter restricts results to objects that match this ID."
          },
          "query_target_name": {
            "description": "If searching for Histories about Users, Groups or other objects with names, this parameter restricts results to objects with this name/username.",
            "example": "full",
            "type": "string",
            "x-ms-summary": "If searching for Histories about Users, Groups or other objects with names, this parameter restricts results to objects with this name/username."
          },
          "query_target_permission": {
            "description": "If searching for Histories about Permisisons, this parameter restricts results to permissions of this level.",
            "example": "full",
            "type": "string",
            "x-ms-summary": "If searching for Histories about Permisisons, this parameter restricts results to permissions of this level."
          },
          "query_target_permission_set": {
            "description": "If searching for Histories about API keys, this parameter restricts results to API keys with this permission set.",
            "example": "desktop_app",
            "type": "string",
            "x-ms-summary": "If searching for Histories about API keys, this parameter restricts results to API keys with this permission set."
          },
          "query_target_platform": {
            "description": "If searching for Histories about API keys, this parameter restricts results to API keys associated with this platform.",
            "example": "windows",
            "type": "string",
            "x-ms-summary": "If searching for Histories about API keys, this parameter restricts results to API keys associated with this platform."
          },
          "query_target_user_id": {
            "description": "If searching for Histories about API keys, this parameter restricts results to API keys created by/for this user ID.",
            "example": "1",
            "type": "string",
            "x-ms-summary": "If searching for Histories about API keys, this parameter restricts results to API keys created by/for this user ID."
          },
          "query_target_username": {
            "description": "If searching for Histories about API keys, this parameter restricts results to API keys created by/for this username.",
            "example": "jerry",
            "type": "string",
            "x-ms-summary": "If searching for Histories about API keys, this parameter restricts results to API keys created by/for this username."
          },
          "query_user_id": {
            "description": "Return results that are actions performed by the user indiciated by this User ID",
            "example": "1",
            "type": "string",
            "x-ms-summary": "Return results that are actions performed by the user indiciated by this User ID"
          },
          "query_username": {
            "description": "Filter results by this username.",
            "example": "jerry",
            "type": "string",
            "x-ms-summary": "Filter results by this username."
          },
          "start_at": {
            "description": "Start date/time of export range.",
            "example": "2000-01-01T01:00:00Z",
            "format": "date-time",
            "type": "string",
            "x-ms-summary": "Start date/time of export range."
          },
          "user_id": {
            "description": "User ID.  Provide a value of `0` to operate the current session's user.",
            "format": "int32",
            "type": "integer",
            "x-ms-summary": "User ID.  Provide a value of `0` to operate the current session's user."
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "//app.files.com/api/rest/v1/history_exports"
    },
    "body": {
      "$": "body",
      "encode": "multipart"
    }
  },
  "responses": {
    "201": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Show History Export",
        "**Key properties:**",
        {
          "$ul": [
            "**end_at**: End date/time of export range.",
            "**history_version**: Version of the history for the export.",
            "**id**: History Export ID",
            "**query_action**: Filter results by this this action type. Valid values: `create`, `read`, `update`, `destroy`, `move`, `login`, `failedlogin`, `copy`, `user_create`, `user_update`, `user_destroy`, `group_create`, `group_update`, `group_destroy`, `permission_create`, `permission_destroy`, `api_key_create`, `api_key_update`, `api_key_destroy`",
            "**query_destination**: Return results that are file moves with this path as destination.",
            "**query_failure_type**: If searching for Histories about login failures, this parameter restricts results to failures of this specific type.  Valid values: `expired_trial`, `account_overdue`, `locked_out`, `ip_mismatch`, `password_mismatch`, `site_mismatch`, `username_not_found`, `none`, `no_ftp_permission`, `no_web_permission`, `no_directory`, `errno_enoent`, `no_sftp_permission`, `no_dav_permission`, `no_restapi_permission`, `key_mismatch`, `region_mismatch`, `expired_access`, `desktop_ip_mismatch`, `desktop_api_key_not_used_quickly_enough`, `disabled`, `country_mismatch`",
            "**query_file_id**: Return results that are file actions related to the file indicated by this File ID",
            "**query_folder**: Return results that are file actions related to files or folders inside this folder path.",
            "**query_interface**: Filter results by this this interface type. Valid values: `web`, `ftp`, `robot`, `jsapi`, `webdesktopapi`, `sftp`, `dav`, `desktop`, `restapi`, `scim`, `office`, `mobile`, `as2`, `inbound_email`, `remote`",
            "**query_ip**: Filter results by this IP address.",
            "**query_parent_id**: Return results that are file actions inside the parent folder specified by this folder ID",
            "**query_path**: Return results that are file actions related to this path.",
            "**query_src**: Return results that are file moves originating from this path.",
            "**query_target_id**: If searching for Histories about specific objects (such as Users, or API Keys), this paremeter restricts results to objects that match this ID.",
            "**query_target_name**: If searching for Histories about Users, Groups or other objects with names, this parameter restricts results to objects with this name/username.",
            "**query_target_permission**: If searching for Histories about Permisisons, this parameter restricts results to permissions of this level.",
            "**query_target_permission_set**: If searching for Histories about API keys, this parameter restricts results to API keys with this permission set.",
            "**query_target_platform**: If searching for Histories about API keys, this parameter restricts results to API keys associated with this platform.",
            "**query_target_user_id**: If searching for Histories about API keys, this parameter restricts results to API keys created by/for this user ID.",
            "**query_target_username**: If searching for Histories about API keys, this parameter restricts results to API keys created by/for this username.",
            "**query_user_id**: Return results that are actions performed by the user indiciated by this User ID",
            "**query_username**: Filter results by this username.",
            "**results_url**: If `status` is `ready`, this will be a URL where all the results can be downloaded at once as a CSV.",
            "**start_at**: Start date/time of export range.",
            "**status**: Status of export.  Will be: `building`, `ready`, or `failed`"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
