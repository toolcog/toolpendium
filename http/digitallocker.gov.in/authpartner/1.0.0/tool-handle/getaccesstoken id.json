{
  "name": "getaccesstoken_id",
  "description": "This endpoint only applies to apps using the authorization code flow. An app calls this endpoint to acquire a bearer token once the user has authorized the app. Calls to /oauth2/1/token need to be authenticated using the app's key and secret. These can either be passed as application/x-www-form-urlencoded POST parameters (see parameters below) or via HTTP basic authentication. If basic authentication is used, the app key should be provided as the username, and the app secret should be provided as the password.",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "properties": {
          "Get access token using authorization code": {
            "$ref": "#/$defs/AccessToken"
          },
          "Get access token using device code and OTP": {
            "$ref": "#/$defs/DeviceAccessToken"
          },
          "Get access token using refresh token": {
            "$ref": "#/$defs/RefreshToken"
          }
        },
        "type": "object",
        "description": "Details of documents being created."
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "AccessToken": {
        "properties": {
          "client_id": {
            "example": "ABCDEFG",
            "type": "string"
          },
          "client_secret": {
            "example": "a123456abcdeghijk7890",
            "type": "string"
          },
          "code": {
            "example": "ca82123a5476aa2f5e4638957c0ecc55c6ec07c1",
            "type": "string"
          },
          "code_verifier": {
            "example": "a123456abca",
            "type": "string"
          },
          "grant_type": {
            "enum": [
              "authorization_code"
            ],
            "type": "string"
          },
          "redirect_uri": {
            "example": "https://ndh.digitallocker.gov.in/oauth2-redirect.html",
            "type": "string"
          }
        },
        "required": [
          "grant_type",
          "client_id",
          "client_secret"
        ],
        "type": "object"
      },
      "DeviceAccessToken": {
        "properties": {
          "client_id": {
            "description": "Provide the client id that was created during the application registration process on Partners Portal.",
            "type": "string"
          },
          "device_code": {
            "description": "The device verification code. The device_code field from Get Device Code Response.",
            "type": "string"
          },
          "dl_otp": {
            "description": "The OTP collected from the user",
            "type": "string"
          },
          "grant_type": {
            "description": "The grant type, which must be “urn:ietf:params:oauth:grant-type:device_code”.",
            "example": "urn:ietf:params:oauth:grant-type:device_code",
            "type": "string"
          }
        }
      },
      "RefreshToken": {
        "properties": {
          "client_id": {
            "example": "ABCDEFG",
            "type": "string"
          },
          "client_secret": {
            "example": "a123456abcdeghijk7890",
            "type": "string"
          },
          "grant_type": {
            "enum": [
              "refresh_token"
            ],
            "type": "string"
          },
          "refresh_token": {
            "example": "ca82123a5476aa2f5e4638957c0ecc55c6ec07c1",
            "type": "string"
          }
        },
        "required": [
          "grant_type",
          "refresh_token",
          "client_id",
          "client_secret"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://betaapi.digitallocker.gov.in/public/oauth2/1/token"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**access_token**: The access token that can be used to call the DigiLocker APIs.",
            "**digilocker_id**: A unique 36 character DigiLocker Id of the user account.",
            "**dob**: This is date of birth of the user as registered with DigiLocker in DDMMYYYY format.",
            "**eaadhar**: This indicates whether eAadhaar data is available for this account. Possible values are Y and N.",
            "**expires_in**: The duration in seconds for which the access token is valid",
            "**gender**: This is gender of the user as registered with DigiLocker. The possible values are M, F, T for male, female and transgender respectively.",
            "**name**: The name of the user as registered with DigiLocker.",
            "**reference_key**: A unique reference of the user account.",
            "**refresh_token**: The refresh token used to refresh the above access token when it expires. Please refer to Refresh Access Token API for more details.",
            "**scope**: Scope of the token.",
            "**token_type**: The type of token which will always be Bearer."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
