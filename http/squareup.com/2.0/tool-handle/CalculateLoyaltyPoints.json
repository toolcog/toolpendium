{
  "name": "CalculateLoyaltyPoints",
  "description": "Calculates the points a purchase earns.\n\n- If you are using the Orders API to manage orders, you provide `order_id` in the request. The \nendpoint calculates the points by reading the order.\n- If you are not using the Orders API to manage orders, you provide the purchase amount in \nthe request for the endpoint to calculate the points.\n\nAn application might call this endpoint to show the points that a buyer can earn with the \nspecific purchase.\n\n__Note:__ The country of the seller's Square account determines whether tax is included in the purchase amount when accruing points for spend-based and visit-based programs. \nFor more information, see [Availability of Square Loyalty](https://developer.squareup.com/docs/loyalty-api/overview#loyalty-market-availability).",
  "parameters": {
    "type": "object",
    "properties": {
      "program_id": {
        "type": "string",
        "description": "The [loyalty program](https://developer.squareup.com/reference/square_2021-08-18/objects/LoyaltyProgram) ID, which defines the rules for accruing points."
      },
      "body": {
        "$ref": "#/components/schemas/CalculateLoyaltyPointsRequest",
        "description": "An object containing the fields to POST for the request.\n\nSee the corresponding object definition for field details."
      }
    },
    "required": [
      "program_id",
      "body"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://connect.squareup.com/v2/loyalty/programs/{program_id}/calculate"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "A response that includes the points that the buyer can earn from \na specified purchase.",
        "**Key properties:**",
        {
          "$ul": [
            "**errors**: Any errors that occurred during the request.",
            "**points**: The points that the buyer can earn from a specified purchase."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
