{
  "name": "URLInfo",
  "description": "Parse, analyze and retrieve content from the supplied URL",
  "parameters": {
    "type": "object",
    "properties": {
      "url": {
        "type": "string",
        "description": "The URL to probe"
      },
      "fetch-content": {
        "default": false,
        "type": "boolean",
        "description": "If this URL responds with html, text, json or xml then return the response. This option is useful if you want to perform further processing on the URL content (e.g. with the HTML Extract or HTML Clean APIs)"
      },
      "ignore-certificate-errors": {
        "default": false,
        "type": "boolean",
        "description": "Ignore any TLS/SSL certificate errors and load the URL anyway"
      },
      "timeout": {
        "default": 60,
        "format": "int32",
        "type": "integer",
        "description": "Timeout in seconds. Give up if still trying to load the URL after this number of seconds"
      },
      "retry": {
        "default": 0,
        "format": "int32",
        "type": "integer",
        "description": "If the request fails for any reason try again this many times"
      }
    },
    "required": [
      "url"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://neutrinoapi.net/url-info{?url,fetch-content,ignore-certificate-errors,timeout,retry}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "URLInfoResponse"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**content**: The actual content this URL responded with. Only set if the 'fetch-content' option was used",
            "**content-encoding**: The encoding format the URL uses",
            "**content-size**: The size of the URL content in bytes",
            "**content-type**: The content-type this URL serves",
            "**http-ok**: True if this URL responded with an HTTP OK (200) status",
            "**http-redirect**: True if this URL responded with an HTTP redirect",
            "**http-status**: The HTTP status code this URL responded with. An HTTP status of 0 indicates a network level issue",
            "**http-status-message**: The HTTP status message assoicated with the status code",
            "**is-error**: True if an error occurred while loading the URL. This includes network errors, TLS errors and timeouts",
            "**is-timeout**: True if a timeout occurred while loading the URL. You can set the timeout with the request parameter 'timeout'",
            "**language-code**: The ISO 2-letter language code of the page. Extracted from either the HTML document or via HTTP headers",
            "**load-time**: The time taken to load the URL content in seconds",
            "**query**: A key-value map of the URL query paramaters",
            "**real**: Is this URL actually serving real content",
            "**server-city**: The servers IP geo-location: full city name (if detectable)",
            "**server-country**: The servers IP geo-location: full country name",
            "**server-country-code**: The servers IP geo-location: ISO 2-letter country code",
            "**server-hostname**: The servers hostname (PTR record)",
            "**server-ip**: The IP address of the server hosting this URL",
            "**server-name**: The name of the server software hosting this URL",
            "**server-region**: The servers IP geo-location: full region name (if detectable)",
            "**title**: The document title",
            "**url**: The fully qualified URL. This may be different to the URL requested if http-redirect is true",
            "**url-path**: The URL path",
            "**url-port**: The URL port",
            "**url-protocol**: The URL protocol, usually http or https",
            "**valid**: Is this a valid well-formed URL"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "APIError"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**api-error**: API error code. If set and > 0 then an API error has occurred your request could not be completed",
            "**api-error-msg**: API error message"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "APIError"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**api-error**: API error code. If set and > 0 then an API error has occurred your request could not be completed",
            "**api-error-msg**: API error message"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "500": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "APIError"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**api-error**: API error code. If set and > 0 then an API error has occurred your request could not be completed",
            "**api-error-msg**: API error message"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "APIError"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**api-error**: API error code. If set and > 0 then an API error has occurred your request could not be completed",
            "**api-error-msg**: API error message"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
