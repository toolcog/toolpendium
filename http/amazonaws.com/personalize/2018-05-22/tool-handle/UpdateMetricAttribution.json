{
  "name": "UpdateMetricAttribution",
  "description": "Updates a metric attribution.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "AmazonPersonalize.UpdateMetricAttribution"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/UpdateMetricAttributionRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "UpdateMetricAttributionRequest": {
        "type": "object",
        "title": "UpdateMetricAttributionRequest",
        "properties": {
          "addMetrics": {
            "allOf": [
              {
                "$ref": "#/$defs/MetricAttributes"
              },
              {
                "description": "Add new metric attributes to the metric attribution."
              }
            ]
          },
          "removeMetrics": {
            "allOf": [
              {
                "$ref": "#/$defs/MetricAttributesNamesList"
              },
              {
                "description": "Remove metric attributes from the metric attribution."
              }
            ]
          },
          "metricsOutputConfig": {
            "allOf": [
              {
                "$ref": "#/$defs/MetricAttributionOutput"
              },
              {
                "description": "An output config for the metric attribution."
              }
            ]
          },
          "metricAttributionArn": {
            "allOf": [
              {
                "$ref": "#/$defs/Arn"
              },
              {
                "description": "The Amazon Resource Name (ARN) for the metric attribution to update."
              }
            ]
          }
        }
      },
      "MetricAttributes": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/MetricAttribute"
        },
        "maxItems": 10
      },
      "MetricAttribute": {
        "type": "object",
        "required": [
          "eventType",
          "metricName",
          "expression"
        ],
        "properties": {
          "eventType": {
            "allOf": [
              {
                "$ref": "#/$defs/EventType"
              },
              {
                "description": "The metric's event type."
              }
            ]
          },
          "metricName": {
            "allOf": [
              {
                "$ref": "#/$defs/MetricName"
              },
              {
                "description": "The metric's name. The name helps you identify the metric in Amazon CloudWatch or Amazon S3."
              }
            ]
          },
          "expression": {
            "allOf": [
              {
                "$ref": "#/$defs/MetricExpression"
              },
              {
                "description": "The attribute's expression. Available functions are <code>SUM()</code> or <code>SAMPLECOUNT()</code>. For SUM() functions, provide the dataset type (either Interactions or Items) and column to sum as a parameter. For example SUM(Items.PRICE)."
              }
            ]
          }
        },
        "description": "Contains information on a metric that a metric attribution reports on. For more information, see <a href=\"https://docs.aws.amazon.com/personalize/latest/dg/measuring-recommendation-impact.html\">Measuring impact of recommendations</a>."
      },
      "EventType": {
        "type": "string",
        "maxLength": 256
      },
      "MetricName": {
        "type": "string",
        "maxLength": 256
      },
      "MetricExpression": {
        "type": "string",
        "maxLength": 256
      },
      "MetricAttributesNamesList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/MetricName"
        },
        "maxItems": 10
      },
      "MetricAttributionOutput": {
        "type": "object",
        "required": [
          "roleArn"
        ],
        "properties": {
          "s3DataDestination": {
            "$ref": "#/$defs/S3DataConfig"
          },
          "roleArn": {
            "allOf": [
              {
                "$ref": "#/$defs/RoleArn"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the IAM service role that has permissions to add data to your output Amazon S3 bucket and add metrics to Amazon CloudWatch. For more information, see <a href=\"https://docs.aws.amazon.com/personalize/latest/dg/measuring-recommendation-impact.html\">Measuring impact of recommendations</a>."
              }
            ]
          }
        },
        "description": "The output configuration details for a metric attribution."
      },
      "S3DataConfig": {
        "type": "object",
        "required": [
          "path"
        ],
        "properties": {
          "path": {
            "allOf": [
              {
                "$ref": "#/$defs/S3Location"
              },
              {
                "description": "The file path of the Amazon S3 bucket."
              }
            ]
          },
          "kmsKeyArn": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsKeyArn"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the Key Management Service (KMS) key that Amazon Personalize uses to encrypt or decrypt the input and output files."
              }
            ]
          }
        },
        "description": "The configuration details of an Amazon S3 input or output bucket."
      },
      "S3Location": {
        "type": "string",
        "pattern": "(s3|http|https)://.+",
        "maxLength": 256
      },
      "KmsKeyArn": {
        "type": "string",
        "pattern": "arn:aws.*:kms:.*:[0-9]{12}:key/.*",
        "maxLength": 2048
      },
      "RoleArn": {
        "type": "string",
        "pattern": "arn:([a-z\\d-]+):iam::\\d{12}:role/?[a-zA-Z_0-9+=,.@\\-_/]+",
        "maxLength": 256
      },
      "Arn": {
        "type": "string",
        "pattern": "arn:([a-z\\d-]+):personalize:.*:.*:.+",
        "maxLength": 256
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://personalize.us-east-1.amazonaws.com/#X-Amz-Target=AmazonPersonalize.UpdateMetricAttribution"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**metricAttributionArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
