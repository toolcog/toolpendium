{
  "name": "UpdateFileSystem",
  "description": "<p>Use this operation to update the configuration of an existing Amazon FSx file system. You can update multiple properties in a single request.</p> <p>For FSx for Windows File Server file systems, you can update the following properties:</p> <ul> <li> <p> <code>AuditLogConfiguration</code> </p> </li> <li> <p> <code>AutomaticBackupRetentionDays</code> </p> </li> <li> <p> <code>DailyAutomaticBackupStartTime</code> </p> </li> <li> <p> <code>SelfManagedActiveDirectoryConfiguration</code> </p> </li> <li> <p> <code>StorageCapacity</code> </p> </li> <li> <p> <code>ThroughputCapacity</code> </p> </li> <li> <p> <code>WeeklyMaintenanceStartTime</code> </p> </li> </ul> <p>For FSx for Lustre file systems, you can update the following properties:</p> <ul> <li> <p> <code>AutoImportPolicy</code> </p> </li> <li> <p> <code>AutomaticBackupRetentionDays</code> </p> </li> <li> <p> <code>DailyAutomaticBackupStartTime</code> </p> </li> <li> <p> <code>DataCompressionType</code> </p> </li> <li> <p> <code>LogConfiguration</code> </p> </li> <li> <p> <code>LustreRootSquashConfiguration</code> </p> </li> <li> <p> <code>StorageCapacity</code> </p> </li> <li> <p> <code>WeeklyMaintenanceStartTime</code> </p> </li> </ul> <p>For FSx for ONTAP file systems, you can update the following properties:</p> <ul> <li> <p> <code>AddRouteTableIds</code> </p> </li> <li> <p> <code>AutomaticBackupRetentionDays</code> </p> </li> <li> <p> <code>DailyAutomaticBackupStartTime</code> </p> </li> <li> <p> <code>DiskIopsConfiguration</code> </p> </li> <li> <p> <code>FsxAdminPassword</code> </p> </li> <li> <p> <code>RemoveRouteTableIds</code> </p> </li> <li> <p> <code>StorageCapacity</code> </p> </li> <li> <p> <code>ThroughputCapacity</code> </p> </li> <li> <p> <code>WeeklyMaintenanceStartTime</code> </p> </li> </ul> <p>For FSx for OpenZFS file systems, you can update the following properties:</p> <ul> <li> <p> <code>AutomaticBackupRetentionDays</code> </p> </li> <li> <p> <code>CopyTagsToBackups</code> </p> </li> <li> <p> <code>CopyTagsToVolumes</code> </p> </li> <li> <p> <code>DailyAutomaticBackupStartTime</code> </p> </li> <li> <p> <code>DiskIopsConfiguration</code> </p> </li> <li> <p> <code>StorageCapacity</code> </p> </li> <li> <p> <code>ThroughputCapacity</code> </p> </li> <li> <p> <code>WeeklyMaintenanceStartTime</code> </p> </li> </ul>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "AWSSimbaAPIService_v20180301.UpdateFileSystem"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/UpdateFileSystemRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "UpdateFileSystemRequest": {
        "type": "object",
        "required": [
          "FileSystemId"
        ],
        "title": "UpdateFileSystemRequest",
        "properties": {
          "FileSystemId": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemId"
              },
              {
                "description": "The ID of the file system that you are updating."
              }
            ]
          },
          "ClientRequestToken": {
            "allOf": [
              {
                "$ref": "#/$defs/ClientRequestToken"
              },
              {
                "description": "A string of up to 63 ASCII characters that Amazon FSx uses to ensure idempotent updates. This string is automatically filled on your behalf when you use the Command Line Interface (CLI) or an Amazon Web Services SDK."
              }
            ]
          },
          "StorageCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/StorageCapacity"
              },
              {
                "description": "<p>Use this parameter to increase the storage capacity of an FSx for Windows File Server, FSx for Lustre, FSx for OpenZFS, or FSx for ONTAP file system. Specifies the storage capacity target value, in GiB, to increase the storage capacity for the file system that you're updating. </p> <note> <p>You can't make a storage capacity increase request if there is an existing storage capacity increase request in progress.</p> </note> <p>For Lustre file systems, the storage capacity target value can be the following:</p> <ul> <li> <p>For <code>SCRATCH_2</code>, <code>PERSISTENT_1</code>, and <code>PERSISTENT_2 SSD</code> deployment types, valid values are in multiples of 2400 GiB. The value must be greater than the current storage capacity.</p> </li> <li> <p>For <code>PERSISTENT HDD</code> file systems, valid values are multiples of 6000 GiB for 12-MBps throughput per TiB file systems and multiples of 1800 GiB for 40-MBps throughput per TiB file systems. The values must be greater than the current storage capacity.</p> </li> <li> <p>For <code>SCRATCH_1</code> file systems, you can't increase the storage capacity.</p> </li> </ul> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/managing-storage-capacity.html\">Managing storage and throughput capacity</a> in the <i>FSx for Lustre User Guide</i>.</p> <p>For FSx for OpenZFS file systems, the storage capacity target value must be at least 10 percent greater than the current storage capacity value. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/OpenZFSGuide/managing-storage-capacity.html\">Managing storage capacity</a> in the <i>FSx for OpenZFS User Guide</i>.</p> <p>For Windows file systems, the storage capacity target value must be at least 10 percent greater than the current storage capacity value. To increase storage capacity, the file system must have at least 16 MBps of throughput capacity. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/managing-storage-capacity.html\">Managing storage capacity</a> in the <i>Amazon FSxfor Windows File Server User Guide</i>.</p> <p>For ONTAP file systems, the storage capacity target value must be at least 10 percent greater than the current storage capacity value. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/managing-storage-capacity.html\">Managing storage capacity and provisioned IOPS</a> in the <i>Amazon FSx for NetApp ONTAP User Guide</i>.</p>"
              }
            ]
          },
          "WindowsConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/UpdateFileSystemWindowsConfiguration"
              },
              {
                "description": "The configuration updates for an Amazon FSx for Windows File Server file system."
              }
            ]
          },
          "LustreConfiguration": {
            "$ref": "#/$defs/UpdateFileSystemLustreConfiguration"
          },
          "OntapConfiguration": {
            "$ref": "#/$defs/UpdateFileSystemOntapConfiguration"
          },
          "OpenZFSConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/UpdateFileSystemOpenZFSConfiguration"
              },
              {
                "description": "The configuration updates for an FSx for OpenZFS file system."
              }
            ]
          }
        },
        "description": "The request object for the <code>UpdateFileSystem</code> operation."
      },
      "FileSystemId": {
        "type": "string",
        "pattern": "^(fs-[0-9a-f]{8,})$",
        "description": "The globally unique ID of the file system, assigned by Amazon FSx.",
        "minLength": 11,
        "maxLength": 21
      },
      "ClientRequestToken": {
        "type": "string",
        "pattern": "[A-za-z0-9_.-]{0,63}$",
        "description": "(Optional) An idempotency token for resource creation, in a string of up to 63 ASCII characters. This token is automatically filled on your behalf when you use the Command Line Interface (CLI) or an Amazon Web Services SDK.",
        "minLength": 1,
        "maxLength": 63
      },
      "StorageCapacity": {
        "type": "integer",
        "description": "Specifies the file system's storage capacity, in gibibytes (GiB).",
        "minimum": 0,
        "maximum": 2147483647
      },
      "UpdateFileSystemWindowsConfiguration": {
        "type": "object",
        "properties": {
          "WeeklyMaintenanceStartTime": {
            "allOf": [
              {
                "$ref": "#/$defs/WeeklyTime"
              },
              {
                "description": "The preferred start time to perform weekly maintenance, formatted d:HH:MM in the UTC time zone. Where d is the weekday number, from 1 through 7, with 1 = Monday and 7 = Sunday."
              }
            ]
          },
          "DailyAutomaticBackupStartTime": {
            "allOf": [
              {
                "$ref": "#/$defs/DailyTime"
              },
              {
                "description": "The preferred time to start the daily automatic backup, in the UTC time zone, for example, <code>02:00</code> "
              }
            ]
          },
          "AutomaticBackupRetentionDays": {
            "allOf": [
              {
                "$ref": "#/$defs/AutomaticBackupRetentionDays"
              },
              {
                "description": "The number of days to retain automatic backups. Setting this property to <code>0</code> disables automatic backups. You can retain automatic backups for a maximum of 90 days. The default is <code>30</code>. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/using-backups.html#automatic-backups\">Working with Automatic Daily Backups</a>."
              }
            ]
          },
          "ThroughputCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/MegabytesPerSecond"
              },
              {
                "description": "Sets the target value for a file system's throughput capacity, in MB/s, that you are updating the file system to. Valid values are 8, 16, 32, 64, 128, 256, 512, 1024, 2048. You cannot make a throughput capacity update request if there is an existing throughput capacity update request in progress. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/managing-throughput-capacity.html\">Managing Throughput Capacity</a>."
              }
            ]
          },
          "SelfManagedActiveDirectoryConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/SelfManagedActiveDirectoryConfigurationUpdates"
              },
              {
                "description": "The configuration Amazon FSx uses to join the Windows File Server instance to the self-managed Microsoft AD directory. You cannot make a self-managed Microsoft AD update request if there is an existing self-managed Microsoft AD update request in progress."
              }
            ]
          },
          "AuditLogConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsAuditLogCreateConfiguration"
              },
              {
                "description": "The configuration that Amazon FSx for Windows File Server uses to audit and log user accesses of files, folders, and file shares on the Amazon FSx for Windows File Server file system.."
              }
            ]
          }
        },
        "description": "Updates the configuration for an existing Amazon FSx for Windows File Server file system. Amazon FSx only overwrites existing properties with non-null values provided in the request."
      },
      "WeeklyTime": {
        "type": "string",
        "pattern": "^[1-7]:([01]\\d|2[0-3]):?([0-5]\\d)$",
        "description": "<p>A recurring weekly time, in the format <code>D:HH:MM</code>. </p> <p> <code>D</code> is the day of the week, for which 1 represents Monday and 7 represents Sunday. For further details, see <a href=\"https://en.wikipedia.org/wiki/ISO_week_date\">the ISO-8601 spec as described on Wikipedia</a>.</p> <p> <code>HH</code> is the zero-padded hour of the day (0-23), and <code>MM</code> is the zero-padded minute of the hour. </p> <p>For example, <code>1:05:00</code> specifies maintenance at 5 AM Monday.</p>",
        "minLength": 7,
        "maxLength": 7
      },
      "DailyTime": {
        "type": "string",
        "pattern": "^([01]\\d|2[0-3]):?([0-5]\\d)$",
        "description": "A recurring daily time, in the format <code>HH:MM</code>. <code>HH</code> is the zero-padded hour of the day (0-23), and <code>MM</code> is the zero-padded minute of the hour. For example, <code>05:00</code> specifies 5 AM daily. ",
        "minLength": 5,
        "maxLength": 5
      },
      "AutomaticBackupRetentionDays": {
        "type": "integer",
        "description": "The number of days to retain automatic backups. Setting this property to <code>0</code> disables automatic backups. You can retain automatic backups for a maximum of 90 days. The default is <code>30</code>.",
        "minimum": 0,
        "maximum": 90
      },
      "MegabytesPerSecond": {
        "type": "integer",
        "description": "The sustained throughput of an Amazon FSx file system in Megabytes per second (MBps).",
        "minimum": 8,
        "maximum": 100000
      },
      "SelfManagedActiveDirectoryConfigurationUpdates": {
        "type": "object",
        "properties": {
          "UserName": {
            "allOf": [
              {
                "$ref": "#/$defs/DirectoryUserName"
              },
              {
                "description": "<p>Specifies the updated user name for the service account on your self-managed AD domain. Amazon FSx uses this account to join to your self-managed AD domain.</p> <p>This account must have the permissions required to join computers to the domain in the organizational unit provided in <code>OrganizationalUnitDistinguishedName</code>.</p>"
              }
            ]
          },
          "Password": {
            "allOf": [
              {
                "$ref": "#/$defs/DirectoryPassword"
              },
              {
                "description": "Specifies the updated password for the service account on your self-managed AD domain. Amazon FSx uses this account to join to your self-managed AD domain."
              }
            ]
          },
          "DnsIps": {
            "allOf": [
              {
                "$ref": "#/$defs/DnsIps"
              },
              {
                "description": "A list of up to three DNS server or domain controller IP addresses in your self-managed AD domain."
              }
            ]
          },
          "DomainName": {
            "allOf": [
              {
                "$ref": "#/$defs/ActiveDirectoryFullyQualifiedName"
              },
              {
                "description": "Specifies an updated fully qualified domain name of your self-managed AD configuration."
              }
            ]
          },
          "OrganizationalUnitDistinguishedName": {
            "allOf": [
              {
                "$ref": "#/$defs/OrganizationalUnitDistinguishedName"
              },
              {
                "description": "Specifies an updated fully qualified distinguished name of the organization unit within your self-managed AD."
              }
            ]
          },
          "FileSystemAdministratorsGroup": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemAdministratorsGroupName"
              },
              {
                "description": "Specifies the updated name of the self-managed AD domain group whose members are granted administrative privileges for the Amazon FSx resource."
              }
            ]
          }
        },
        "description": "Specifies changes you are making to the self-managed Microsoft Active Directory (AD) configuration to which an FSx for Windows File Server file system or an FSx for ONTAP SVM is joined."
      },
      "DirectoryUserName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,256}$",
        "minLength": 1,
        "maxLength": 256
      },
      "DirectoryPassword": {
        "type": "string",
        "pattern": "^.{1,256}$",
        "minLength": 1,
        "maxLength": 256,
        "format": "password"
      },
      "DnsIps": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/IpAddress"
        },
        "minItems": 1,
        "maxItems": 3
      },
      "IpAddress": {
        "type": "string",
        "pattern": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$",
        "minLength": 7,
        "maxLength": 15
      },
      "ActiveDirectoryFullyQualifiedName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,255}$",
        "minLength": 1,
        "maxLength": 255
      },
      "OrganizationalUnitDistinguishedName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,2000}$",
        "minLength": 1,
        "maxLength": 2000
      },
      "FileSystemAdministratorsGroupName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,256}$",
        "minLength": 1,
        "maxLength": 256
      },
      "WindowsAuditLogCreateConfiguration": {
        "type": "object",
        "required": [
          "FileAccessAuditLogLevel",
          "FileShareAccessAuditLogLevel"
        ],
        "properties": {
          "FileAccessAuditLogLevel": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsAccessAuditLogLevel"
              },
              {
                "description": "<p>Sets which attempt type is logged by Amazon FSx for file and folder accesses.</p> <ul> <li> <p> <code>SUCCESS_ONLY</code> - only successful attempts to access files or folders are logged.</p> </li> <li> <p> <code>FAILURE_ONLY</code> - only failed attempts to access files or folders are logged.</p> </li> <li> <p> <code>SUCCESS_AND_FAILURE</code> - both successful attempts and failed attempts to access files or folders are logged.</p> </li> <li> <p> <code>DISABLED</code> - access auditing of files and folders is turned off.</p> </li> </ul>"
              }
            ]
          },
          "FileShareAccessAuditLogLevel": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsAccessAuditLogLevel"
              },
              {
                "description": "<p>Sets which attempt type is logged by Amazon FSx for file share accesses.</p> <ul> <li> <p> <code>SUCCESS_ONLY</code> - only successful attempts to access file shares are logged.</p> </li> <li> <p> <code>FAILURE_ONLY</code> - only failed attempts to access file shares are logged.</p> </li> <li> <p> <code>SUCCESS_AND_FAILURE</code> - both successful attempts and failed attempts to access file shares are logged.</p> </li> <li> <p> <code>DISABLED</code> - access auditing of file shares is turned off.</p> </li> </ul>"
              }
            ]
          },
          "AuditLogDestination": {
            "allOf": [
              {
                "$ref": "#/$defs/GeneralARN"
              },
              {
                "description": "<p>The Amazon Resource Name (ARN) that specifies the destination of the audit logs.</p> <p>The destination can be any Amazon CloudWatch Logs log group ARN or Amazon Kinesis Data Firehose delivery stream ARN, with the following requirements:</p> <ul> <li> <p>The destination ARN that you provide (either CloudWatch Logs log group or Kinesis Data Firehose delivery stream) must be in the same Amazon Web Services partition, Amazon Web Services Region, and Amazon Web Services account as your Amazon FSx file system.</p> </li> <li> <p>The name of the Amazon CloudWatch Logs log group must begin with the <code>/aws/fsx</code> prefix. The name of the Amazon Kinesis Data Firehouse delivery stream must begin with the <code>aws-fsx</code> prefix.</p> </li> <li> <p>If you do not provide a destination in <code>AuditLogDestination</code>, Amazon FSx will create and use a log stream in the CloudWatch Logs <code>/aws/fsx/windows</code> log group.</p> </li> <li> <p>If <code>AuditLogDestination</code> is provided and the resource does not exist, the request will fail with a <code>BadRequest</code> error.</p> </li> <li> <p>If <code>FileAccessAuditLogLevel</code> and <code>FileShareAccessAuditLogLevel</code> are both set to <code>DISABLED</code>, you cannot specify a destination in <code>AuditLogDestination</code>.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The Windows file access auditing configuration used when creating or updating an Amazon FSx for Windows File Server file system."
      },
      "WindowsAccessAuditLogLevel": {
        "type": "string",
        "enum": [
          "DISABLED",
          "SUCCESS_ONLY",
          "FAILURE_ONLY",
          "SUCCESS_AND_FAILURE"
        ]
      },
      "GeneralARN": {
        "type": "string",
        "pattern": "^arn:[^:]{1,63}:[^:]{0,63}:[^:]{0,63}:(?:|\\d{12}):[^/].{0,1023}$",
        "minLength": 8,
        "maxLength": 1024
      },
      "UpdateFileSystemLustreConfiguration": {
        "type": "object",
        "properties": {
          "WeeklyMaintenanceStartTime": {
            "allOf": [
              {
                "$ref": "#/$defs/WeeklyTime"
              },
              {
                "description": "(Optional) The preferred start time to perform weekly maintenance, formatted d:HH:MM in the UTC time zone. d is the weekday number, from 1 through 7, beginning with Monday and ending with Sunday."
              }
            ]
          },
          "DailyAutomaticBackupStartTime": {
            "$ref": "#/$defs/DailyTime"
          },
          "AutomaticBackupRetentionDays": {
            "allOf": [
              {
                "$ref": "#/$defs/AutomaticBackupRetentionDays"
              },
              {
                "description": "The number of days to retain automatic backups. Setting this property to <code>0</code> disables automatic backups. You can retain automatic backups for a maximum of 90 days. The default is <code>0</code>."
              }
            ]
          },
          "AutoImportPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/AutoImportPolicyType"
              },
              {
                "description": "<p> (Optional) When you create your file system, your existing S3 objects appear as file and directory listings. Use this property to choose how Amazon FSx keeps your file and directory listing up to date as you add or modify objects in your linked S3 bucket. <code>AutoImportPolicy</code> can have the following values:</p> <ul> <li> <p> <code>NONE</code> - (Default) AutoImport is off. Amazon FSx only updates file and directory listings from the linked S3 bucket when the file system is created. FSx does not update the file and directory listing for any new or changed objects after choosing this option.</p> </li> <li> <p> <code>NEW</code> - AutoImport is on. Amazon FSx automatically imports directory listings of any new objects added to the linked S3 bucket that do not currently exist in the FSx file system. </p> </li> <li> <p> <code>NEW_CHANGED</code> - AutoImport is on. Amazon FSx automatically imports file and directory listings of any new objects added to the S3 bucket and any existing objects that are changed in the S3 bucket after you choose this option.</p> </li> <li> <p> <code>NEW_CHANGED_DELETED</code> - AutoImport is on. Amazon FSx automatically imports file and directory listings of any new objects added to the S3 bucket, any existing objects that are changed in the S3 bucket, and any objects that were deleted in the S3 bucket.</p> </li> </ul> <p>This parameter is not supported for file systems with a data repository association.</p>"
              }
            ]
          },
          "DataCompressionType": {
            "allOf": [
              {
                "$ref": "#/$defs/DataCompressionType"
              },
              {
                "description": "<p>Sets the data compression configuration for the file system. <code>DataCompressionType</code> can have the following values:</p> <ul> <li> <p> <code>NONE</code> - Data compression is turned off for the file system.</p> </li> <li> <p> <code>LZ4</code> - Data compression is turned on with the LZ4 algorithm.</p> </li> </ul> <p>If you don't use <code>DataCompressionType</code>, the file system retains its current data compression configuration.</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/data-compression.html\">Lustre data compression</a>.</p>"
              }
            ]
          },
          "LogConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreLogCreateConfiguration"
              },
              {
                "description": "The Lustre logging configuration used when updating an Amazon FSx for Lustre file system. When logging is enabled, Lustre logs error and warning events for data repositories associated with your file system to Amazon CloudWatch Logs."
              }
            ]
          },
          "RootSquashConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreRootSquashConfiguration"
              },
              {
                "description": "The Lustre root squash configuration used when updating an Amazon FSx for Lustre file system. When enabled, root squash restricts root-level access from clients that try to access your file system as a root user."
              }
            ]
          }
        },
        "description": "The configuration object for Amazon FSx for Lustre file systems used in the <code>UpdateFileSystem</code> operation."
      },
      "AutoImportPolicyType": {
        "type": "string",
        "enum": [
          "NONE",
          "NEW",
          "NEW_CHANGED",
          "NEW_CHANGED_DELETED"
        ]
      },
      "DataCompressionType": {
        "type": "string",
        "enum": [
          "NONE",
          "LZ4"
        ]
      },
      "LustreLogCreateConfiguration": {
        "type": "object",
        "required": [
          "Level"
        ],
        "properties": {
          "Level": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreAccessAuditLogLevel"
              },
              {
                "description": "<p>Sets which data repository events are logged by Amazon FSx.</p> <ul> <li> <p> <code>WARN_ONLY</code> - only warning events are logged.</p> </li> <li> <p> <code>ERROR_ONLY</code> - only error events are logged.</p> </li> <li> <p> <code>WARN_ERROR</code> - both warning events and error events are logged.</p> </li> <li> <p> <code>DISABLED</code> - logging of data repository events is turned off.</p> </li> </ul>"
              }
            ]
          },
          "Destination": {
            "allOf": [
              {
                "$ref": "#/$defs/GeneralARN"
              },
              {
                "description": "<p>The Amazon Resource Name (ARN) that specifies the destination of the logs.</p> <p>The destination can be any Amazon CloudWatch Logs log group ARN, with the following requirements:</p> <ul> <li> <p>The destination ARN that you provide must be in the same Amazon Web Services partition, Amazon Web Services Region, and Amazon Web Services account as your Amazon FSx file system.</p> </li> <li> <p>The name of the Amazon CloudWatch Logs log group must begin with the <code>/aws/fsx</code> prefix.</p> </li> <li> <p>If you do not provide a destination, Amazon FSx will create and use a log stream in the CloudWatch Logs <code>/aws/fsx/lustre</code> log group (for Amazon FSx for Lustre) or <code>/aws/fsx/filecache</code> (for Amazon File Cache).</p> </li> <li> <p>If <code>Destination</code> is provided and the resource does not exist, the request will fail with a <code>BadRequest</code> error.</p> </li> <li> <p>If <code>Level</code> is set to <code>DISABLED</code>, you cannot specify a destination in <code>Destination</code>.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "<p>The Lustre logging configuration used when creating or updating an Amazon FSx for Lustre file system. An Amazon File Cache is created with Lustre logging enabled by default, with a setting of <code>WARN_ERROR</code> for the logging events. which can't be changed.</p> <p>Lustre logging writes the enabled logging events for your file system or cache to Amazon CloudWatch Logs.</p>"
      },
      "LustreAccessAuditLogLevel": {
        "type": "string",
        "enum": [
          "DISABLED",
          "WARN_ONLY",
          "ERROR_ONLY",
          "WARN_ERROR"
        ]
      },
      "LustreRootSquashConfiguration": {
        "type": "object",
        "properties": {
          "RootSquash": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreRootSquash"
              },
              {
                "description": "<p>You enable root squash by setting a user ID (UID) and group ID (GID) for the file system in the format <code>UID:GID</code> (for example, <code>365534:65534</code>). The UID and GID values can range from <code>0</code> to <code>4294967294</code>:</p> <ul> <li> <p>A non-zero value for UID and GID enables root squash. The UID and GID values can be different, but each must be a non-zero value.</p> </li> <li> <p>A value of <code>0</code> (zero) for UID and GID indicates root, and therefore disables root squash.</p> </li> </ul> <p>When root squash is enabled, the user ID and group ID of a root user accessing the file system are re-mapped to the UID and GID you provide.</p>"
              }
            ]
          },
          "NoSquashNids": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreNoSquashNids"
              },
              {
                "description": "<p>When root squash is enabled, you can optionally specify an array of NIDs of clients for which root squash does not apply. A client NID is a Lustre Network Identifier used to uniquely identify a client. You can specify the NID as either a single address or a range of addresses:</p> <ul> <li> <p>A single address is described in standard Lustre NID format by specifying the clientâ€™s IP address followed by the Lustre network ID (for example, <code>10.0.1.6@tcp</code>).</p> </li> <li> <p>An address range is described using a dash to separate the range (for example, <code>10.0.[2-10].[1-255]@tcp</code>).</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "<p>The configuration for Lustre root squash used to restrict root-level access from clients that try to access your FSx for Lustre file system as root. Use the <code>RootSquash</code> parameter to enable root squash. To learn more about Lustre root squash, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/root-squash.html\">Lustre root squash</a>.</p> <p>You can also use the <code>NoSquashNids</code> parameter to provide an array of clients who are not affected by the root squash setting. These clients will access the file system as root, with unrestricted privileges.</p>"
      },
      "LustreRootSquash": {
        "type": "string",
        "pattern": "^([0-9]{1,10}):([0-9]{1,10})$",
        "minLength": 3,
        "maxLength": 21
      },
      "LustreNoSquashNids": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/LustreNoSquashNid"
        },
        "maxItems": 64
      },
      "LustreNoSquashNid": {
        "type": "string",
        "pattern": "^([0-9\\[\\]\\-]*\\.){3}([0-9\\[\\]\\-]*)@tcp$",
        "minLength": 11,
        "maxLength": 43
      },
      "UpdateFileSystemOntapConfiguration": {
        "type": "object",
        "properties": {
          "AutomaticBackupRetentionDays": {
            "$ref": "#/$defs/AutomaticBackupRetentionDays"
          },
          "DailyAutomaticBackupStartTime": {
            "$ref": "#/$defs/DailyTime"
          },
          "FsxAdminPassword": {
            "allOf": [
              {
                "$ref": "#/$defs/AdminPassword"
              },
              {
                "description": "Update the password for the <code>fsxadmin</code> user by entering a new password. You use the <code>fsxadmin</code> user to access the NetApp ONTAP CLI and REST API to manage your file system resources. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/managing-resources-ontap-apps.html\">Managing resources using NetApp Applicaton</a>."
              }
            ]
          },
          "WeeklyMaintenanceStartTime": {
            "$ref": "#/$defs/WeeklyTime"
          },
          "DiskIopsConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/DiskIopsConfiguration"
              },
              {
                "description": "The SSD IOPS (input output operations per second) configuration for an Amazon FSx for NetApp ONTAP file system. The default is 3 IOPS per GB of storage capacity, but you can provision additional IOPS per GB of storage. The configuration consists of an IOPS mode (<code>AUTOMATIC</code> or <code>USER_PROVISIONED</code>), and in the case of <code>USER_PROVISIONED</code> IOPS, the total number of SSD IOPS provisioned. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/increase-primary-storage.html\">Updating SSD storage capacity and IOPS</a>."
              }
            ]
          },
          "ThroughputCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/MegabytesPerSecond"
              },
              {
                "description": "Enter a new value to change the amount of throughput capacity for the file system. Throughput capacity is measured in megabytes per second (MBps). Valid values are 128, 256, 512, 1024, 2048, and 4096 MBps. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/managing-throughput-capacity.html\">Managing throughput capacity</a> in the FSx for ONTAP User Guide."
              }
            ]
          },
          "AddRouteTableIds": {
            "allOf": [
              {
                "$ref": "#/$defs/RouteTableIds"
              },
              {
                "description": "(Multi-AZ only) A list of IDs of new virtual private cloud (VPC) route tables to associate (add) with your Amazon FSx for NetApp ONTAP file system."
              }
            ]
          },
          "RemoveRouteTableIds": {
            "allOf": [
              {
                "$ref": "#/$defs/RouteTableIds"
              },
              {
                "description": "(Multi-AZ only) A list of IDs of existing virtual private cloud (VPC) route tables to disassociate (remove) from your Amazon FSx for NetApp ONTAP file system. You can use the API operation to retrieve the list of VPC route table IDs for a file system."
              }
            ]
          }
        },
        "description": "The configuration updates for an Amazon FSx for NetApp ONTAP file system."
      },
      "AdminPassword": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{8,50}$",
        "minLength": 8,
        "maxLength": 50,
        "format": "password"
      },
      "DiskIopsConfiguration": {
        "type": "object",
        "properties": {
          "Mode": {
            "allOf": [
              {
                "$ref": "#/$defs/DiskIopsConfigurationMode"
              },
              {
                "description": "Specifies whether the file system is using the <code>AUTOMATIC</code> setting of SSD IOPS of 3 IOPS per GB of storage capacity, , or if it using a <code>USER_PROVISIONED</code> value."
              }
            ]
          },
          "Iops": {
            "allOf": [
              {
                "$ref": "#/$defs/Iops"
              },
              {
                "description": "The total number of SSD IOPS provisioned for the file system."
              }
            ]
          }
        },
        "description": "The SSD IOPS (input/output operations per second) configuration for an Amazon FSx for NetApp ONTAP or FSx for OpenZFS file system. By default, Amazon FSx automatically provisions 3 IOPS per GB of storage capacity. You can provision additional IOPS per GB of storage. The configuration consists of the total number of provisioned SSD IOPS and how it is was provisioned, or the mode (by the customer or by Amazon FSx)."
      },
      "DiskIopsConfigurationMode": {
        "type": "string",
        "enum": [
          "AUTOMATIC",
          "USER_PROVISIONED"
        ]
      },
      "Iops": {
        "type": "integer",
        "minimum": 0,
        "maximum": 1000000
      },
      "RouteTableIds": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/RouteTableId"
        },
        "maxItems": 50
      },
      "RouteTableId": {
        "type": "string",
        "pattern": "^(rtb-[0-9a-f]{8,})$",
        "minLength": 12,
        "maxLength": 21
      },
      "UpdateFileSystemOpenZFSConfiguration": {
        "type": "object",
        "properties": {
          "AutomaticBackupRetentionDays": {
            "$ref": "#/$defs/AutomaticBackupRetentionDays"
          },
          "CopyTagsToBackups": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "A Boolean value indicating whether tags for the file system should be copied to backups. This value defaults to <code>false</code>. If it's set to <code>true</code>, all tags for the file system are copied to all automatic and user-initiated backups where the user doesn't specify tags. If this value is <code>true</code> and you specify one or more tags, only the specified tags are copied to backups. If you specify one or more tags when creating a user-initiated backup, no tags are copied from the file system, regardless of this value."
              }
            ]
          },
          "CopyTagsToVolumes": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "A Boolean value indicating whether tags for the volume should be copied to snapshots. This value defaults to <code>false</code>. If it's set to <code>true</code>, all tags for the volume are copied to snapshots where the user doesn't specify tags. If this value is <code>true</code> and you specify one or more tags, only the specified tags are copied to snapshots. If you specify one or more tags when creating the snapshot, no tags are copied from the volume, regardless of this value."
              }
            ]
          },
          "DailyAutomaticBackupStartTime": {
            "$ref": "#/$defs/DailyTime"
          },
          "ThroughputCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/MegabytesPerSecond"
              },
              {
                "description": "<p>The throughput of an Amazon FSx for OpenZFS file system, measured in megabytes per second&#x2028; (MB/s). Valid values depend on the DeploymentType you choose, as follows:</p> <ul> <li> <p>For <code>SINGLE_AZ_1</code>, valid values are 64, 128, 256, 512, 1024, 2048, 3072, or 4096 MB/s.</p> </li> <li> <p>For <code>SINGLE_AZ_2</code>, valid values are 160, 320, 640, 1280, 2560, 3840, 5120, 7680, or 10240 MB/s.</p> </li> </ul>"
              }
            ]
          },
          "WeeklyMaintenanceStartTime": {
            "$ref": "#/$defs/WeeklyTime"
          },
          "DiskIopsConfiguration": {
            "$ref": "#/$defs/DiskIopsConfiguration"
          }
        },
        "description": "The configuration updates for an Amazon FSx for OpenZFS file system."
      },
      "Flag": {
        "type": "boolean"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://fsx.us-east-1.amazonaws.com/#X-Amz-Target=AWSSimbaAPIService_v20180301.UpdateFileSystem"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The response object for the <code>UpdateFileSystem</code> operation.",
        "**Key properties:**",
        {
          "$ul": [
            "**FileSystem**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "486": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "487": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
