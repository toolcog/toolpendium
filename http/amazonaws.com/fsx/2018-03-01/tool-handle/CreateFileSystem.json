{
  "name": "CreateFileSystem",
  "description": "<p>Creates a new, empty Amazon FSx file system. You can create the following supported Amazon FSx file systems using the <code>CreateFileSystem</code> API operation:</p> <ul> <li> <p>Amazon FSx for Lustre</p> </li> <li> <p>Amazon FSx for NetApp ONTAP</p> </li> <li> <p>Amazon FSx for OpenZFS</p> </li> <li> <p>Amazon FSx for Windows File Server</p> </li> </ul> <p>This operation requires a client request token in the request that Amazon FSx uses to ensure idempotent creation. This means that calling the operation multiple times with the same client request token has no effect. By using the idempotent operation, you can retry a <code>CreateFileSystem</code> operation without the risk of creating an extra file system. This approach can be useful when an initial call fails in a way that makes it unclear whether a file system was created. Examples are if a transport level timeout occurred, or your connection was reset. If you use the same client request token and the initial call created a file system, the client receives success as long as the parameters are the same.</p> <p>If a file system with the specified client request token exists and the parameters match, <code>CreateFileSystem</code> returns the description of the existing file system. If a file system with the specified client request token exists and the parameters don't match, this call returns <code>IncompatibleParameterError</code>. If a file system with the specified client request token doesn't exist, <code>CreateFileSystem</code> does the following: </p> <ul> <li> <p>Creates a new, empty Amazon FSx file system with an assigned ID, and an initial lifecycle state of <code>CREATING</code>.</p> </li> <li> <p>Returns the description of the file system in JSON format.</p> </li> </ul> <note> <p>The <code>CreateFileSystem</code> call returns while the file system's lifecycle state is still <code>CREATING</code>. You can check the file-system creation status by calling the <a href=\"https://docs.aws.amazon.com/fsx/latest/APIReference/API_DescribeFileSystems.html\">DescribeFileSystems</a> operation, which returns the file system state along with other information.</p> </note>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "AWSSimbaAPIService_v20180301.CreateFileSystem"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/CreateFileSystemRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "CreateFileSystemRequest": {
        "type": "object",
        "required": [
          "FileSystemType",
          "StorageCapacity",
          "SubnetIds"
        ],
        "title": "CreateFileSystemRequest",
        "properties": {
          "ClientRequestToken": {
            "allOf": [
              {
                "$ref": "#/$defs/ClientRequestToken"
              },
              {
                "description": "A string of up to 63 ASCII characters that Amazon FSx uses to ensure idempotent creation. This string is automatically filled on your behalf when you use the Command Line Interface (CLI) or an Amazon Web Services SDK."
              }
            ]
          },
          "FileSystemType": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemType"
              },
              {
                "description": "The type of Amazon FSx file system to create. Valid values are <code>WINDOWS</code>, <code>LUSTRE</code>, <code>ONTAP</code>, and <code>OPENZFS</code>."
              }
            ]
          },
          "StorageCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/StorageCapacity"
              },
              {
                "description": "<p>Sets the storage capacity of the file system that you're creating, in gibibytes (GiB).</p> <p> <b>FSx for Lustre file systems</b> - The amount of storage capacity that you can configure depends on the value that you set for <code>StorageType</code> and the Lustre <code>DeploymentType</code>, as follows:</p> <ul> <li> <p>For <code>SCRATCH_2</code>, <code>PERSISTENT_2</code> and <code>PERSISTENT_1</code> deployment types using SSD storage type, the valid values are 1200 GiB, 2400 GiB, and increments of 2400 GiB.</p> </li> <li> <p>For <code>PERSISTENT_1</code> HDD file systems, valid values are increments of 6000 GiB for 12 MB/s/TiB file systems and increments of 1800 GiB for 40 MB/s/TiB file systems.</p> </li> <li> <p>For <code>SCRATCH_1</code> deployment type, valid values are 1200 GiB, 2400 GiB, and increments of 3600 GiB.</p> </li> </ul> <p> <b>FSx for ONTAP file systems</b> - The amount of storage capacity that you can configure is from 1024 GiB up to 196,608 GiB (192 TiB).</p> <p> <b>FSx for OpenZFS file systems</b> - The amount of storage capacity that you can configure is from 64 GiB up to 524,288 GiB (512 TiB).</p> <p> <b>FSx for Windows File Server file systems</b> - The amount of storage capacity that you can configure depends on the value that you set for <code>StorageType</code> as follows:</p> <ul> <li> <p>For SSD storage, valid values are 32 GiB-65,536 GiB (64 TiB).</p> </li> <li> <p>For HDD storage, valid values are 2000 GiB-65,536 GiB (64 TiB).</p> </li> </ul>"
              }
            ]
          },
          "StorageType": {
            "allOf": [
              {
                "$ref": "#/$defs/StorageType"
              },
              {
                "description": "<p>Sets the storage type for the file system that you're creating. Valid values are <code>SSD</code> and <code>HDD</code>.</p> <ul> <li> <p>Set to <code>SSD</code> to use solid state drive storage. SSD is supported on all Windows, Lustre, ONTAP, and OpenZFS deployment types.</p> </li> <li> <p>Set to <code>HDD</code> to use hard disk drive storage. HDD is supported on <code>SINGLE_AZ_2</code> and <code>MULTI_AZ_1</code> Windows file system deployment types, and on <code>PERSISTENT_1</code> Lustre file system deployment types. </p> </li> </ul> <p>Default value is <code>SSD</code>. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/optimize-fsx-costs.html#storage-type-options\"> Storage type options</a> in the <i>FSx for Windows File Server User Guide</i> and <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/what-is.html#storage-options\">Multiple storage options</a> in the <i>FSx for Lustre User Guide</i>. </p>"
              }
            ]
          },
          "SubnetIds": {
            "allOf": [
              {
                "$ref": "#/$defs/SubnetIds"
              },
              {
                "description": "<p>Specifies the IDs of the subnets that the file system will be accessible from. For Windows and ONTAP <code>MULTI_AZ_1</code> deployment types,provide exactly two subnet IDs, one for the preferred file server and one for the standby file server. You specify one of these subnets as the preferred subnet using the <code>WindowsConfiguration &gt; PreferredSubnetID</code> or <code>OntapConfiguration &gt; PreferredSubnetID</code> properties. For more information about Multi-AZ file system configuration, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/high-availability-multiAZ.html\"> Availability and durability: Single-AZ and Multi-AZ file systems</a> in the <i>Amazon FSx for Windows User Guide</i> and <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-multiAZ.html\"> Availability and durability</a> in the <i>Amazon FSx for ONTAP User Guide</i>.</p> <p>For Windows <code>SINGLE_AZ_1</code> and <code>SINGLE_AZ_2</code> and all Lustre deployment types, provide exactly one subnet ID. The file server is launched in that subnet's Availability Zone.</p>"
              }
            ]
          },
          "SecurityGroupIds": {
            "allOf": [
              {
                "$ref": "#/$defs/SecurityGroupIds"
              },
              {
                "description": "A list of IDs specifying the security groups to apply to all network interfaces created for file system access. This list isn't returned in later requests to describe the file system."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/Tags"
              },
              {
                "description": "The tags to apply to the file system that's being created. The key value of the <code>Name</code> tag appears in the console as the file system name."
              }
            ]
          },
          "KmsKeyId": {
            "$ref": "#/$defs/KmsKeyId"
          },
          "WindowsConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateFileSystemWindowsConfiguration"
              },
              {
                "description": "The Microsoft Windows configuration for the file system that's being created. "
              }
            ]
          },
          "LustreConfiguration": {
            "$ref": "#/$defs/CreateFileSystemLustreConfiguration"
          },
          "OntapConfiguration": {
            "$ref": "#/$defs/CreateFileSystemOntapConfiguration"
          },
          "FileSystemTypeVersion": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemTypeVersion"
              },
              {
                "description": "<p>(Optional) For FSx for Lustre file systems, sets the Lustre version for the file system that you're creating. Valid values are <code>2.10</code> and <code>2.12</code>:</p> <ul> <li> <p>2.10 is supported by the Scratch and Persistent_1 Lustre deployment types.</p> </li> <li> <p>2.12 is supported by all Lustre deployment types. <code>2.12</code> is required when setting FSx for Lustre <code>DeploymentType</code> to <code>PERSISTENT_2</code>.</p> </li> </ul> <p>Default value = <code>2.10</code>, except when <code>DeploymentType</code> is set to <code>PERSISTENT_2</code>, then the default is <code>2.12</code>.</p> <note> <p>If you set <code>FileSystemTypeVersion</code> to <code>2.10</code> for a <code>PERSISTENT_2</code> Lustre deployment type, the <code>CreateFileSystem</code> operation fails.</p> </note>"
              }
            ]
          },
          "OpenZFSConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateFileSystemOpenZFSConfiguration"
              },
              {
                "description": "The OpenZFS configuration for the file system that's being created."
              }
            ]
          }
        },
        "description": "The request object used to create a new Amazon FSx file system."
      },
      "ClientRequestToken": {
        "type": "string",
        "pattern": "[A-za-z0-9_.-]{0,63}$",
        "description": "(Optional) An idempotency token for resource creation, in a string of up to 63 ASCII characters. This token is automatically filled on your behalf when you use the Command Line Interface (CLI) or an Amazon Web Services SDK.",
        "minLength": 1,
        "maxLength": 63
      },
      "FileSystemType": {
        "type": "string",
        "enum": [
          "WINDOWS",
          "LUSTRE",
          "ONTAP",
          "OPENZFS"
        ],
        "description": "The type of file system."
      },
      "StorageCapacity": {
        "type": "integer",
        "description": "Specifies the file system's storage capacity, in gibibytes (GiB).",
        "minimum": 0,
        "maximum": 2147483647
      },
      "StorageType": {
        "type": "string",
        "enum": [
          "SSD",
          "HDD"
        ],
        "description": "Specifies the file system's storage type."
      },
      "SubnetIds": {
        "type": "array",
        "description": "A list of subnet IDs that the cache will be accessible from. You can specify only one subnet ID in a call to the <code>CreateFileCache</code> operation.",
        "items": {
          "$ref": "#/$defs/SubnetId"
        },
        "maxItems": 50
      },
      "SubnetId": {
        "type": "string",
        "pattern": "^(subnet-[0-9a-f]{8,})$",
        "description": "The ID for a subnet. A <i>subnet</i> is a range of IP addresses in your virtual private cloud (VPC). For more information, see <a href=\"https://docs.aws.amazon.com/AmazonVPC/latest/UserGuide/VPC_Subnets.html\">VPC and subnets</a> in the <i>Amazon VPC User Guide.</i> ",
        "minLength": 15,
        "maxLength": 24
      },
      "SecurityGroupIds": {
        "type": "array",
        "description": "A list of IDs specifying the security groups to apply to all network interfaces created for file system access. This list isn't returned in later requests to describe the file system.",
        "items": {
          "$ref": "#/$defs/SecurityGroupId"
        },
        "maxItems": 50
      },
      "SecurityGroupId": {
        "type": "string",
        "pattern": "^(sg-[0-9a-f]{8,})$",
        "description": "The ID of your Amazon EC2 security group. This ID is used to control network access to the endpoint that Amazon FSx creates on your behalf in each subnet. For more information, see <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html\">Amazon EC2 Security groups for Linux instances</a> in the <i>Amazon EC2 User Guide</i>.",
        "minLength": 11,
        "maxLength": 20
      },
      "Tags": {
        "type": "array",
        "description": "A list of <code>Tag</code> values, with a maximum of 50 elements.",
        "items": {
          "$ref": "#/$defs/Tag"
        },
        "minItems": 1,
        "maxItems": 50
      },
      "Tag": {
        "type": "object",
        "required": [
          "Key",
          "Value"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "A value that specifies the <code>TagKey</code>, the name of the tag. Tag keys must be unique for the resource to which they are attached."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "A value that specifies the <code>TagValue</code>, the value assigned to the corresponding tag key. Tag values can be null and don't have to be unique in a tag set. For example, you can have a key-value pair in a tag set of <code>finances : April</code> and also of <code>payroll : April</code>."
              }
            ]
          }
        },
        "description": "Specifies a key-value pair for a resource tag."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "description": "A string of 1 to 128 characters that specifies the key for a tag. Tag keys must be unique for the resource to which they are attached.",
        "minLength": 1,
        "maxLength": 128
      },
      "TagValue": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "description": "A string of 0 to 256 characters that specifies the value for a tag. Tag values can be null and don't have to be unique in a tag set.",
        "minLength": 0,
        "maxLength": 256
      },
      "KmsKeyId": {
        "type": "string",
        "pattern": "^.{1,2048}$",
        "description": "<p>Specifies the ID of the Key Management Service (KMS) key to use for encrypting data on Amazon FSx file systems, as follows:</p> <ul> <li> <p>Amazon FSx for Lustre <code>PERSISTENT_1</code> and <code>PERSISTENT_2</code> deployment types only.</p> <p> <code>SCRATCH_1</code> and <code>SCRATCH_2</code> types are encrypted using the Amazon FSx service KMS key for your account.</p> </li> <li> <p>Amazon FSx for NetApp ONTAP</p> </li> <li> <p>Amazon FSx for OpenZFS</p> </li> <li> <p>Amazon FSx for Windows File Server</p> </li> </ul> <p>If a <code>KmsKeyId</code> isn't specified, the Amazon FSx-managed KMS key for your account is used. For more information, see <a href=\"https://docs.aws.amazon.com/kms/latest/APIReference/API_Encrypt.html\">Encrypt</a> in the <i>Key Management Service API Reference</i>.</p>",
        "minLength": 1,
        "maxLength": 2048
      },
      "CreateFileSystemWindowsConfiguration": {
        "type": "object",
        "required": [
          "ThroughputCapacity"
        ],
        "properties": {
          "ActiveDirectoryId": {
            "allOf": [
              {
                "$ref": "#/$defs/DirectoryId"
              },
              {
                "description": "The ID for an existing Amazon Web Services Managed Microsoft Active Directory (AD) instance that the file system should join when it's created."
              }
            ]
          },
          "SelfManagedActiveDirectoryConfiguration": {
            "$ref": "#/$defs/SelfManagedActiveDirectoryConfiguration"
          },
          "DeploymentType": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsDeploymentType"
              },
              {
                "description": "<p>Specifies the file system deployment type, valid values are the following:</p> <ul> <li> <p> <code>MULTI_AZ_1</code> - Deploys a high availability file system that is configured for Multi-AZ redundancy to tolerate temporary Availability Zone (AZ) unavailability. You can only deploy a Multi-AZ file system in Amazon Web Services Regions that have a minimum of three Availability Zones. Also supports HDD storage type</p> </li> <li> <p> <code>SINGLE_AZ_1</code> - (Default) Choose to deploy a file system that is configured for single AZ redundancy.</p> </li> <li> <p> <code>SINGLE_AZ_2</code> - The latest generation Single AZ file system. Specifies a file system that is configured for single AZ redundancy and supports HDD storage type.</p> </li> </ul> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/high-availability-multiAZ.html\"> Availability and Durability: Single-AZ and Multi-AZ File Systems</a>.</p>"
              }
            ]
          },
          "PreferredSubnetId": {
            "allOf": [
              {
                "$ref": "#/$defs/SubnetId"
              },
              {
                "description": "Required when <code>DeploymentType</code> is set to <code>MULTI_AZ_1</code>. This specifies the subnet in which you want the preferred file server to be located. For in-Amazon Web Services applications, we recommend that you launch your clients in the same Availability Zone (AZ) as your preferred file server to reduce cross-AZ data transfer costs and minimize latency. "
              }
            ]
          },
          "ThroughputCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/MegabytesPerSecond"
              },
              {
                "description": "Sets the throughput capacity of an Amazon FSx file system, measured in megabytes per second (MB/s), in 2 to the <i>n</i>th increments, between 2^3 (8) and 2^11 (2048)."
              }
            ]
          },
          "WeeklyMaintenanceStartTime": {
            "allOf": [
              {
                "$ref": "#/$defs/WeeklyTime"
              },
              {
                "description": "The preferred start time to perform weekly maintenance, formatted d:HH:MM in the UTC time zone, where d is the weekday number, from 1 through 7, beginning with Monday and ending with Sunday."
              }
            ]
          },
          "DailyAutomaticBackupStartTime": {
            "allOf": [
              {
                "$ref": "#/$defs/DailyTime"
              },
              {
                "description": "The preferred time to take daily automatic backups, formatted HH:MM in the UTC time zone."
              }
            ]
          },
          "AutomaticBackupRetentionDays": {
            "allOf": [
              {
                "$ref": "#/$defs/AutomaticBackupRetentionDays"
              },
              {
                "description": "The number of days to retain automatic backups. Setting this property to <code>0</code> disables automatic backups. You can retain automatic backups for a maximum of 90 days. The default is <code>30</code>."
              }
            ]
          },
          "CopyTagsToBackups": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "A boolean flag indicating whether tags for the file system should be copied to backups. This value defaults to false. If it's set to true, all tags for the file system are copied to all automatic and user-initiated backups where the user doesn't specify tags. If this value is true, and you specify one or more tags, only the specified tags are copied to backups. If you specify one or more tags when creating a user-initiated backup, no tags are copied from the file system, regardless of this value."
              }
            ]
          },
          "Aliases": {
            "allOf": [
              {
                "$ref": "#/$defs/AlternateDNSNames"
              },
              {
                "description": "<p>An array of one or more DNS alias names that you want to associate with the Amazon FSx file system. Aliases allow you to use existing DNS names to access the data in your Amazon FSx file system. You can associate up to 50 aliases with a file system at any time. You can associate additional DNS aliases after you create the file system using the AssociateFileSystemAliases operation. You can remove DNS aliases from the file system after it is created using the DisassociateFileSystemAliases operation. You only need to specify the alias name in the request payload.</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/managing-dns-aliases.html\">Working with DNS Aliases</a> and <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/walkthrough05-file-system-custom-CNAME.html\">Walkthrough 5: Using DNS aliases to access your file system</a>, including additional steps you must take to be able to access your file system using a DNS alias.</p> <p>An alias name has to meet the following requirements:</p> <ul> <li> <p>Formatted as a fully-qualified domain name (FQDN), <code>hostname.domain</code>, for example, <code>accounting.example.com</code>.</p> </li> <li> <p>Can contain alphanumeric characters, the underscore (_), and the hyphen (-).</p> </li> <li> <p>Cannot start or end with a hyphen.</p> </li> <li> <p>Can start with a numeric.</p> </li> </ul> <p>For DNS alias names, Amazon FSx stores alphabetic characters as lowercase letters (a-z), regardless of how you specify them: as uppercase letters, lowercase letters, or the corresponding letters in escape codes.</p>"
              }
            ]
          },
          "AuditLogConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsAuditLogCreateConfiguration"
              },
              {
                "description": "The configuration that Amazon FSx for Windows File Server uses to audit and log user accesses of files, folders, and file shares on the Amazon FSx for Windows File Server file system."
              }
            ]
          }
        },
        "description": "The configuration object for the Microsoft Windows file system used in <code>CreateFileSystem</code> and <code>CreateFileSystemFromBackup</code> operations."
      },
      "DirectoryId": {
        "type": "string",
        "pattern": "^d-[0-9a-f]{10}$",
        "minLength": 12,
        "maxLength": 12
      },
      "SelfManagedActiveDirectoryConfiguration": {
        "type": "object",
        "required": [
          "DomainName",
          "UserName",
          "Password",
          "DnsIps"
        ],
        "properties": {
          "DomainName": {
            "allOf": [
              {
                "$ref": "#/$defs/ActiveDirectoryFullyQualifiedName"
              },
              {
                "description": "The fully qualified domain name of the self-managed AD directory, such as <code>corp.example.com</code>."
              }
            ]
          },
          "OrganizationalUnitDistinguishedName": {
            "allOf": [
              {
                "$ref": "#/$defs/OrganizationalUnitDistinguishedName"
              },
              {
                "description": "<p>(Optional) The fully qualified distinguished name of the organizational unit within your self-managed AD directory. Amazon FSx only accepts OU as the direct parent of the file system. An example is <code>OU=FSx,DC=yourdomain,DC=corp,DC=com</code>. To learn more, see <a href=\"https://tools.ietf.org/html/rfc2253\">RFC 2253</a>. If none is provided, the FSx file system is created in the default location of your self-managed AD directory. </p> <important> <p>Only Organizational Unit (OU) objects can be the direct parent of the file system that you're creating.</p> </important>"
              }
            ]
          },
          "FileSystemAdministratorsGroup": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemAdministratorsGroupName"
              },
              {
                "description": "(Optional) The name of the domain group whose members are granted administrative privileges for the file system. Administrative privileges include taking ownership of files and folders, setting audit controls (audit ACLs) on files and folders, and administering the file system remotely by using the FSx Remote PowerShell. The group that you specify must already exist in your domain. If you don't provide one, your AD domain's Domain Admins group is used."
              }
            ]
          },
          "UserName": {
            "allOf": [
              {
                "$ref": "#/$defs/DirectoryUserName"
              },
              {
                "description": "The user name for the service account on your self-managed AD domain that Amazon FSx will use to join to your AD domain. This account must have the permission to join computers to the domain in the organizational unit provided in <code>OrganizationalUnitDistinguishedName</code>, or in the default location of your AD domain."
              }
            ]
          },
          "Password": {
            "allOf": [
              {
                "$ref": "#/$defs/DirectoryPassword"
              },
              {
                "description": "The password for the service account on your self-managed AD domain that Amazon FSx will use to join to your AD domain."
              }
            ]
          },
          "DnsIps": {
            "allOf": [
              {
                "$ref": "#/$defs/DnsIps"
              },
              {
                "description": "A list of up to three IP addresses of DNS servers or domain controllers in the self-managed AD directory. "
              }
            ]
          }
        },
        "description": "The configuration that Amazon FSx uses to join a FSx for Windows File Server file system or an FSx for ONTAP storage virtual machine (SVM) to a self-managed (including on-premises) Microsoft Active Directory (AD) directory. For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/WindowsGuide/self-managed-AD.html\"> Using Amazon FSx for Windows with your self-managed Microsoft Active Directory</a> or <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/managing-svms.html\">Managing FSx for ONTAP SVMs</a>."
      },
      "ActiveDirectoryFullyQualifiedName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,255}$",
        "minLength": 1,
        "maxLength": 255
      },
      "OrganizationalUnitDistinguishedName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,2000}$",
        "minLength": 1,
        "maxLength": 2000
      },
      "FileSystemAdministratorsGroupName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,256}$",
        "minLength": 1,
        "maxLength": 256
      },
      "DirectoryUserName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{1,256}$",
        "minLength": 1,
        "maxLength": 256
      },
      "DirectoryPassword": {
        "type": "string",
        "pattern": "^.{1,256}$",
        "minLength": 1,
        "maxLength": 256,
        "format": "password"
      },
      "DnsIps": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/IpAddress"
        },
        "minItems": 1,
        "maxItems": 3
      },
      "IpAddress": {
        "type": "string",
        "pattern": "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$",
        "minLength": 7,
        "maxLength": 15
      },
      "WindowsDeploymentType": {
        "type": "string",
        "enum": [
          "MULTI_AZ_1",
          "SINGLE_AZ_1",
          "SINGLE_AZ_2"
        ]
      },
      "MegabytesPerSecond": {
        "type": "integer",
        "description": "The sustained throughput of an Amazon FSx file system in Megabytes per second (MBps).",
        "minimum": 8,
        "maximum": 100000
      },
      "WeeklyTime": {
        "type": "string",
        "pattern": "^[1-7]:([01]\\d|2[0-3]):?([0-5]\\d)$",
        "description": "<p>A recurring weekly time, in the format <code>D:HH:MM</code>. </p> <p> <code>D</code> is the day of the week, for which 1 represents Monday and 7 represents Sunday. For further details, see <a href=\"https://en.wikipedia.org/wiki/ISO_week_date\">the ISO-8601 spec as described on Wikipedia</a>.</p> <p> <code>HH</code> is the zero-padded hour of the day (0-23), and <code>MM</code> is the zero-padded minute of the hour. </p> <p>For example, <code>1:05:00</code> specifies maintenance at 5 AM Monday.</p>",
        "minLength": 7,
        "maxLength": 7
      },
      "DailyTime": {
        "type": "string",
        "pattern": "^([01]\\d|2[0-3]):?([0-5]\\d)$",
        "description": "A recurring daily time, in the format <code>HH:MM</code>. <code>HH</code> is the zero-padded hour of the day (0-23), and <code>MM</code> is the zero-padded minute of the hour. For example, <code>05:00</code> specifies 5 AM daily. ",
        "minLength": 5,
        "maxLength": 5
      },
      "AutomaticBackupRetentionDays": {
        "type": "integer",
        "description": "The number of days to retain automatic backups. Setting this property to <code>0</code> disables automatic backups. You can retain automatic backups for a maximum of 90 days. The default is <code>30</code>.",
        "minimum": 0,
        "maximum": 90
      },
      "Flag": {
        "type": "boolean"
      },
      "AlternateDNSNames": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/AlternateDNSName"
        },
        "maxItems": 50
      },
      "AlternateDNSName": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{4,253}$",
        "minLength": 4,
        "maxLength": 253
      },
      "WindowsAuditLogCreateConfiguration": {
        "type": "object",
        "required": [
          "FileAccessAuditLogLevel",
          "FileShareAccessAuditLogLevel"
        ],
        "properties": {
          "FileAccessAuditLogLevel": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsAccessAuditLogLevel"
              },
              {
                "description": "<p>Sets which attempt type is logged by Amazon FSx for file and folder accesses.</p> <ul> <li> <p> <code>SUCCESS_ONLY</code> - only successful attempts to access files or folders are logged.</p> </li> <li> <p> <code>FAILURE_ONLY</code> - only failed attempts to access files or folders are logged.</p> </li> <li> <p> <code>SUCCESS_AND_FAILURE</code> - both successful attempts and failed attempts to access files or folders are logged.</p> </li> <li> <p> <code>DISABLED</code> - access auditing of files and folders is turned off.</p> </li> </ul>"
              }
            ]
          },
          "FileShareAccessAuditLogLevel": {
            "allOf": [
              {
                "$ref": "#/$defs/WindowsAccessAuditLogLevel"
              },
              {
                "description": "<p>Sets which attempt type is logged by Amazon FSx for file share accesses.</p> <ul> <li> <p> <code>SUCCESS_ONLY</code> - only successful attempts to access file shares are logged.</p> </li> <li> <p> <code>FAILURE_ONLY</code> - only failed attempts to access file shares are logged.</p> </li> <li> <p> <code>SUCCESS_AND_FAILURE</code> - both successful attempts and failed attempts to access file shares are logged.</p> </li> <li> <p> <code>DISABLED</code> - access auditing of file shares is turned off.</p> </li> </ul>"
              }
            ]
          },
          "AuditLogDestination": {
            "allOf": [
              {
                "$ref": "#/$defs/GeneralARN"
              },
              {
                "description": "<p>The Amazon Resource Name (ARN) that specifies the destination of the audit logs.</p> <p>The destination can be any Amazon CloudWatch Logs log group ARN or Amazon Kinesis Data Firehose delivery stream ARN, with the following requirements:</p> <ul> <li> <p>The destination ARN that you provide (either CloudWatch Logs log group or Kinesis Data Firehose delivery stream) must be in the same Amazon Web Services partition, Amazon Web Services Region, and Amazon Web Services account as your Amazon FSx file system.</p> </li> <li> <p>The name of the Amazon CloudWatch Logs log group must begin with the <code>/aws/fsx</code> prefix. The name of the Amazon Kinesis Data Firehouse delivery stream must begin with the <code>aws-fsx</code> prefix.</p> </li> <li> <p>If you do not provide a destination in <code>AuditLogDestination</code>, Amazon FSx will create and use a log stream in the CloudWatch Logs <code>/aws/fsx/windows</code> log group.</p> </li> <li> <p>If <code>AuditLogDestination</code> is provided and the resource does not exist, the request will fail with a <code>BadRequest</code> error.</p> </li> <li> <p>If <code>FileAccessAuditLogLevel</code> and <code>FileShareAccessAuditLogLevel</code> are both set to <code>DISABLED</code>, you cannot specify a destination in <code>AuditLogDestination</code>.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The Windows file access auditing configuration used when creating or updating an Amazon FSx for Windows File Server file system."
      },
      "WindowsAccessAuditLogLevel": {
        "type": "string",
        "enum": [
          "DISABLED",
          "SUCCESS_ONLY",
          "FAILURE_ONLY",
          "SUCCESS_AND_FAILURE"
        ]
      },
      "GeneralARN": {
        "type": "string",
        "pattern": "^arn:[^:]{1,63}:[^:]{0,63}:[^:]{0,63}:(?:|\\d{12}):[^/].{0,1023}$",
        "minLength": 8,
        "maxLength": 1024
      },
      "CreateFileSystemLustreConfiguration": {
        "type": "object",
        "properties": {
          "WeeklyMaintenanceStartTime": {
            "allOf": [
              {
                "$ref": "#/$defs/WeeklyTime"
              },
              {
                "description": "(Optional) The preferred start time to perform weekly maintenance, formatted d:HH:MM in the UTC time zone, where d is the weekday number, from 1 through 7, beginning with Monday and ending with Sunday."
              }
            ]
          },
          "ImportPath": {
            "allOf": [
              {
                "$ref": "#/$defs/ArchivePath"
              },
              {
                "description": "<p>(Optional) The path to the Amazon S3 bucket (including the optional prefix) that you're using as the data repository for your Amazon FSx for Lustre file system. The root of your FSx for Lustre file system will be mapped to the root of the Amazon S3 bucket you select. An example is <code>s3://import-bucket/optional-prefix</code>. If you specify a prefix after the Amazon S3 bucket name, only object keys with that prefix are loaded into the file system.</p> <note> <p>This parameter is not supported for file systems with a data repository association.</p> </note>"
              }
            ]
          },
          "ExportPath": {
            "allOf": [
              {
                "$ref": "#/$defs/ArchivePath"
              },
              {
                "description": "<p>(Optional) Specifies the path in the Amazon S3 bucket where the root of your Amazon FSx file system is exported. The path must use the same Amazon S3 bucket as specified in ImportPath. You can provide an optional prefix to which new and changed data is to be exported from your Amazon FSx for Lustre file system. If an <code>ExportPath</code> value is not provided, Amazon FSx sets a default export path, <code>s3://import-bucket/FSxLustre[creation-timestamp]</code>. The timestamp is in UTC format, for example <code>s3://import-bucket/FSxLustre20181105T222312Z</code>.</p> <p>The Amazon S3 export bucket must be the same as the import bucket specified by <code>ImportPath</code>. If you specify only a bucket name, such as <code>s3://import-bucket</code>, you get a 1:1 mapping of file system objects to S3 bucket objects. This mapping means that the input data in S3 is overwritten on export. If you provide a custom prefix in the export path, such as <code>s3://import-bucket/[custom-optional-prefix]</code>, Amazon FSx exports the contents of your file system to that export prefix in the Amazon S3 bucket.</p> <note> <p>This parameter is not supported for file systems with a data repository association.</p> </note>"
              }
            ]
          },
          "ImportedFileChunkSize": {
            "allOf": [
              {
                "$ref": "#/$defs/Megabytes"
              },
              {
                "description": "<p>(Optional) For files imported from a data repository, this value determines the stripe count and maximum amount of data per file (in MiB) stored on a single physical disk. The maximum number of disks that a single file can be striped across is limited by the total number of disks that make up the file system.</p> <p>The default chunk size is 1,024 MiB (1 GiB) and can go as high as 512,000 MiB (500 GiB). Amazon S3 objects have a maximum size of 5 TB.</p> <note> <p>This parameter is not supported for file systems with a data repository association.</p> </note>"
              }
            ]
          },
          "DeploymentType": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreDeploymentType"
              },
              {
                "description": "<p>(Optional) Choose <code>SCRATCH_1</code> and <code>SCRATCH_2</code> deployment types when you need temporary storage and shorter-term processing of data. The <code>SCRATCH_2</code> deployment type provides in-transit encryption of data and higher burst throughput capacity than <code>SCRATCH_1</code>.</p> <p>Choose <code>PERSISTENT_1</code> for longer-term storage and for throughput-focused workloads that aren’t latency-sensitive. <code>PERSISTENT_1</code> supports encryption of data in transit, and is available in all Amazon Web Services Regions in which FSx for Lustre is available.</p> <p>Choose <code>PERSISTENT_2</code> for longer-term storage and for latency-sensitive workloads that require the highest levels of IOPS/throughput. <code>PERSISTENT_2</code> supports SSD storage, and offers higher <code>PerUnitStorageThroughput</code> (up to 1000 MB/s/TiB). <code>PERSISTENT_2</code> is available in a limited number of Amazon Web Services Regions. For more information, and an up-to-date list of Amazon Web Services Regions in which <code>PERSISTENT_2</code> is available, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/using-fsx-lustre.html#lustre-deployment-types\">File system deployment options for FSx for Lustre</a> in the <i>Amazon FSx for Lustre User Guide</i>.</p> <note> <p>If you choose <code>PERSISTENT_2</code>, and you set <code>FileSystemTypeVersion</code> to <code>2.10</code>, the <code>CreateFileSystem</code> operation fails.</p> </note> <p>Encryption of data in transit is automatically turned on when you access <code>SCRATCH_2</code>, <code>PERSISTENT_1</code> and <code>PERSISTENT_2</code> file systems from Amazon EC2 instances that support automatic encryption in the Amazon Web Services Regions where they are available. For more information about encryption in transit for FSx for Lustre file systems, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/encryption-in-transit-fsxl.html\">Encrypting data in transit</a> in the <i>Amazon FSx for Lustre User Guide</i>. </p> <p>(Default = <code>SCRATCH_1</code>)</p>"
              }
            ]
          },
          "AutoImportPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/AutoImportPolicyType"
              },
              {
                "description": "<p> (Optional) When you create your file system, your existing S3 objects appear as file and directory listings. Use this parameter to choose how Amazon FSx keeps your file and directory listings up to date as you add or modify objects in your linked S3 bucket. <code>AutoImportPolicy</code> can have the following values:</p> <ul> <li> <p> <code>NONE</code> - (Default) AutoImport is off. Amazon FSx only updates file and directory listings from the linked S3 bucket when the file system is created. FSx does not update file and directory listings for any new or changed objects after choosing this option.</p> </li> <li> <p> <code>NEW</code> - AutoImport is on. Amazon FSx automatically imports directory listings of any new objects added to the linked S3 bucket that do not currently exist in the FSx file system. </p> </li> <li> <p> <code>NEW_CHANGED</code> - AutoImport is on. Amazon FSx automatically imports file and directory listings of any new objects added to the S3 bucket and any existing objects that are changed in the S3 bucket after you choose this option.</p> </li> <li> <p> <code>NEW_CHANGED_DELETED</code> - AutoImport is on. Amazon FSx automatically imports file and directory listings of any new objects added to the S3 bucket, any existing objects that are changed in the S3 bucket, and any objects that were deleted in the S3 bucket.</p> </li> </ul> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/older-deployment-types.html#legacy-auto-import-from-s3\"> Automatically import updates from your S3 bucket</a>.</p> <note> <p>This parameter is not supported for file systems with a data repository association.</p> </note>"
              }
            ]
          },
          "PerUnitStorageThroughput": {
            "allOf": [
              {
                "$ref": "#/$defs/PerUnitStorageThroughput"
              },
              {
                "description": "<p>Required with <code>PERSISTENT_1</code> and <code>PERSISTENT_2</code> deployment types, provisions the amount of read and write throughput for each 1 tebibyte (TiB) of file system storage capacity, in MB/s/TiB. File system throughput capacity is calculated by multiplying ﬁle system storage capacity (TiB) by the <code>PerUnitStorageThroughput</code> (MB/s/TiB). For a 2.4-TiB ﬁle system, provisioning 50 MB/s/TiB of <code>PerUnitStorageThroughput</code> yields 120 MB/s of ﬁle system throughput. You pay for the amount of throughput that you provision. </p> <p>Valid values:</p> <ul> <li> <p>For <code>PERSISTENT_1</code> SSD storage: 50, 100, 200 MB/s/TiB.</p> </li> <li> <p>For <code>PERSISTENT_1</code> HDD storage: 12, 40 MB/s/TiB.</p> </li> <li> <p>For <code>PERSISTENT_2</code> SSD storage: 125, 250, 500, 1000 MB/s/TiB.</p> </li> </ul>"
              }
            ]
          },
          "DailyAutomaticBackupStartTime": {
            "$ref": "#/$defs/DailyTime"
          },
          "AutomaticBackupRetentionDays": {
            "allOf": [
              {
                "$ref": "#/$defs/AutomaticBackupRetentionDays"
              },
              {
                "description": "The number of days to retain automatic backups. Setting this property to <code>0</code> disables automatic backups. You can retain automatic backups for a maximum of 90 days. The default is <code>0</code>."
              }
            ]
          },
          "CopyTagsToBackups": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "<p>(Optional) Not available for use with file systems that are linked to a data repository. A boolean flag indicating whether tags for the file system should be copied to backups. The default value is false. If <code>CopyTagsToBackups</code> is set to true, all file system tags are copied to all automatic and user-initiated backups when the user doesn't specify any backup-specific tags. If <code>CopyTagsToBackups</code> is set to true and you specify one or more backup tags, only the specified tags are copied to backups. If you specify one or more tags when creating a user-initiated backup, no tags are copied from the file system, regardless of this value.</p> <p>(Default = <code>false</code>)</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/using-backups-fsx.html\"> Working with backups</a> in the <i>Amazon FSx for Lustre User Guide</i>.</p>"
              }
            ]
          },
          "DriveCacheType": {
            "allOf": [
              {
                "$ref": "#/$defs/DriveCacheType"
              },
              {
                "description": "<p>The type of drive cache used by <code>PERSISTENT_1</code> file systems that are provisioned with HDD storage devices. This parameter is required when storage type is HDD. Set this property to <code>READ</code> to improve the performance for frequently accessed files by caching up to 20% of the total storage capacity of the file system.</p> <p>This parameter is required when <code>StorageType</code> is set to <code>HDD</code>.</p>"
              }
            ]
          },
          "DataCompressionType": {
            "allOf": [
              {
                "$ref": "#/$defs/DataCompressionType"
              },
              {
                "description": "<p>Sets the data compression configuration for the file system. <code>DataCompressionType</code> can have the following values:</p> <ul> <li> <p> <code>NONE</code> - (Default) Data compression is turned off when the file system is created.</p> </li> <li> <p> <code>LZ4</code> - Data compression is turned on with the LZ4 algorithm.</p> </li> </ul> <p>For more information, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/data-compression.html\">Lustre data compression</a> in the <i>Amazon FSx for Lustre User Guide</i>.</p>"
              }
            ]
          },
          "LogConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreLogCreateConfiguration"
              },
              {
                "description": "The Lustre logging configuration used when creating an Amazon FSx for Lustre file system. When logging is enabled, Lustre logs error and warning events for data repositories associated with your file system to Amazon CloudWatch Logs."
              }
            ]
          },
          "RootSquashConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreRootSquashConfiguration"
              },
              {
                "description": "The Lustre root squash configuration used when creating an Amazon FSx for Lustre file system. When enabled, root squash restricts root-level access from clients that try to access your file system as a root user."
              }
            ]
          }
        },
        "description": "<p>The Lustre configuration for the file system being created.</p> <note> <p>The following parameters are not supported for file systems with a data repository association created with .</p> <ul> <li> <p> <code>AutoImportPolicy</code> </p> </li> <li> <p> <code>ExportPath</code> </p> </li> <li> <p> <code>ImportedChunkSize</code> </p> </li> <li> <p> <code>ImportPath</code> </p> </li> </ul> </note>"
      },
      "ArchivePath": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{3,4357}$",
        "minLength": 3,
        "maxLength": 4357
      },
      "Megabytes": {
        "type": "integer",
        "minimum": 1,
        "maximum": 512000
      },
      "LustreDeploymentType": {
        "type": "string",
        "enum": [
          "SCRATCH_1",
          "SCRATCH_2",
          "PERSISTENT_1",
          "PERSISTENT_2"
        ]
      },
      "AutoImportPolicyType": {
        "type": "string",
        "enum": [
          "NONE",
          "NEW",
          "NEW_CHANGED",
          "NEW_CHANGED_DELETED"
        ]
      },
      "PerUnitStorageThroughput": {
        "type": "integer",
        "minimum": 12,
        "maximum": 1000
      },
      "DriveCacheType": {
        "type": "string",
        "enum": [
          "NONE",
          "READ"
        ]
      },
      "DataCompressionType": {
        "type": "string",
        "enum": [
          "NONE",
          "LZ4"
        ]
      },
      "LustreLogCreateConfiguration": {
        "type": "object",
        "required": [
          "Level"
        ],
        "properties": {
          "Level": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreAccessAuditLogLevel"
              },
              {
                "description": "<p>Sets which data repository events are logged by Amazon FSx.</p> <ul> <li> <p> <code>WARN_ONLY</code> - only warning events are logged.</p> </li> <li> <p> <code>ERROR_ONLY</code> - only error events are logged.</p> </li> <li> <p> <code>WARN_ERROR</code> - both warning events and error events are logged.</p> </li> <li> <p> <code>DISABLED</code> - logging of data repository events is turned off.</p> </li> </ul>"
              }
            ]
          },
          "Destination": {
            "allOf": [
              {
                "$ref": "#/$defs/GeneralARN"
              },
              {
                "description": "<p>The Amazon Resource Name (ARN) that specifies the destination of the logs.</p> <p>The destination can be any Amazon CloudWatch Logs log group ARN, with the following requirements:</p> <ul> <li> <p>The destination ARN that you provide must be in the same Amazon Web Services partition, Amazon Web Services Region, and Amazon Web Services account as your Amazon FSx file system.</p> </li> <li> <p>The name of the Amazon CloudWatch Logs log group must begin with the <code>/aws/fsx</code> prefix.</p> </li> <li> <p>If you do not provide a destination, Amazon FSx will create and use a log stream in the CloudWatch Logs <code>/aws/fsx/lustre</code> log group (for Amazon FSx for Lustre) or <code>/aws/fsx/filecache</code> (for Amazon File Cache).</p> </li> <li> <p>If <code>Destination</code> is provided and the resource does not exist, the request will fail with a <code>BadRequest</code> error.</p> </li> <li> <p>If <code>Level</code> is set to <code>DISABLED</code>, you cannot specify a destination in <code>Destination</code>.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "<p>The Lustre logging configuration used when creating or updating an Amazon FSx for Lustre file system. An Amazon File Cache is created with Lustre logging enabled by default, with a setting of <code>WARN_ERROR</code> for the logging events. which can't be changed.</p> <p>Lustre logging writes the enabled logging events for your file system or cache to Amazon CloudWatch Logs.</p>"
      },
      "LustreAccessAuditLogLevel": {
        "type": "string",
        "enum": [
          "DISABLED",
          "WARN_ONLY",
          "ERROR_ONLY",
          "WARN_ERROR"
        ]
      },
      "LustreRootSquashConfiguration": {
        "type": "object",
        "properties": {
          "RootSquash": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreRootSquash"
              },
              {
                "description": "<p>You enable root squash by setting a user ID (UID) and group ID (GID) for the file system in the format <code>UID:GID</code> (for example, <code>365534:65534</code>). The UID and GID values can range from <code>0</code> to <code>4294967294</code>:</p> <ul> <li> <p>A non-zero value for UID and GID enables root squash. The UID and GID values can be different, but each must be a non-zero value.</p> </li> <li> <p>A value of <code>0</code> (zero) for UID and GID indicates root, and therefore disables root squash.</p> </li> </ul> <p>When root squash is enabled, the user ID and group ID of a root user accessing the file system are re-mapped to the UID and GID you provide.</p>"
              }
            ]
          },
          "NoSquashNids": {
            "allOf": [
              {
                "$ref": "#/$defs/LustreNoSquashNids"
              },
              {
                "description": "<p>When root squash is enabled, you can optionally specify an array of NIDs of clients for which root squash does not apply. A client NID is a Lustre Network Identifier used to uniquely identify a client. You can specify the NID as either a single address or a range of addresses:</p> <ul> <li> <p>A single address is described in standard Lustre NID format by specifying the client’s IP address followed by the Lustre network ID (for example, <code>10.0.1.6@tcp</code>).</p> </li> <li> <p>An address range is described using a dash to separate the range (for example, <code>10.0.[2-10].[1-255]@tcp</code>).</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "<p>The configuration for Lustre root squash used to restrict root-level access from clients that try to access your FSx for Lustre file system as root. Use the <code>RootSquash</code> parameter to enable root squash. To learn more about Lustre root squash, see <a href=\"https://docs.aws.amazon.com/fsx/latest/LustreGuide/root-squash.html\">Lustre root squash</a>.</p> <p>You can also use the <code>NoSquashNids</code> parameter to provide an array of clients who are not affected by the root squash setting. These clients will access the file system as root, with unrestricted privileges.</p>"
      },
      "LustreRootSquash": {
        "type": "string",
        "pattern": "^([0-9]{1,10}):([0-9]{1,10})$",
        "minLength": 3,
        "maxLength": 21
      },
      "LustreNoSquashNids": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/LustreNoSquashNid"
        },
        "maxItems": 64
      },
      "LustreNoSquashNid": {
        "type": "string",
        "pattern": "^([0-9\\[\\]\\-]*\\.){3}([0-9\\[\\]\\-]*)@tcp$",
        "minLength": 11,
        "maxLength": 43
      },
      "CreateFileSystemOntapConfiguration": {
        "type": "object",
        "required": [
          "DeploymentType",
          "ThroughputCapacity"
        ],
        "properties": {
          "AutomaticBackupRetentionDays": {
            "$ref": "#/$defs/AutomaticBackupRetentionDays"
          },
          "DailyAutomaticBackupStartTime": {
            "$ref": "#/$defs/DailyTime"
          },
          "DeploymentType": {
            "allOf": [
              {
                "$ref": "#/$defs/OntapDeploymentType"
              },
              {
                "description": "<p>Specifies the FSx for ONTAP file system deployment type to use in creating the file system. </p> <ul> <li> <p> <code>MULTI_AZ_1</code> - (Default) A high availability file system configured for Multi-AZ redundancy to tolerate temporary Availability Zone (AZ) unavailability. </p> </li> <li> <p> <code>SINGLE_AZ_1</code> - A file system configured for Single-AZ redundancy.</p> </li> </ul> <p>For information about the use cases for Multi-AZ and Single-AZ deployments, refer to <a href=\"https://docs.aws.amazon.com/fsx/latest/ONTAPGuide/high-availability-AZ.html\">Choosing a file system deployment type</a>. </p>"
              }
            ]
          },
          "EndpointIpAddressRange": {
            "allOf": [
              {
                "$ref": "#/$defs/IpAddressRange"
              },
              {
                "description": "(Multi-AZ only) Specifies the IP address range in which the endpoints to access your file system will be created. By default in the Amazon FSx API, Amazon FSx selects an unused IP address range for you from the 198.19.* range. By default in the Amazon FSx console, Amazon FSx chooses the last 64 IP addresses from the VPC’s primary CIDR range to use as the endpoint IP address range for the file system. You can have overlapping endpoint IP addresses for file systems deployed in the same VPC/route tables, as long as they don't overlap with any subnet."
              }
            ]
          },
          "FsxAdminPassword": {
            "allOf": [
              {
                "$ref": "#/$defs/AdminPassword"
              },
              {
                "description": "The ONTAP administrative password for the <code>fsxadmin</code> user with which you administer your file system using the NetApp ONTAP CLI and REST API."
              }
            ]
          },
          "DiskIopsConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/DiskIopsConfiguration"
              },
              {
                "description": "The SSD IOPS configuration for the FSx for ONTAP file system."
              }
            ]
          },
          "PreferredSubnetId": {
            "allOf": [
              {
                "$ref": "#/$defs/SubnetId"
              },
              {
                "description": "Required when <code>DeploymentType</code> is set to <code>MULTI_AZ_1</code>. This specifies the subnet in which you want the preferred file server to be located."
              }
            ]
          },
          "RouteTableIds": {
            "allOf": [
              {
                "$ref": "#/$defs/RouteTableIds"
              },
              {
                "description": "(Multi-AZ only) Specifies the virtual private cloud (VPC) route tables in which your file system's endpoints will be created. You should specify all VPC route tables associated with the subnets in which your clients are located. By default, Amazon FSx selects your VPC's default route table."
              }
            ]
          },
          "ThroughputCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/MegabytesPerSecond"
              },
              {
                "description": "Sets the throughput capacity for the file system that you're creating. Valid values are 128, 256, 512, 1024, 2048, and 4096 MBps."
              }
            ]
          },
          "WeeklyMaintenanceStartTime": {
            "$ref": "#/$defs/WeeklyTime"
          }
        },
        "description": "The ONTAP configuration properties of the FSx for ONTAP file system that you are creating."
      },
      "OntapDeploymentType": {
        "type": "string",
        "enum": [
          "MULTI_AZ_1",
          "SINGLE_AZ_1"
        ]
      },
      "IpAddressRange": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{9,17}$",
        "minLength": 9,
        "maxLength": 17
      },
      "AdminPassword": {
        "type": "string",
        "pattern": "^[^\\u0000\\u0085\\u2028\\u2029\\r\\n]{8,50}$",
        "minLength": 8,
        "maxLength": 50,
        "format": "password"
      },
      "DiskIopsConfiguration": {
        "type": "object",
        "properties": {
          "Mode": {
            "allOf": [
              {
                "$ref": "#/$defs/DiskIopsConfigurationMode"
              },
              {
                "description": "Specifies whether the file system is using the <code>AUTOMATIC</code> setting of SSD IOPS of 3 IOPS per GB of storage capacity, , or if it using a <code>USER_PROVISIONED</code> value."
              }
            ]
          },
          "Iops": {
            "allOf": [
              {
                "$ref": "#/$defs/Iops"
              },
              {
                "description": "The total number of SSD IOPS provisioned for the file system."
              }
            ]
          }
        },
        "description": "The SSD IOPS (input/output operations per second) configuration for an Amazon FSx for NetApp ONTAP or FSx for OpenZFS file system. By default, Amazon FSx automatically provisions 3 IOPS per GB of storage capacity. You can provision additional IOPS per GB of storage. The configuration consists of the total number of provisioned SSD IOPS and how it is was provisioned, or the mode (by the customer or by Amazon FSx)."
      },
      "DiskIopsConfigurationMode": {
        "type": "string",
        "enum": [
          "AUTOMATIC",
          "USER_PROVISIONED"
        ]
      },
      "Iops": {
        "type": "integer",
        "minimum": 0,
        "maximum": 1000000
      },
      "RouteTableIds": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/RouteTableId"
        },
        "maxItems": 50
      },
      "RouteTableId": {
        "type": "string",
        "pattern": "^(rtb-[0-9a-f]{8,})$",
        "minLength": 12,
        "maxLength": 21
      },
      "FileSystemTypeVersion": {
        "type": "string",
        "pattern": "^[0-9](.[0-9]*)*$",
        "minLength": 1,
        "maxLength": 20
      },
      "CreateFileSystemOpenZFSConfiguration": {
        "type": "object",
        "required": [
          "DeploymentType",
          "ThroughputCapacity"
        ],
        "properties": {
          "AutomaticBackupRetentionDays": {
            "$ref": "#/$defs/AutomaticBackupRetentionDays"
          },
          "CopyTagsToBackups": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "A Boolean value indicating whether tags for the file system should be copied to backups. This value defaults to <code>false</code>. If it's set to <code>true</code>, all tags for the file system are copied to all automatic and user-initiated backups where the user doesn't specify tags. If this value is <code>true</code>, and you specify one or more tags, only the specified tags are copied to backups. If you specify one or more tags when creating a user-initiated backup, no tags are copied from the file system, regardless of this value."
              }
            ]
          },
          "CopyTagsToVolumes": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "A Boolean value indicating whether tags for the file system should be copied to volumes. This value defaults to <code>false</code>. If it's set to <code>true</code>, all tags for the file system are copied to volumes where the user doesn't specify tags. If this value is <code>true</code>, and you specify one or more tags, only the specified tags are copied to volumes. If you specify one or more tags when creating the volume, no tags are copied from the file system, regardless of this value."
              }
            ]
          },
          "DailyAutomaticBackupStartTime": {
            "$ref": "#/$defs/DailyTime"
          },
          "DeploymentType": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSDeploymentType"
              },
              {
                "description": "<p>Specifies the file system deployment type. Single AZ deployment types are configured for redundancy within a single Availability Zone in an Amazon Web Services Region . Valid values are the following:</p> <ul> <li> <p> <code>SINGLE_AZ_1</code>- (Default) Creates file systems with throughput capacities of 64 - 4,096 MBps. <code>Single_AZ_1</code> is available in all Amazon Web Services Regions where Amazon FSx for OpenZFS is available.</p> </li> <li> <p> <code>SINGLE_AZ_2</code>- Creates file systems with throughput capacities of 160 - 10,240 MB/s using an NVMe L2ARC cache. <code>Single_AZ_2</code> is available only in the US East (N. Virginia), US East (Ohio), US West (Oregon), and Europe (Ireland) Amazon Web Services Regions.</p> </li> </ul> <p>For more information, see: <a href=\"https://docs.aws.amazon.com/fsx/latest/OpenZFSGuide/availability-durability.html#available-aws-regions\">Deployment type availability</a> and <a href=\"https://docs.aws.amazon.com/fsx/latest/OpenZFSGuide/performance.html#zfs-fs-performance\">File system performance</a> in the <i>Amazon FSx for OpenZFS User Guide</i>.</p>"
              }
            ]
          },
          "ThroughputCapacity": {
            "allOf": [
              {
                "$ref": "#/$defs/MegabytesPerSecond"
              },
              {
                "description": "<p>Specifies the throughput of an Amazon FSx for OpenZFS file system, measured in megabytes per second (MBps). Valid values depend on the DeploymentType you choose, as follows:</p> <ul> <li> <p>For <code>SINGLE_AZ_1</code>, valid values are 64, 128, 256, 512, 1024, 2048, 3072, or 4096 MBps.</p> </li> <li> <p>For <code>SINGLE_AZ_2</code>, valid values are 160, 320, 640, 1280, 2560, 3840, 5120, 7680, or 10240 MBps.</p> </li> </ul> <p>You pay for additional throughput capacity that you provision.</p>"
              }
            ]
          },
          "WeeklyMaintenanceStartTime": {
            "$ref": "#/$defs/WeeklyTime"
          },
          "DiskIopsConfiguration": {
            "$ref": "#/$defs/DiskIopsConfiguration"
          },
          "RootVolumeConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSCreateRootVolumeConfiguration"
              },
              {
                "description": "The configuration Amazon FSx uses when creating the root value of the Amazon FSx for OpenZFS file system. All volumes are children of the root volume. "
              }
            ]
          }
        },
        "description": "The Amazon FSx for OpenZFS configuration properties for the file system that you are creating."
      },
      "OpenZFSDeploymentType": {
        "type": "string",
        "enum": [
          "SINGLE_AZ_1",
          "SINGLE_AZ_2"
        ]
      },
      "OpenZFSCreateRootVolumeConfiguration": {
        "type": "object",
        "properties": {
          "RecordSizeKiB": {
            "allOf": [
              {
                "$ref": "#/$defs/IntegerRecordSizeKiB"
              },
              {
                "description": "Specifies the record size of an OpenZFS root volume, in kibibytes (KiB). Valid values are 4, 8, 16, 32, 64, 128, 256, 512, or 1024 KiB. The default is 128 KiB. Most workloads should use the default record size. Database workflows can benefit from a smaller record size, while streaming workflows can benefit from a larger record size. For additional guidance on setting a custom record size, see <a href=\"https://docs.aws.amazon.com/fsx/latest/OpenZFSGuide/performance.html#performance-tips-zfs\"> Tips for maximizing performance</a> in the <i>Amazon FSx for OpenZFS User Guide</i>."
              }
            ]
          },
          "DataCompressionType": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSDataCompressionType"
              },
              {
                "description": "<p>Specifies the method used to compress the data on the volume. The compression type is <code>NONE</code> by default.</p> <ul> <li> <p> <code>NONE</code> - Doesn't compress the data on the volume. <code>NONE</code> is the default.</p> </li> <li> <p> <code>ZSTD</code> - Compresses the data in the volume using the Zstandard (ZSTD) compression algorithm. Compared to LZ4, Z-Standard provides a better compression ratio to minimize on-disk storage utilization.</p> </li> <li> <p> <code>LZ4</code> - Compresses the data in the volume using the LZ4 compression algorithm. Compared to Z-Standard, LZ4 is less compute-intensive and delivers higher write throughput speeds.</p> </li> </ul>"
              }
            ]
          },
          "NfsExports": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSNfsExports"
              },
              {
                "description": "The configuration object for mounting a file system."
              }
            ]
          },
          "UserAndGroupQuotas": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSUserAndGroupQuotas"
              },
              {
                "description": "An object specifying how much storage users or groups can use on the volume."
              }
            ]
          },
          "CopyTagsToSnapshots": {
            "allOf": [
              {
                "$ref": "#/$defs/Flag"
              },
              {
                "description": "A Boolean value indicating whether tags for the volume should be copied to snapshots of the volume. This value defaults to <code>false</code>. If it's set to <code>true</code>, all tags for the volume are copied to snapshots where the user doesn't specify tags. If this value is <code>true</code> and you specify one or more tags, only the specified tags are copied to snapshots. If you specify one or more tags when creating the snapshot, no tags are copied from the volume, regardless of this value. "
              }
            ]
          },
          "ReadOnly": {
            "allOf": [
              {
                "$ref": "#/$defs/ReadOnly"
              },
              {
                "description": "A Boolean value indicating whether the volume is read-only. Setting this value to <code>true</code> can be useful after you have completed changes to a volume and no longer want changes to occur. "
              }
            ]
          }
        },
        "description": "The configuration of an Amazon FSx for OpenZFS root volume."
      },
      "IntegerRecordSizeKiB": {
        "type": "integer",
        "minimum": 4,
        "maximum": 1024
      },
      "OpenZFSDataCompressionType": {
        "type": "string",
        "enum": [
          "NONE",
          "ZSTD",
          "LZ4"
        ]
      },
      "OpenZFSNfsExports": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/OpenZFSNfsExport"
        },
        "maxItems": 1
      },
      "OpenZFSNfsExport": {
        "type": "object",
        "required": [
          "ClientConfigurations"
        ],
        "properties": {
          "ClientConfigurations": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSClientConfigurations"
              },
              {
                "description": "A list of configuration objects that contain the client and options for mounting the OpenZFS file system. "
              }
            ]
          }
        },
        "description": "The Network File System (NFS) configurations for mounting an Amazon FSx for OpenZFS file system. "
      },
      "OpenZFSClientConfigurations": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/OpenZFSClientConfiguration"
        },
        "maxItems": 25
      },
      "OpenZFSClientConfiguration": {
        "type": "object",
        "required": [
          "Clients",
          "Options"
        ],
        "properties": {
          "Clients": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSClients"
              },
              {
                "description": "A value that specifies who can mount the file system. You can provide a wildcard character (<code>*</code>), an IP address (<code>0.0.0.0</code>), or a CIDR address (<code>192.0.2.0/24</code>). By default, Amazon FSx uses the wildcard character when specifying the client. "
              }
            ]
          },
          "Options": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSNfsExportOptions"
              },
              {
                "description": "<p>The options to use when mounting the file system. For a list of options that you can use with Network File System (NFS), see the <a href=\"https://linux.die.net/man/5/exports\">exports(5) - Linux man page</a>. When choosing your options, consider the following:</p> <ul> <li> <p> <code>crossmnt</code> is used by default. If you don't specify <code>crossmnt</code> when changing the client configuration, you won't be able to see or access snapshots in your file system's snapshot directory.</p> </li> <li> <p> <code>sync</code> is used by default. If you instead specify <code>async</code>, the system acknowledges writes before writing to disk. If the system crashes before the writes are finished, you lose the unwritten data. </p> </li> </ul>"
              }
            ]
          }
        },
        "description": "Specifies who can mount an OpenZFS file system and the options available while mounting the file system."
      },
      "OpenZFSClients": {
        "type": "string",
        "pattern": "^[ -~]{1,128}$",
        "minLength": 1,
        "maxLength": 128
      },
      "OpenZFSNfsExportOptions": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/OpenZFSNfsExportOption"
        },
        "minItems": 1,
        "maxItems": 20
      },
      "OpenZFSNfsExportOption": {
        "type": "string",
        "pattern": "^[ -~]{1,128}$",
        "minLength": 1,
        "maxLength": 128
      },
      "OpenZFSUserAndGroupQuotas": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/OpenZFSUserOrGroupQuota"
        },
        "maxItems": 500
      },
      "OpenZFSUserOrGroupQuota": {
        "type": "object",
        "required": [
          "Type",
          "Id",
          "StorageCapacityQuotaGiB"
        ],
        "properties": {
          "Type": {
            "allOf": [
              {
                "$ref": "#/$defs/OpenZFSQuotaType"
              },
              {
                "description": "A value that specifies whether the quota applies to a user or group."
              }
            ]
          },
          "Id": {
            "allOf": [
              {
                "$ref": "#/$defs/IntegerNoMax"
              },
              {
                "description": "The ID of the user or group."
              }
            ]
          },
          "StorageCapacityQuotaGiB": {
            "allOf": [
              {
                "$ref": "#/$defs/IntegerNoMax"
              },
              {
                "description": "The amount of storage that the user or group can use in gibibytes (GiB)."
              }
            ]
          }
        },
        "description": "The configuration for how much storage a user or group can use on the volume. "
      },
      "OpenZFSQuotaType": {
        "type": "string",
        "enum": [
          "USER",
          "GROUP"
        ]
      },
      "IntegerNoMax": {
        "type": "integer",
        "minimum": 0,
        "maximum": 2147483647
      },
      "ReadOnly": {
        "type": "boolean"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://fsx.us-east-1.amazonaws.com/#X-Amz-Target=AWSSimbaAPIService_v20180301.CreateFileSystem"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The response object returned after the file system is created.",
        "**Key properties:**",
        {
          "$ul": [
            "**FileSystem**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "486": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "487": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "488": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "489": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
