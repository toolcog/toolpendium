{
  "name": "CreateManagedEndpoint",
  "description": "Creates a managed endpoint. A managed endpoint is a gateway that connects Amazon EMR Studio to Amazon EMR on EKS so that Amazon EMR Studio can communicate with your virtual cluster.",
  "parameters": {
    "type": "object",
    "properties": {
      "virtualClusterId": {
        "type": "string",
        "pattern": "[0-9a-z]+",
        "minLength": 1,
        "maxLength": 64,
        "description": "The ID of the virtual cluster for which a managed endpoint is created."
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "name",
          "type",
          "releaseLabel",
          "executionRoleArn",
          "clientToken"
        ],
        "properties": {
          "name": {
            "description": "The name of the managed endpoint.",
            "type": "string",
            "pattern": "[\\.\\-_/#A-Za-z0-9]+",
            "minLength": 1,
            "maxLength": 64
          },
          "type": {
            "description": "The type of the managed endpoint.",
            "type": "string",
            "pattern": ".*\\S.*",
            "minLength": 1,
            "maxLength": 64
          },
          "releaseLabel": {
            "description": "The Amazon EMR release version.",
            "type": "string",
            "pattern": "[\\.\\-_/A-Za-z0-9]+",
            "minLength": 1,
            "maxLength": 64
          },
          "executionRoleArn": {
            "description": "The ARN of the execution role.",
            "type": "string",
            "pattern": "^arn:(aws[a-zA-Z0-9-]*):iam::(\\d{12})?:(role((\\u002F)|(\\u002F[\\u0021-\\u007F]+\\u002F))[\\w+=,.@-]+)$",
            "minLength": 20,
            "maxLength": 2048
          },
          "certificateArn": {
            "description": "The certificate ARN provided by users for the managed endpoint. This field is under deprecation and will be removed in future releases.",
            "type": "string",
            "pattern": "^arn:(aws[a-zA-Z0-9-]*):acm:.+:(\\d{12}):certificate/.+$",
            "minLength": 44,
            "maxLength": 2048
          },
          "configurationOverrides": {
            "description": "A configuration specification to be used to override existing configurations.",
            "type": "object",
            "properties": {
              "applicationConfiguration": {
                "allOf": [
                  {
                    "$ref": "#/$defs/ConfigurationList"
                  },
                  {
                    "description": "The configurations for the application running by the job run. "
                  }
                ]
              },
              "monitoringConfiguration": {
                "allOf": [
                  {
                    "$ref": "#/$defs/MonitoringConfiguration"
                  },
                  {
                    "description": "The configurations for monitoring."
                  }
                ]
              }
            }
          },
          "clientToken": {
            "description": "The client idempotency token for this create call.",
            "type": "string",
            "pattern": ".*\\S.*",
            "minLength": 1,
            "maxLength": 64
          },
          "tags": {
            "description": "The tags of the managed endpoint. ",
            "type": "object",
            "minProperties": 0,
            "maxProperties": 50,
            "additionalProperties": {
              "$ref": "#/$defs/StringEmpty256"
            }
          }
        }
      }
    },
    "required": [
      "virtualClusterId",
      "body"
    ],
    "$defs": {
      "ConfigurationList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/Configuration"
        },
        "maxItems": 100
      },
      "Configuration": {
        "type": "object",
        "required": [
          "classification"
        ],
        "properties": {
          "classification": {
            "allOf": [
              {
                "$ref": "#/$defs/String1024"
              },
              {
                "description": "The classification within a configuration."
              }
            ]
          },
          "properties": {
            "description": "A set of properties specified within a configuration classification."
          },
          "configurations": {
            "allOf": [
              {
                "$ref": "#/$defs/ConfigurationList"
              },
              {
                "description": "A list of additional configurations to apply within a configuration object."
              }
            ]
          }
        },
        "description": "A configuration specification to be used when provisioning virtual clusters, which can include configurations for applications and software bundled with Amazon EMR on EKS. A configuration consists of a classification, properties, and optional nested configurations. A classification refers to an application-specific configuration file. Properties are the settings you want to change in that file."
      },
      "String1024": {
        "type": "string",
        "pattern": ".*\\S.*",
        "minLength": 1,
        "maxLength": 1024
      },
      "MonitoringConfiguration": {
        "type": "object",
        "properties": {
          "persistentAppUI": {
            "allOf": [
              {
                "$ref": "#/$defs/PersistentAppUI"
              },
              {
                "description": "Monitoring configurations for the persistent application UI. "
              }
            ]
          },
          "cloudWatchMonitoringConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/CloudWatchMonitoringConfiguration"
              },
              {
                "description": "Monitoring configurations for CloudWatch."
              }
            ]
          },
          "s3MonitoringConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/S3MonitoringConfiguration"
              },
              {
                "description": "Amazon S3 configuration for monitoring log publishing."
              }
            ]
          },
          "containerLogRotationConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/ContainerLogRotationConfiguration"
              },
              {
                "description": "Enable or disable container log rotation."
              }
            ]
          }
        },
        "description": "Configuration setting for monitoring."
      },
      "PersistentAppUI": {
        "type": "string",
        "enum": [
          "ENABLED",
          "DISABLED"
        ]
      },
      "CloudWatchMonitoringConfiguration": {
        "type": "object",
        "required": [
          "logGroupName"
        ],
        "properties": {
          "logGroupName": {
            "allOf": [
              {
                "$ref": "#/$defs/LogGroupName"
              },
              {
                "description": "The name of the log group for log publishing."
              }
            ]
          },
          "logStreamNamePrefix": {
            "allOf": [
              {
                "$ref": "#/$defs/String256"
              },
              {
                "description": "The specified name prefix for log streams."
              }
            ]
          }
        },
        "description": "A configuration for CloudWatch monitoring. You can configure your jobs to send log information to CloudWatch Logs."
      },
      "LogGroupName": {
        "type": "string",
        "pattern": "[\\.\\-_/#A-Za-z0-9]+",
        "minLength": 1,
        "maxLength": 512
      },
      "String256": {
        "type": "string",
        "pattern": ".*\\S.*",
        "minLength": 1,
        "maxLength": 256
      },
      "S3MonitoringConfiguration": {
        "type": "object",
        "required": [
          "logUri"
        ],
        "properties": {
          "logUri": {
            "allOf": [
              {
                "$ref": "#/$defs/UriString"
              },
              {
                "description": "Amazon S3 destination URI for log publishing."
              }
            ]
          }
        },
        "description": " Amazon S3 configuration for monitoring log publishing. You can configure your jobs to send log information to Amazon S3."
      },
      "UriString": {
        "type": "string",
        "pattern": "[\\u0020-\\uD7FF\\uE000-\\uFFFD\\uD800\\uDBFF-\\uDC00\\uDFFF\\r\\n\\t]*",
        "minLength": 1,
        "maxLength": 10280
      },
      "ContainerLogRotationConfiguration": {
        "type": "object",
        "required": [
          "rotationSize",
          "maxFilesToKeep"
        ],
        "properties": {
          "rotationSize": {
            "allOf": [
              {
                "$ref": "#/$defs/RotationSize"
              },
              {
                "description": "The file size at which to rotate logs. Minimum of 2KB, Maximum of 2GB."
              }
            ]
          },
          "maxFilesToKeep": {
            "allOf": [
              {
                "$ref": "#/$defs/MaxFilesToKeep"
              },
              {
                "description": "The number of files to keep in container after rotation."
              }
            ]
          }
        },
        "description": "The settings for container log rotation."
      },
      "RotationSize": {
        "type": "string",
        "pattern": "^\\d+(\\.\\d+)?[KMG][Bb]?$",
        "minLength": 3,
        "maxLength": 12
      },
      "MaxFilesToKeep": {
        "type": "integer",
        "minimum": 1,
        "maximum": 50
      },
      "StringEmpty256": {
        "type": "string",
        "pattern": ".*\\S.*",
        "minLength": 0,
        "maxLength": 256
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://emr-containers.us-east-1.amazonaws.com/virtualclusters/{virtualClusterId}/endpoints"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**id**",
            "**name**",
            "**arn**",
            "**virtualClusterId**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
