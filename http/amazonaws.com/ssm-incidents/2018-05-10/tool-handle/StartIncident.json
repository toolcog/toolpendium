{
  "name": "StartIncident",
  "description": "Used to start an incident from CloudWatch alarms, EventBridge events, or manually. ",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "responsePlanArn"
        ],
        "properties": {
          "clientToken": {
            "description": "A token ensuring that the operation is called only once with the specified details.",
            "type": "string",
            "minLength": 0,
            "maxLength": 128
          },
          "impact": {
            "description": "<p>Defines the impact to the customers. Providing an impact overwrites the impact provided by a response plan.</p> <p class=\"title\"> <b>Possible impacts:</b> </p> <ul> <li> <p> <code>1</code> - Critical impact, this typically relates to full application failure that impacts many to all customers. </p> </li> <li> <p> <code>2</code> - High impact, partial application failure with impact to many customers.</p> </li> <li> <p> <code>3</code> - Medium impact, the application is providing reduced service to customers.</p> </li> <li> <p> <code>4</code> - Low impact, customer might aren't impacted by the problem yet.</p> </li> <li> <p> <code>5</code> - No impact, customers aren't currently impacted but urgent action is needed to avoid impact.</p> </li> </ul>",
            "type": "integer",
            "minimum": 1,
            "maximum": 5
          },
          "relatedItems": {
            "description": "Add related items to the incident for other responders to use. Related items are Amazon Web Services resources, external links, or files uploaded to an Amazon S3 bucket. ",
            "type": "array",
            "items": {
              "$ref": "#/$defs/RelatedItem"
            },
            "minItems": 0,
            "maxItems": 100
          },
          "responsePlanArn": {
            "description": "The Amazon Resource Name (ARN) of the response plan that pre-defines summary, chat channels, Amazon SNS topics, runbooks, title, and impact of the incident. ",
            "type": "string",
            "pattern": "^arn:aws(-cn|-us-gov)?:[a-z0-9-]*:[a-z0-9-]*:([0-9]{12})?:.+$",
            "minLength": 0,
            "maxLength": 1000
          },
          "title": {
            "description": "Provide a title for the incident. Providing a title overwrites the title provided by the response plan. ",
            "type": "string",
            "minLength": 0,
            "maxLength": 200
          },
          "triggerDetails": {
            "description": "Details about what caused the incident to be created in Incident Manager.",
            "type": "object",
            "properties": {
              "rawData": {
                "allOf": [
                  {
                    "$ref": "#/$defs/RawData"
                  },
                  {
                    "description": "Raw data passed from either Amazon EventBridge, Amazon CloudWatch, or Incident Manager when an incident is created."
                  }
                ]
              },
              "source": {
                "allOf": [
                  {
                    "$ref": "#/$defs/IncidentSource"
                  },
                  {
                    "description": "Identifies the service that sourced the event. All events sourced from within Amazon Web Services begin with \"<code>aws.</code>\" Customer-generated events can have any value here, as long as it doesn't begin with \"<code>aws.</code>\" We recommend the use of Java package-name style reverse domain-name strings. "
                  }
                ]
              },
              "timestamp": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Timestamp"
                  },
                  {
                    "description": "The time that the incident was detected."
                  }
                ]
              },
              "triggerArn": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Arn"
                  },
                  {
                    "description": "The Amazon Resource Name (ARN) of the source that detected the incident."
                  }
                ]
              }
            }
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "RelatedItem": {
        "type": "object",
        "required": [
          "identifier"
        ],
        "properties": {
          "generatedId": {
            "allOf": [
              {
                "$ref": "#/$defs/GeneratedId"
              },
              {
                "description": "<p>A unique ID for a <code>RelatedItem</code>.</p> <important> <p>Don't specify this parameter when you add a <code>RelatedItem</code> by using the <a>UpdateRelatedItems</a> API action.</p> </important>"
              }
            ]
          },
          "identifier": {
            "allOf": [
              {
                "$ref": "#/$defs/ItemIdentifier"
              },
              {
                "description": "Details about the related item."
              }
            ]
          },
          "title": {
            "allOf": [
              {
                "$ref": "#/$defs/RelatedItemTitleString"
              },
              {
                "description": "The title of the related item."
              }
            ]
          }
        },
        "description": "Resources that responders use to triage and mitigate the incident."
      },
      "GeneratedId": {
        "type": "string",
        "pattern": "^related-item/(ANALYSIS|INCIDENT|METRIC|PARENT|ATTACHMENT|OTHER|AUTOMATION|INVOLVED_RESOURCE|TASK)/([0-9]|[A-F]){32}$",
        "minLength": 0,
        "maxLength": 200
      },
      "ItemIdentifier": {
        "type": "object",
        "required": [
          "type",
          "value"
        ],
        "properties": {
          "type": {
            "allOf": [
              {
                "$ref": "#/$defs/ItemType"
              },
              {
                "description": "The type of related item. "
              }
            ]
          },
          "value": {
            "allOf": [
              {
                "$ref": "#/$defs/ItemValue"
              },
              {
                "description": "Details about the related item."
              }
            ]
          }
        },
        "description": "Details and type of a related item."
      },
      "ItemType": {
        "type": "string",
        "enum": [
          "ANALYSIS",
          "INCIDENT",
          "METRIC",
          "PARENT",
          "ATTACHMENT",
          "OTHER",
          "AUTOMATION",
          "INVOLVED_RESOURCE",
          "TASK"
        ]
      },
      "ItemValue": {
        "type": "object",
        "properties": {
          "arn": {
            "allOf": [
              {
                "$ref": "#/$defs/Arn"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the related item, if the related item is an Amazon resource."
              }
            ]
          },
          "metricDefinition": {
            "allOf": [
              {
                "$ref": "#/$defs/MetricDefinition"
              },
              {
                "description": "The metric definition, if the related item is a metric in Amazon CloudWatch."
              }
            ]
          },
          "pagerDutyIncidentDetail": {
            "allOf": [
              {
                "$ref": "#/$defs/PagerDutyIncidentDetail"
              },
              {
                "description": "Details about an incident that is associated with a PagerDuty incident."
              }
            ]
          },
          "url": {
            "allOf": [
              {
                "$ref": "#/$defs/Url"
              },
              {
                "description": "The URL, if the related item is a non-Amazon Web Services resource."
              }
            ]
          }
        },
        "description": "Describes a related item."
      },
      "Arn": {
        "type": "string",
        "pattern": "^arn:aws(-cn|-us-gov)?:[a-z0-9-]*:[a-z0-9-]*:([0-9]{12})?:.+$",
        "minLength": 0,
        "maxLength": 1000
      },
      "MetricDefinition": {
        "type": "string",
        "minLength": 0,
        "maxLength": 4000
      },
      "PagerDutyIncidentDetail": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "autoResolve": {
            "allOf": [
              {
                "$ref": "#/$defs/Boolean"
              },
              {
                "description": "Indicates whether to resolve the PagerDuty incident when you resolve the associated Incident Manager incident."
              }
            ]
          },
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/PagerDutyIncidentDetailIdString"
              },
              {
                "description": "The ID of the incident associated with the PagerDuty service for the response plan."
              }
            ]
          },
          "secretId": {
            "allOf": [
              {
                "$ref": "#/$defs/PagerDutyIncidentDetailSecretIdString"
              },
              {
                "description": "The ID of the Amazon Web Services Secrets Manager secret that stores your PagerDuty key, either a General Access REST API Key or User Token REST API Key, and other user credentials."
              }
            ]
          }
        },
        "description": "Details about the PagerDuty incident associated with an incident created by an Incident Manager response plan."
      },
      "Boolean": {
        "type": "boolean"
      },
      "PagerDutyIncidentDetailIdString": {
        "type": "string",
        "minLength": 1,
        "maxLength": 200
      },
      "PagerDutyIncidentDetailSecretIdString": {
        "type": "string",
        "minLength": 1,
        "maxLength": 512
      },
      "Url": {
        "type": "string",
        "minLength": 0,
        "maxLength": 1000
      },
      "RelatedItemTitleString": {
        "type": "string",
        "minLength": 0,
        "maxLength": 200
      },
      "RawData": {
        "type": "string",
        "minLength": 0,
        "maxLength": 10000
      },
      "IncidentSource": {
        "type": "string",
        "minLength": 0,
        "maxLength": 50
      },
      "Timestamp": {
        "type": "string",
        "format": "date-time"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://ssm-incidents.us-east-1.amazonaws.com/startIncident"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**incidentRecordArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
