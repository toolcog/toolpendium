{
  "name": "GeneratePinData",
  "description": "<p>Generates pin-related data such as PIN, PIN Verification Value (PVV), PIN Block, and PIN Offset during new card issuance or reissuance. For more information, see <a href=\"https://docs.aws.amazon.com/payment-cryptography/latest/userguide/generate-pin-data.html\">Generate PIN data</a> in the <i>Amazon Web Services Payment Cryptography User Guide</i>.</p> <p>PIN data is never transmitted in clear to or from Amazon Web Services Payment Cryptography. This operation generates PIN, PVV, or PIN Offset and then encrypts it using Pin Encryption Key (PEK) to create an <code>EncryptedPinBlock</code> for transmission from Amazon Web Services Payment Cryptography. This operation uses a separate Pin Verification Key (PVK) for VISA PVV generation. </p> <p>For information about valid keys for this operation, see <a href=\"https://docs.aws.amazon.com/payment-cryptography/latest/userguide/keys-validattributes.html\">Understanding key attributes</a> and <a href=\"https://docs.aws.amazon.com/payment-cryptography/latest/userguide/crypto-ops-validkeys-ops.html\">Key types for specific data operations</a> in the <i>Amazon Web Services Payment Cryptography User Guide</i>.</p> <p> <b>Cross-account use</b>: This operation can't be used across different Amazon Web Services accounts.</p> <p> <b>Related operations:</b> </p> <ul> <li> <p> <a>GenerateCardValidationData</a> </p> </li> <li> <p> <a>TranslatePinData</a> </p> </li> <li> <p> <a>VerifyPinData</a> </p> </li> </ul>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "EncryptionKeyIdentifier",
          "GenerationAttributes",
          "GenerationKeyIdentifier",
          "PinBlockFormat",
          "PrimaryAccountNumber"
        ],
        "properties": {
          "EncryptionKeyIdentifier": {
            "description": "The <code>keyARN</code> of the PEK that Amazon Web Services Payment Cryptography uses to encrypt the PIN Block.",
            "type": "string",
            "pattern": "^arn:aws:payment-cryptography:[a-z]{2}-[a-z]{1,16}-[0-9]+:[0-9]{12}:(key/[0-9a-zA-Z]{16,64}|alias/[a-zA-Z0-9/_-]+)$|^alias/[a-zA-Z0-9/_-]+$",
            "minLength": 7,
            "maxLength": 322
          },
          "GenerationAttributes": {
            "description": "Parameters that are required for PIN data generation.",
            "type": "object",
            "properties": {
              "Ibm3624NaturalPin": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Ibm3624NaturalPin"
                  },
                  {
                    "description": "Parameters that are required to generate or verify Ibm3624 natural PIN."
                  }
                ]
              },
              "Ibm3624PinFromOffset": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Ibm3624PinFromOffset"
                  },
                  {
                    "description": "Parameters that are required to generate or verify Ibm3624 PIN from offset PIN."
                  }
                ]
              },
              "Ibm3624PinOffset": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Ibm3624PinOffset"
                  },
                  {
                    "description": "Parameters that are required to generate or verify Ibm3624 PIN offset PIN."
                  }
                ]
              },
              "Ibm3624RandomPin": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Ibm3624RandomPin"
                  },
                  {
                    "description": "Parameters that are required to generate or verify Ibm3624 random PIN."
                  }
                ]
              },
              "VisaPin": {
                "allOf": [
                  {
                    "$ref": "#/$defs/VisaPin"
                  },
                  {
                    "description": "Parameters that are required to generate or verify Visa PIN."
                  }
                ]
              },
              "VisaPinVerificationValue": {
                "allOf": [
                  {
                    "$ref": "#/$defs/VisaPinVerificationValue"
                  },
                  {
                    "description": "Parameters that are required to generate or verify Visa PIN Verification Value (PVV)."
                  }
                ]
              }
            }
          },
          "GenerationKeyIdentifier": {
            "description": "The <code>keyARN</code> of the PEK that Amazon Web Services Payment Cryptography uses for pin data generation.",
            "type": "string",
            "pattern": "^arn:aws:payment-cryptography:[a-z]{2}-[a-z]{1,16}-[0-9]+:[0-9]{12}:(key/[0-9a-zA-Z]{16,64}|alias/[a-zA-Z0-9/_-]+)$|^alias/[a-zA-Z0-9/_-]+$",
            "minLength": 7,
            "maxLength": 322
          },
          "PinBlockFormat": {
            "description": "<p>The PIN encoding format for pin data generation as specified in ISO 9564. Amazon Web Services Payment Cryptography supports <code>ISO_Format_0</code> and <code>ISO_Format_3</code>.</p> <p>The <code>ISO_Format_0</code> PIN block format is equivalent to the ANSI X9.8, VISA-1, and ECI-1 PIN block formats. It is similar to a VISA-4 PIN block format. It supports a PIN from 4 to 12 digits in length.</p> <p>The <code>ISO_Format_3</code> PIN block format is the same as <code>ISO_Format_0</code> except that the fill digits are random values from 10 to 15.</p>",
            "type": "string",
            "enum": [
              "ISO_FORMAT_0",
              "ISO_FORMAT_3"
            ]
          },
          "PinDataLength": {
            "description": "The length of PIN under generation.",
            "type": "integer",
            "minimum": 4,
            "maximum": 12
          },
          "PrimaryAccountNumber": {
            "description": "The Primary Account Number (PAN), a unique identifier for a payment credit or debit card that associates the card with a specific account holder.",
            "type": "string",
            "pattern": "^[0-9]+$",
            "minLength": 12,
            "maxLength": 19,
            "format": "password"
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "Ibm3624NaturalPin": {
        "type": "object",
        "required": [
          "DecimalizationTable",
          "PinValidationData",
          "PinValidationDataPadCharacter"
        ],
        "properties": {
          "DecimalizationTable": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthEquals16"
              },
              {
                "description": "The decimalization table to use for IBM 3624 PIN algorithm. The table is used to convert the algorithm intermediate result from hexadecimal characters to decimal."
              }
            ]
          },
          "PinValidationData": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthBetween4And16"
              },
              {
                "description": "The unique data for cardholder identification."
              }
            ]
          },
          "PinValidationDataPadCharacter": {
            "allOf": [
              {
                "$ref": "#/$defs/HexLengthEquals1"
              },
              {
                "description": "The padding character for validation data."
              }
            ]
          }
        },
        "description": "Parameters that are required to generate or verify Ibm3624 natural PIN."
      },
      "NumberLengthEquals16": {
        "type": "string",
        "pattern": "^[0-9]+$",
        "minLength": 16,
        "maxLength": 16
      },
      "NumberLengthBetween4And16": {
        "type": "string",
        "pattern": "^[0-9]+$",
        "minLength": 4,
        "maxLength": 16
      },
      "HexLengthEquals1": {
        "type": "string",
        "pattern": "^[0-9A-F]+$",
        "minLength": 1,
        "maxLength": 1
      },
      "Ibm3624PinFromOffset": {
        "type": "object",
        "required": [
          "DecimalizationTable",
          "PinOffset",
          "PinValidationData",
          "PinValidationDataPadCharacter"
        ],
        "properties": {
          "DecimalizationTable": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthEquals16"
              },
              {
                "description": "The decimalization table to use for IBM 3624 PIN algorithm. The table is used to convert the algorithm intermediate result from hexadecimal characters to decimal."
              }
            ]
          },
          "PinOffset": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthBetween4And12"
              },
              {
                "description": "The PIN offset value."
              }
            ]
          },
          "PinValidationData": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthBetween4And16"
              },
              {
                "description": "The unique data for cardholder identification."
              }
            ]
          },
          "PinValidationDataPadCharacter": {
            "allOf": [
              {
                "$ref": "#/$defs/HexLengthEquals1"
              },
              {
                "description": "The padding character for validation data."
              }
            ]
          }
        },
        "description": "Parameters that are required to generate or verify Ibm3624 PIN from offset PIN."
      },
      "NumberLengthBetween4And12": {
        "type": "string",
        "pattern": "^[0-9]+$",
        "minLength": 4,
        "maxLength": 12
      },
      "Ibm3624PinOffset": {
        "type": "object",
        "required": [
          "DecimalizationTable",
          "EncryptedPinBlock",
          "PinValidationData",
          "PinValidationDataPadCharacter"
        ],
        "properties": {
          "DecimalizationTable": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthEquals16"
              },
              {
                "description": "The decimalization table to use for IBM 3624 PIN algorithm. The table is used to convert the algorithm intermediate result from hexadecimal characters to decimal."
              }
            ]
          },
          "EncryptedPinBlock": {
            "allOf": [
              {
                "$ref": "#/$defs/HexLengthBetween16And32"
              },
              {
                "description": "The encrypted PIN block data. According to ISO 9564 standard, a PIN Block is an encoded representation of a payment card Personal Account Number (PAN) and the cardholder Personal Identification Number (PIN)."
              }
            ]
          },
          "PinValidationData": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthBetween4And16"
              },
              {
                "description": "The unique data for cardholder identification."
              }
            ]
          },
          "PinValidationDataPadCharacter": {
            "allOf": [
              {
                "$ref": "#/$defs/HexLengthEquals1"
              },
              {
                "description": "The padding character for validation data."
              }
            ]
          }
        },
        "description": "Pparameters that are required to generate or verify Ibm3624 PIN offset PIN."
      },
      "HexLengthBetween16And32": {
        "type": "string",
        "pattern": "^[0-9a-fA-F]+$",
        "minLength": 16,
        "maxLength": 32
      },
      "Ibm3624RandomPin": {
        "type": "object",
        "required": [
          "DecimalizationTable",
          "PinValidationData",
          "PinValidationDataPadCharacter"
        ],
        "properties": {
          "DecimalizationTable": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthEquals16"
              },
              {
                "description": "The decimalization table to use for IBM 3624 PIN algorithm. The table is used to convert the algorithm intermediate result from hexadecimal characters to decimal."
              }
            ]
          },
          "PinValidationData": {
            "allOf": [
              {
                "$ref": "#/$defs/NumberLengthBetween4And16"
              },
              {
                "description": "The unique data for cardholder identification."
              }
            ]
          },
          "PinValidationDataPadCharacter": {
            "allOf": [
              {
                "$ref": "#/$defs/HexLengthEquals1"
              },
              {
                "description": "The padding character for validation data."
              }
            ]
          }
        },
        "description": "Parameters that are required to generate or verify Ibm3624 random PIN."
      },
      "VisaPin": {
        "type": "object",
        "required": [
          "PinVerificationKeyIndex"
        ],
        "properties": {
          "PinVerificationKeyIndex": {
            "allOf": [
              {
                "$ref": "#/$defs/IntegerRangeBetween0And9"
              },
              {
                "description": "The value for PIN verification index. It is used in the Visa PIN algorithm to calculate the PVV (PIN Verification Value)."
              }
            ]
          }
        },
        "description": "Parameters that are required to generate or verify Visa PIN."
      },
      "IntegerRangeBetween0And9": {
        "type": "integer",
        "minimum": 0,
        "maximum": 9
      },
      "VisaPinVerificationValue": {
        "type": "object",
        "required": [
          "EncryptedPinBlock",
          "PinVerificationKeyIndex"
        ],
        "properties": {
          "EncryptedPinBlock": {
            "allOf": [
              {
                "$ref": "#/$defs/HexLengthBetween16And32"
              },
              {
                "description": "The encrypted PIN block data to verify."
              }
            ]
          },
          "PinVerificationKeyIndex": {
            "allOf": [
              {
                "$ref": "#/$defs/IntegerRangeBetween0And9"
              },
              {
                "description": "The value for PIN verification index. It is used in the Visa PIN algorithm to calculate the PVV (PIN Verification Value)."
              }
            ]
          }
        },
        "description": "Parameters that are required to generate or verify Visa PVV (PIN Verification Value)."
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://dataplane.payment-cryptography.us-east-1.amazonaws.com/pindata/generate"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**EncryptedPinBlock**",
            "**EncryptionKeyArn**",
            "**EncryptionKeyCheckValue**",
            "**GenerationKeyArn**",
            "**GenerationKeyCheckValue**",
            "**PinData**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
