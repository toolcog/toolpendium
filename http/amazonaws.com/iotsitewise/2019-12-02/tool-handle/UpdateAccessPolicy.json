{
  "name": "UpdateAccessPolicy",
  "description": "Updates an existing access policy that specifies an identity's access to an IoT SiteWise Monitor portal or project resource.",
  "parameters": {
    "type": "object",
    "properties": {
      "accessPolicyId": {
        "type": "string",
        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
        "minLength": 36,
        "maxLength": 36,
        "description": "The ID of the access policy."
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "accessPolicyIdentity",
          "accessPolicyResource",
          "accessPolicyPermission"
        ],
        "properties": {
          "accessPolicyIdentity": {
            "description": "<p>Contains an identity that can access an IoT SiteWise Monitor resource.</p> <note> <p>Currently, you can't use Amazon Web Services APIs to retrieve IAM Identity Center identity IDs. You can find the IAM Identity Center identity IDs in the URL of user and group pages in the <a href=\"https://console.aws.amazon.com/singlesignon\">IAM Identity Center console</a>.</p> </note>",
            "type": "object",
            "properties": {
              "user": {
                "allOf": [
                  {
                    "$ref": "#/$defs/UserIdentity"
                  },
                  {
                    "description": "An IAM Identity Center user identity."
                  }
                ]
              },
              "group": {
                "allOf": [
                  {
                    "$ref": "#/$defs/GroupIdentity"
                  },
                  {
                    "description": "An IAM Identity Center group identity."
                  }
                ]
              },
              "iamUser": {
                "allOf": [
                  {
                    "$ref": "#/$defs/IAMUserIdentity"
                  },
                  {
                    "description": "An IAM user identity."
                  }
                ]
              },
              "iamRole": {
                "allOf": [
                  {
                    "$ref": "#/$defs/IAMRoleIdentity"
                  },
                  {
                    "description": "An IAM role identity."
                  }
                ]
              }
            }
          },
          "accessPolicyResource": {
            "description": "Contains an IoT SiteWise Monitor resource ID for a portal or project.",
            "type": "object",
            "properties": {
              "portal": {
                "allOf": [
                  {
                    "$ref": "#/$defs/PortalResource"
                  },
                  {
                    "description": "A portal resource."
                  }
                ]
              },
              "project": {
                "allOf": [
                  {
                    "$ref": "#/$defs/ProjectResource"
                  },
                  {
                    "description": "A project resource."
                  }
                ]
              }
            }
          },
          "accessPolicyPermission": {
            "description": "The permission level for this access policy. Note that a project <code>ADMINISTRATOR</code> is also known as a project owner.",
            "type": "string",
            "enum": [
              "ADMINISTRATOR",
              "VIEWER"
            ]
          },
          "clientToken": {
            "description": "A unique case-sensitive identifier that you can provide to ensure the idempotency of the request. Don't reuse this client token if a new idempotent request is required.",
            "type": "string",
            "pattern": "\\S{36,64}",
            "minLength": 36,
            "maxLength": 64
          }
        }
      }
    },
    "required": [
      "accessPolicyId",
      "body"
    ],
    "$defs": {
      "UserIdentity": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/IdentityId"
              },
              {
                "description": "The IAM Identity Center ID of the user."
              }
            ]
          }
        },
        "description": "Contains information for a user identity in an access policy."
      },
      "IdentityId": {
        "type": "string",
        "pattern": "\\S+",
        "minLength": 1,
        "maxLength": 256
      },
      "GroupIdentity": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/IdentityId"
              },
              {
                "description": "The IAM Identity Center ID of the group."
              }
            ]
          }
        },
        "description": "Contains information for a group identity in an access policy."
      },
      "IAMUserIdentity": {
        "type": "object",
        "required": [
          "arn"
        ],
        "properties": {
          "arn": {
            "allOf": [
              {
                "$ref": "#/$defs/ARN"
              },
              {
                "description": "<p>The ARN of the IAM user. For more information, see <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html\">IAM ARNs</a> in the <i>IAM User Guide</i>.</p> <note> <p>If you delete the IAM user, access policies that contain this identity include an empty <code>arn</code>. You can delete the access policy for the IAM user that no longer exists.</p> </note>"
              }
            ]
          }
        },
        "description": "Contains information about an Identity and Access Management user."
      },
      "ARN": {
        "type": "string",
        "pattern": ".*",
        "minLength": 1,
        "maxLength": 1600
      },
      "IAMRoleIdentity": {
        "type": "object",
        "required": [
          "arn"
        ],
        "properties": {
          "arn": {
            "allOf": [
              {
                "$ref": "#/$defs/ARN"
              },
              {
                "description": "The ARN of the IAM role. For more information, see <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html\">IAM ARNs</a> in the <i>IAM User Guide</i>."
              }
            ]
          }
        },
        "description": "Contains information about an Identity and Access Management role. For more information, see <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html\">IAM roles</a> in the <i>IAM User Guide</i>."
      },
      "PortalResource": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/ID"
              },
              {
                "description": "The ID of the portal."
              }
            ]
          }
        },
        "description": "Identifies an IoT SiteWise Monitor portal."
      },
      "ID": {
        "type": "string",
        "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
        "minLength": 36,
        "maxLength": 36
      },
      "ProjectResource": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/ID"
              },
              {
                "description": "The ID of the project."
              }
            ]
          }
        },
        "description": "Identifies a specific IoT SiteWise Monitor project."
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "http://iotsitewise.us-east-1.amazonaws.com/access-policies/{accessPolicyId}"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
