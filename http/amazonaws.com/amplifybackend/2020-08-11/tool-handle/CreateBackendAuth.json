{
  "name": "CreateBackendAuth",
  "description": "Creates a new backend authentication resource.",
  "parameters": {
    "type": "object",
    "properties": {
      "appId": {
        "type": "string",
        "description": "The app ID."
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "backendEnvironmentName",
          "resourceConfig",
          "resourceName"
        ],
        "properties": {
          "backendEnvironmentName": {
            "description": "The name of the backend environment.",
            "type": "string"
          },
          "resourceConfig": {
            "description": "Defines the resource configuration when creating an auth resource in your Amplify project.",
            "type": "object",
            "properties": {
              "AuthResources": {
                "allOf": [
                  {
                    "$ref": "#/$defs/AuthResources"
                  },
                  {
                    "xml": {
                      "name": "authResources"
                    },
                    "description": "Defines whether you want to configure only authentication or both authentication and authorization settings."
                  }
                ]
              },
              "IdentityPoolConfigs": {
                "allOf": [
                  {
                    "$ref": "#/$defs/CreateBackendAuthIdentityPoolConfig"
                  },
                  {
                    "xml": {
                      "name": "identityPoolConfigs"
                    },
                    "description": "Describes the authorization configuration for the Amazon Cognito identity pool, provisioned as a part of your auth resource in the Amplify project."
                  }
                ]
              },
              "Service": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Service"
                  },
                  {
                    "xml": {
                      "name": "service"
                    },
                    "description": "Defines the service name to use when configuring an authentication resource in your Amplify project."
                  }
                ]
              },
              "UserPoolConfigs": {
                "allOf": [
                  {
                    "$ref": "#/$defs/CreateBackendAuthUserPoolConfig"
                  },
                  {
                    "xml": {
                      "name": "userPoolConfigs"
                    },
                    "description": "Describes authentication configuration for the Amazon Cognito user pool, provisioned as a part of your auth resource in the Amplify project."
                  }
                ]
              }
            }
          },
          "resourceName": {
            "description": "The name of this resource.",
            "type": "string"
          }
        }
      }
    },
    "required": [
      "appId",
      "body"
    ],
    "$defs": {
      "AuthResources": {
        "type": "string",
        "enum": [
          "USER_POOL_ONLY",
          "IDENTITY_POOL_AND_USER_POOL"
        ]
      },
      "CreateBackendAuthIdentityPoolConfig": {
        "type": "object",
        "required": [
          "UnauthenticatedLogin",
          "IdentityPoolName"
        ],
        "properties": {
          "IdentityPoolName": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "identityPoolName"
                },
                "description": "Name of the Amazon Cognito identity pool used for authorization."
              }
            ]
          },
          "UnauthenticatedLogin": {
            "allOf": [
              {
                "$ref": "#/$defs/__boolean"
              },
              {
                "xml": {
                  "name": "unauthenticatedLogin"
                },
                "description": "Set to true or false based on whether you want to enable guest authorization to your Amplify app."
              }
            ]
          }
        },
        "description": "Describes authorization configurations for the auth resources, configured as a part of your Amplify project."
      },
      "__string": {
        "type": "string"
      },
      "__boolean": {
        "type": "boolean"
      },
      "Service": {
        "type": "string",
        "enum": [
          "COGNITO"
        ]
      },
      "CreateBackendAuthUserPoolConfig": {
        "type": "object",
        "required": [
          "RequiredSignUpAttributes",
          "SignInMethod",
          "UserPoolName"
        ],
        "properties": {
          "ForgotPassword": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateBackendAuthForgotPasswordConfig"
              },
              {
                "xml": {
                  "name": "forgotPassword"
                },
                "description": "<b>(DEPRECATED)</b> Describes the forgotten password policy for your Amazon Cognito user pool, configured as a part of your Amplify project."
              }
            ]
          },
          "Mfa": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateBackendAuthMFAConfig"
              },
              {
                "xml": {
                  "name": "mfa"
                },
                "description": "Describes whether to apply multi-factor authentication policies for your Amazon Cognito user pool configured as a part of your Amplify project."
              }
            ]
          },
          "OAuth": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateBackendAuthOAuthConfig"
              },
              {
                "xml": {
                  "name": "oAuth"
                },
                "description": "Describes the OAuth policy and rules for your Amazon Cognito user pool, configured as a part of your Amplify project."
              }
            ]
          },
          "PasswordPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateBackendAuthPasswordPolicyConfig"
              },
              {
                "xml": {
                  "name": "passwordPolicy"
                },
                "description": "Describes the password policy for your Amazon Cognito user pool, configured as a part of your Amplify project."
              }
            ]
          },
          "RequiredSignUpAttributes": {
            "allOf": [
              {
                "$ref": "#/$defs/ListOfRequiredSignUpAttributesElement"
              },
              {
                "xml": {
                  "name": "requiredSignUpAttributes"
                },
                "description": "The required attributes to sign up new users in the user pool."
              }
            ]
          },
          "SignInMethod": {
            "allOf": [
              {
                "$ref": "#/$defs/SignInMethod"
              },
              {
                "xml": {
                  "name": "signInMethod"
                },
                "description": "Describes the sign-in methods that your Amplify app users use to log in using the Amazon Cognito user pool, configured as a part of your Amplify project."
              }
            ]
          },
          "UserPoolName": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "userPoolName"
                },
                "description": "The Amazon Cognito user pool name."
              }
            ]
          },
          "VerificationMessage": {
            "allOf": [
              {
                "$ref": "#/$defs/CreateBackendAuthVerificationMessageConfig"
              },
              {
                "xml": {
                  "name": "verificationMessage"
                },
                "description": "Describes the email or SMS verification message for your Amazon Cognito user pool, configured as a part of your Amplify project."
              }
            ]
          }
        },
        "description": "Describes the Amazon Cognito user pool configuration for the auth resource to be configured for your Amplify project."
      },
      "CreateBackendAuthForgotPasswordConfig": {
        "type": "object",
        "required": [
          "DeliveryMethod"
        ],
        "properties": {
          "DeliveryMethod": {
            "allOf": [
              {
                "$ref": "#/$defs/DeliveryMethod"
              },
              {
                "xml": {
                  "name": "deliveryMethod"
                },
                "description": "<b>(DEPRECATED)</b> Describes which mode to use (either SMS or email) to deliver messages to app users who want to recover their password."
              }
            ]
          },
          "EmailSettings": {
            "allOf": [
              {
                "$ref": "#/$defs/EmailSettings"
              },
              {
                "xml": {
                  "name": "emailSettings"
                },
                "description": "<b>(DEPRECATED)</b> The configuration for the email sent when an app user forgets their password."
              }
            ]
          },
          "SmsSettings": {
            "allOf": [
              {
                "$ref": "#/$defs/SmsSettings"
              },
              {
                "xml": {
                  "name": "smsSettings"
                },
                "description": "<b>(DEPRECATED)</b> The configuration for the SMS message sent when an app user forgets their password."
              }
            ]
          }
        },
        "description": "<b>(DEPRECATED)</b> Describes the forgot password policy for authenticating into the Amplify app."
      },
      "DeliveryMethod": {
        "type": "string",
        "enum": [
          "EMAIL",
          "SMS"
        ],
        "description": "The type of verification message to send."
      },
      "EmailSettings": {
        "type": "object",
        "properties": {
          "EmailMessage": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "emailMessage"
                },
                "description": "The contents of the email message."
              }
            ]
          },
          "EmailSubject": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "emailSubject"
                },
                "description": "The contents of the subject line of the email message."
              }
            ]
          }
        },
        "description": "The configuration for the email sent when an app user forgets their password."
      },
      "SmsSettings": {
        "type": "object",
        "properties": {
          "SmsMessage": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "smsMessage"
                },
                "description": "The contents of the SMS message."
              }
            ]
          }
        },
        "description": "SMS settings for authentication."
      },
      "CreateBackendAuthMFAConfig": {
        "type": "object",
        "required": [
          "MFAMode"
        ],
        "properties": {
          "MFAMode": {
            "allOf": [
              {
                "$ref": "#/$defs/MFAMode"
              },
              {
                "description": "Describes whether MFA should be [ON, OFF, or OPTIONAL] for authentication in your Amplify project."
              }
            ]
          },
          "Settings": {
            "allOf": [
              {
                "$ref": "#/$defs/Settings"
              },
              {
                "xml": {
                  "name": "settings"
                },
                "description": "Describes the configuration settings and methods for your Amplify app users to use MFA."
              }
            ]
          }
        },
        "description": "Describes whether to apply multi-factor authentication policies for your Amazon Cognito user pool configured as a part of your Amplify project."
      },
      "MFAMode": {
        "type": "string",
        "enum": [
          "ON",
          "OFF",
          "OPTIONAL"
        ]
      },
      "Settings": {
        "type": "object",
        "properties": {
          "MfaTypes": {
            "allOf": [
              {
                "$ref": "#/$defs/ListOfMfaTypesElement"
              },
              {
                "xml": {
                  "name": "mfaTypes"
                },
                "description": "The supported MFA types."
              }
            ]
          },
          "SmsMessage": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "smsMessage"
                },
                "description": "The body of the SMS message."
              }
            ]
          }
        },
        "description": "The settings of your MFA configuration for the backend of your Amplify project."
      },
      "ListOfMfaTypesElement": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/MfaTypesElement"
        }
      },
      "MfaTypesElement": {
        "type": "string",
        "enum": [
          "SMS",
          "TOTP"
        ]
      },
      "CreateBackendAuthOAuthConfig": {
        "type": "object",
        "required": [
          "RedirectSignOutURIs",
          "RedirectSignInURIs",
          "OAuthGrantType",
          "OAuthScopes"
        ],
        "properties": {
          "DomainPrefix": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "domainPrefix"
                },
                "description": "The domain prefix for your Amplify app."
              }
            ]
          },
          "OAuthGrantType": {
            "allOf": [
              {
                "$ref": "#/$defs/OAuthGrantType"
              },
              {
                "xml": {
                  "name": "oAuthGrantType"
                },
                "description": "The OAuth grant type that you use to allow app users to authenticate from your Amplify app."
              }
            ]
          },
          "OAuthScopes": {
            "allOf": [
              {
                "$ref": "#/$defs/ListOfOAuthScopesElement"
              },
              {
                "xml": {
                  "name": "oAuthScopes"
                },
                "description": "List of OAuth-related flows used to allow your app users to authenticate from your Amplify app."
              }
            ]
          },
          "RedirectSignInURIs": {
            "allOf": [
              {
                "$ref": "#/$defs/ListOf__string"
              },
              {
                "xml": {
                  "name": "redirectSignInURIs"
                },
                "description": "The redirected URI for signing in to your Amplify app."
              }
            ]
          },
          "RedirectSignOutURIs": {
            "allOf": [
              {
                "$ref": "#/$defs/ListOf__string"
              },
              {
                "xml": {
                  "name": "redirectSignOutURIs"
                },
                "description": "Redirect URLs that OAuth uses when a user signs out of an Amplify app."
              }
            ]
          },
          "SocialProviderSettings": {
            "allOf": [
              {
                "$ref": "#/$defs/SocialProviderSettings"
              },
              {
                "xml": {
                  "name": "socialProviderSettings"
                },
                "description": "The settings for using social providers to access your Amplify app."
              }
            ]
          }
        },
        "description": "Creates the OAuth configuration for your Amplify project."
      },
      "OAuthGrantType": {
        "type": "string",
        "enum": [
          "CODE",
          "IMPLICIT"
        ]
      },
      "ListOfOAuthScopesElement": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/OAuthScopesElement"
        }
      },
      "OAuthScopesElement": {
        "type": "string",
        "enum": [
          "PHONE",
          "EMAIL",
          "OPENID",
          "PROFILE",
          "AWS_COGNITO_SIGNIN_USER_ADMIN"
        ]
      },
      "ListOf__string": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/__string"
        }
      },
      "SocialProviderSettings": {
        "type": "object",
        "properties": {
          "Facebook": {
            "$ref": "#/$defs/BackendAuthSocialProviderConfig"
          },
          "Google": {
            "$ref": "#/$defs/BackendAuthSocialProviderConfig"
          },
          "LoginWithAmazon": {
            "$ref": "#/$defs/BackendAuthSocialProviderConfig"
          },
          "SignInWithApple": {
            "$ref": "#/$defs/BackendAuthAppleProviderConfig"
          }
        },
        "description": "The settings for using the social identity providers for access to your Amplify app."
      },
      "BackendAuthSocialProviderConfig": {
        "type": "object",
        "properties": {
          "ClientId": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "client_id"
                },
                "description": "Describes the client_id, which can be obtained from the third-party social federation provider."
              }
            ]
          },
          "ClientSecret": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "client_secret"
                },
                "description": "Describes the client_secret, which can be obtained from third-party social federation providers."
              }
            ]
          }
        },
        "description": "Describes third-party social federation configurations for allowing your app users to sign in using OAuth."
      },
      "BackendAuthAppleProviderConfig": {
        "type": "object",
        "properties": {
          "ClientId": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "client_id"
                },
                "description": "Describes the client_id (also called Services ID) that comes from Apple."
              }
            ]
          },
          "KeyId": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "key_id"
                },
                "description": "Describes the key_id that comes from Apple."
              }
            ]
          },
          "PrivateKey": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "private_key"
                },
                "description": "Describes the private_key that comes from Apple."
              }
            ]
          },
          "TeamId": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "team_id"
                },
                "description": "Describes the team_id that comes from Apple."
              }
            ]
          }
        },
        "description": "Describes Apple social federation configurations for allowing your app users to sign in using OAuth."
      },
      "CreateBackendAuthPasswordPolicyConfig": {
        "type": "object",
        "required": [
          "MinimumLength"
        ],
        "properties": {
          "AdditionalConstraints": {
            "allOf": [
              {
                "$ref": "#/$defs/ListOfAdditionalConstraintsElement"
              },
              {
                "xml": {
                  "name": "additionalConstraints"
                },
                "description": "Additional constraints for the password used to access the backend of your Amplify project."
              }
            ]
          },
          "MinimumLength": {
            "allOf": [
              {
                "$ref": "#/$defs/__double"
              },
              {
                "xml": {
                  "name": "minimumLength"
                },
                "description": "The minimum length of the password used to access the backend of your Amplify project."
              }
            ]
          }
        },
        "description": "The password policy configuration for the backend to your Amplify project."
      },
      "ListOfAdditionalConstraintsElement": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/AdditionalConstraintsElement"
        }
      },
      "AdditionalConstraintsElement": {
        "type": "string",
        "enum": [
          "REQUIRE_DIGIT",
          "REQUIRE_LOWERCASE",
          "REQUIRE_SYMBOL",
          "REQUIRE_UPPERCASE"
        ]
      },
      "__double": {
        "type": "number",
        "format": "double"
      },
      "ListOfRequiredSignUpAttributesElement": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/RequiredSignUpAttributesElement"
        }
      },
      "RequiredSignUpAttributesElement": {
        "type": "string",
        "enum": [
          "ADDRESS",
          "BIRTHDATE",
          "EMAIL",
          "FAMILY_NAME",
          "GENDER",
          "GIVEN_NAME",
          "LOCALE",
          "MIDDLE_NAME",
          "NAME",
          "NICKNAME",
          "PHONE_NUMBER",
          "PICTURE",
          "PREFERRED_USERNAME",
          "PROFILE",
          "UPDATED_AT",
          "WEBSITE",
          "ZONE_INFO"
        ]
      },
      "SignInMethod": {
        "type": "string",
        "enum": [
          "EMAIL",
          "EMAIL_AND_PHONE_NUMBER",
          "PHONE_NUMBER",
          "USERNAME"
        ]
      },
      "CreateBackendAuthVerificationMessageConfig": {
        "type": "object",
        "required": [
          "DeliveryMethod"
        ],
        "properties": {
          "DeliveryMethod": {
            "allOf": [
              {
                "$ref": "#/$defs/DeliveryMethod"
              },
              {
                "xml": {
                  "name": "deliveryMethod"
                },
                "description": "The type of verification message to send."
              }
            ]
          },
          "EmailSettings": {
            "allOf": [
              {
                "$ref": "#/$defs/EmailSettings"
              },
              {
                "xml": {
                  "name": "emailSettings"
                },
                "description": "The settings for the email message."
              }
            ]
          },
          "SmsSettings": {
            "allOf": [
              {
                "$ref": "#/$defs/SmsSettings"
              },
              {
                "xml": {
                  "name": "smsSettings"
                },
                "description": "The settings for the SMS message."
              }
            ]
          }
        },
        "description": "Creates an email or SMS verification message for the auth resource configured for your Amplify project."
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://amplifybackend.us-east-1.amazonaws.com/backend/{appId}/auth"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**AppId**",
            "**BackendEnvironmentName**",
            "**Error**",
            "**JobId**",
            "**Operation**",
            "**Status**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
