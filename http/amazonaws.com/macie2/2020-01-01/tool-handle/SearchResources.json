{
  "name": "SearchResources",
  "description": "Retrieves (queries) statistical data and other information about Amazon Web Services resources that Amazon Macie monitors and analyzes.",
  "parameters": {
    "type": "object",
    "properties": {
      "maxResults": {
        "type": "string",
        "description": "Pagination limit"
      },
      "nextToken": {
        "type": "string",
        "description": "Pagination token"
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "properties": {
          "bucketCriteria": {
            "description": "Specifies property- and tag-based conditions that define filter criteria for including or excluding S3 buckets from the query results. Exclude conditions take precedence over include conditions.",
            "type": "object",
            "properties": {
              "excludes": {
                "allOf": [
                  {
                    "$ref": "#/$defs/SearchResourcesCriteriaBlock"
                  },
                  {
                    "description": "The property- and tag-based conditions that determine which buckets to exclude from the results."
                  }
                ]
              },
              "includes": {
                "allOf": [
                  {
                    "$ref": "#/$defs/SearchResourcesCriteriaBlock"
                  },
                  {
                    "description": "The property- and tag-based conditions that determine which buckets to include in the results."
                  }
                ]
              }
            }
          },
          "maxResults": {
            "description": "The maximum number of items to include in each page of the response. The default value is 50.",
            "type": "integer"
          },
          "nextToken": {
            "description": "The nextToken string that specifies which page of results to return in a paginated response.",
            "type": "string"
          },
          "sortCriteria": {
            "description": "Specifies criteria for sorting the results of a query for information about Amazon Web Services resources that Amazon Macie monitors and analyzes.",
            "type": "object",
            "properties": {
              "attributeName": {
                "allOf": [
                  {
                    "$ref": "#/$defs/SearchResourcesSortAttributeName"
                  },
                  {
                    "description": "The property to sort the results by."
                  }
                ]
              },
              "orderBy": {
                "allOf": [
                  {
                    "$ref": "#/$defs/OrderBy"
                  },
                  {
                    "description": "The sort order to apply to the results, based on the value for the property specified by the attributeName property. Valid values are: ASC, sort the results in ascending order; and, DESC, sort the results in descending order."
                  }
                ]
              }
            }
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "SearchResourcesCriteriaBlock": {
        "type": "object",
        "properties": {
          "and": {
            "allOf": [
              {
                "$ref": "#/$defs/__listOfSearchResourcesCriteria"
              },
              {
                "description": "An array of objects, one for each property- or tag-based condition that includes or excludes resources from the query results. If you specify more than one condition, Amazon Macie uses AND logic to join the conditions."
              }
            ]
          }
        },
        "description": "Specifies property- and tag-based conditions that define filter criteria for including or excluding Amazon Web Services resources from the query results."
      },
      "__listOfSearchResourcesCriteria": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/SearchResourcesCriteria"
        }
      },
      "SearchResourcesCriteria": {
        "type": "object",
        "properties": {
          "simpleCriterion": {
            "allOf": [
              {
                "$ref": "#/$defs/SearchResourcesSimpleCriterion"
              },
              {
                "description": "A property-based condition that defines a property, operator, and one or more values for including or excluding resources from the results."
              }
            ]
          },
          "tagCriterion": {
            "allOf": [
              {
                "$ref": "#/$defs/SearchResourcesTagCriterion"
              },
              {
                "description": "A tag-based condition that defines an operator and tag keys, tag values, or tag key and value pairs for including or excluding resources from the results."
              }
            ]
          }
        },
        "description": "Specifies a property- or tag-based filter condition for including or excluding Amazon Web Services resources from the query results."
      },
      "SearchResourcesSimpleCriterion": {
        "type": "object",
        "properties": {
          "comparator": {
            "allOf": [
              {
                "$ref": "#/$defs/SearchResourcesComparator"
              },
              {
                "description": "The operator to use in the condition. Valid values are EQ (equals) and NE (not equals)."
              }
            ]
          },
          "key": {
            "allOf": [
              {
                "$ref": "#/$defs/SearchResourcesSimpleCriterionKey"
              },
              {
                "description": "The property to use in the condition."
              }
            ]
          },
          "values": {
            "allOf": [
              {
                "$ref": "#/$defs/__listOf__string"
              },
              {
                "description": "<p>An array that lists one or more values to use in the condition. If you specify multiple values, Amazon Macie uses OR logic to join the values. Valid values for each supported property (key) are:</p> <ul><li><p>ACCOUNT_ID - A string that represents the unique identifier for the Amazon Web Services account that owns the resource.</p></li> <li><p>S3_BUCKET_EFFECTIVE_PERMISSION - A string that represents an enumerated value that Macie defines for the <a href=\"https://docs.aws.amazon.com/macie/latest/APIReference/datasources-s3.html#datasources-s3-prop-bucketpublicaccess-effectivepermission\">BucketPublicAccess.effectivePermission</a> property of an S3 bucket.</p></li> <li><p>S3_BUCKET_NAME - A string that represents the name of an S3 bucket.</p></li> <li><p>S3_BUCKET_SHARED_ACCESS - A string that represents an enumerated value that Macie defines for the <a href=\"https://docs.aws.amazon.com/macie/latest/APIReference/datasources-s3.html#datasources-s3-prop-bucketmetadata-sharedaccess\">BucketMetadata.sharedAccess</a> property of an S3 bucket.</p></li></ul> <p>Values are case sensitive. Also, Macie doesn't support use of partial values or wildcard characters in values.</p>"
              }
            ]
          }
        },
        "description": "Specifies a property-based filter condition that determines which Amazon Web Services resources are included or excluded from the query results."
      },
      "SearchResourcesComparator": {
        "type": "string",
        "enum": [
          "EQ",
          "NE"
        ],
        "description": "The operator to use in a condition that filters the results of a query. Valid values are:"
      },
      "SearchResourcesSimpleCriterionKey": {
        "type": "string",
        "enum": [
          "ACCOUNT_ID",
          "S3_BUCKET_NAME",
          "S3_BUCKET_EFFECTIVE_PERMISSION",
          "S3_BUCKET_SHARED_ACCESS"
        ],
        "description": "The property to use in a condition that filters the query results. Valid values are:"
      },
      "__listOf__string": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/__string"
        }
      },
      "__string": {
        "type": "string"
      },
      "SearchResourcesTagCriterion": {
        "type": "object",
        "properties": {
          "comparator": {
            "allOf": [
              {
                "$ref": "#/$defs/SearchResourcesComparator"
              },
              {
                "description": "The operator to use in the condition. Valid values are EQ (equals) and NE (not equals)."
              }
            ]
          },
          "tagValues": {
            "allOf": [
              {
                "$ref": "#/$defs/__listOfSearchResourcesTagCriterionPair"
              },
              {
                "description": "The tag keys, tag values, or tag key and value pairs to use in the condition."
              }
            ]
          }
        },
        "description": "Specifies a tag-based filter condition that determines which Amazon Web Services resources are included or excluded from the query results."
      },
      "__listOfSearchResourcesTagCriterionPair": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/SearchResourcesTagCriterionPair"
        }
      },
      "SearchResourcesTagCriterionPair": {
        "type": "object",
        "properties": {
          "key": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "description": "The value for the tag key to use in the condition."
              }
            ]
          },
          "value": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "description": "The tag value to use in the condition."
              }
            ]
          }
        },
        "description": "Specifies a tag key, a tag value, or a tag key and value (as a pair) to use in a tag-based filter condition for a query. Tag keys and values are case sensitive. Also, Amazon Macie doesn't support use of partial values or wildcard characters in tag-based filter conditions."
      },
      "SearchResourcesSortAttributeName": {
        "type": "string",
        "enum": [
          "ACCOUNT_ID",
          "RESOURCE_NAME",
          "S3_CLASSIFIABLE_OBJECT_COUNT",
          "S3_CLASSIFIABLE_SIZE_IN_BYTES"
        ],
        "description": "The property to sort the query results by. Valid values are:"
      },
      "OrderBy": {
        "type": "string",
        "enum": [
          "ASC",
          "DESC"
        ]
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://macie2.us-east-1.amazonaws.com/datasources/search-resources{?maxResults,nextToken}"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**matchingResources**",
            "**nextToken**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "486": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
