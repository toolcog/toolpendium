{
  "name": "CreateAppImageConfig",
  "description": "Creates a configuration for running a SageMaker image as a KernelGateway app. The configuration specifies the Amazon Elastic File System (EFS) storage volume on the image, and a list of the kernels in the image.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "SageMaker.CreateAppImageConfig"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/CreateAppImageConfigRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "CreateAppImageConfigRequest": {
        "type": "object",
        "required": [
          "AppImageConfigName"
        ],
        "title": "CreateAppImageConfigRequest",
        "properties": {
          "AppImageConfigName": {
            "allOf": [
              {
                "$ref": "#/$defs/AppImageConfigName"
              },
              {
                "description": "The name of the AppImageConfig. Must be unique to your account."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/TagList"
              },
              {
                "description": "A list of tags to apply to the AppImageConfig."
              }
            ]
          },
          "KernelGatewayImageConfig": {
            "allOf": [
              {
                "$ref": "#/$defs/KernelGatewayImageConfig"
              },
              {
                "description": "The KernelGatewayImageConfig. You can only specify one image kernel in the AppImageConfig API. This kernel will be shown to users before the image starts. Once the image runs, all kernels are visible in JupyterLab."
              }
            ]
          }
        }
      },
      "AppImageConfigName": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9](-*[a-zA-Z0-9]){0,62}",
        "maxLength": 63
      },
      "TagList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/Tag"
        },
        "minItems": 0,
        "maxItems": 50
      },
      "Tag": {
        "type": "object",
        "required": [
          "Key",
          "Value"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "The tag key. Tag keys must be unique per resource."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The tag value."
              }
            ]
          }
        },
        "description": "<p>A tag object that consists of a key and an optional value, used to manage metadata for SageMaker Amazon Web Services resources.</p> <p>You can add tags to notebook instances, training jobs, hyperparameter tuning jobs, batch transform jobs, models, labeling jobs, work teams, endpoint configurations, and endpoints. For more information on adding tags to SageMaker resources, see <a href=\"https://docs.aws.amazon.com/sagemaker/latest/APIReference/API_AddTags.html\">AddTags</a>.</p> <p>For more information on adding metadata to your Amazon Web Services resources with tagging, see <a href=\"https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html\">Tagging Amazon Web Services resources</a>. For advice on best practices for managing Amazon Web Services resources with tagging, see <a href=\"https://d1.awsstatic.com/whitepapers/aws-tagging-best-practices.pdf\">Tagging Best Practices: Implement an Effective Amazon Web Services Resource Tagging Strategy</a>.</p>"
      },
      "TagKey": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "minLength": 1,
        "maxLength": 128
      },
      "TagValue": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "minLength": 0,
        "maxLength": 256
      },
      "KernelGatewayImageConfig": {
        "type": "object",
        "required": [
          "KernelSpecs"
        ],
        "properties": {
          "KernelSpecs": {
            "allOf": [
              {
                "$ref": "#/$defs/KernelSpecs"
              },
              {
                "description": "The specification of the Jupyter kernels in the image."
              }
            ]
          },
          "FileSystemConfig": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemConfig"
              },
              {
                "description": "The Amazon Elastic File System (EFS) storage configuration for a SageMaker image."
              }
            ]
          }
        },
        "description": "The configuration for the file system and kernels in a SageMaker image running as a KernelGateway app."
      },
      "KernelSpecs": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/KernelSpec"
        },
        "minItems": 1,
        "maxItems": 1
      },
      "KernelSpec": {
        "type": "object",
        "required": [
          "Name"
        ],
        "properties": {
          "Name": {
            "allOf": [
              {
                "$ref": "#/$defs/KernelName"
              },
              {
                "description": "The name of the Jupyter kernel in the image. This value is case sensitive."
              }
            ]
          },
          "DisplayName": {
            "allOf": [
              {
                "$ref": "#/$defs/KernelDisplayName"
              },
              {
                "description": "The display name of the kernel."
              }
            ]
          }
        },
        "description": "The specification of a Jupyter kernel."
      },
      "KernelName": {
        "type": "string",
        "maxLength": 1024
      },
      "KernelDisplayName": {
        "type": "string",
        "maxLength": 1024
      },
      "FileSystemConfig": {
        "type": "object",
        "properties": {
          "MountPath": {
            "allOf": [
              {
                "$ref": "#/$defs/MountPath"
              },
              {
                "description": "The path within the image to mount the user's EFS home directory. The directory should be empty. If not specified, defaults to <i>/home/sagemaker-user</i>."
              }
            ]
          },
          "DefaultUid": {
            "allOf": [
              {
                "$ref": "#/$defs/DefaultUid"
              },
              {
                "description": "The default POSIX user ID (UID). If not specified, defaults to <code>1000</code>."
              }
            ]
          },
          "DefaultGid": {
            "allOf": [
              {
                "$ref": "#/$defs/DefaultGid"
              },
              {
                "description": "The default POSIX group ID (GID). If not specified, defaults to <code>100</code>."
              }
            ]
          }
        },
        "description": "The Amazon Elastic File System (EFS) storage configuration for a SageMaker image."
      },
      "MountPath": {
        "type": "string",
        "pattern": "^\\/.*",
        "maxLength": 1024
      },
      "DefaultUid": {
        "type": "integer",
        "minimum": 0,
        "maximum": 65535
      },
      "DefaultGid": {
        "type": "integer",
        "minimum": 0,
        "maximum": 65535
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://api.sagemaker.us-east-1.amazonaws.com/#X-Amz-Target=SageMaker.CreateAppImageConfig"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**AppImageConfigArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
