{
  "name": "AssociateFileSystem",
  "description": "Associate an Amazon FSx file system with the FSx File Gateway. After the association process is complete, the file shares on the Amazon FSx file system are available for access through the gateway. This operation only supports the FSx File Gateway type.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "StorageGateway_20130630.AssociateFileSystem"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/AssociateFileSystemInput"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "AssociateFileSystemInput": {
        "type": "object",
        "required": [
          "UserName",
          "Password",
          "ClientToken",
          "GatewayARN",
          "LocationARN"
        ],
        "title": "AssociateFileSystemInput",
        "properties": {
          "UserName": {
            "allOf": [
              {
                "$ref": "#/$defs/DomainUserName"
              },
              {
                "description": "The user name of the user credential that has permission to access the root share D$ of the Amazon FSx file system. The user account must belong to the Amazon FSx delegated admin user group."
              }
            ]
          },
          "Password": {
            "allOf": [
              {
                "$ref": "#/$defs/DomainUserPassword"
              },
              {
                "description": "The password of the user credential."
              }
            ]
          },
          "ClientToken": {
            "allOf": [
              {
                "$ref": "#/$defs/ClientToken"
              },
              {
                "description": "A unique string value that you supply that is used by the FSx File Gateway to ensure idempotent file system association creation."
              }
            ]
          },
          "GatewayARN": {
            "$ref": "#/$defs/GatewayARN"
          },
          "LocationARN": {
            "allOf": [
              {
                "$ref": "#/$defs/FileSystemLocationARN"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the Amazon FSx file system to associate with the FSx File Gateway."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/Tags"
              },
              {
                "description": "A list of up to 50 tags that can be assigned to the file system association. Each tag is a key-value pair."
              }
            ]
          },
          "AuditDestinationARN": {
            "allOf": [
              {
                "$ref": "#/$defs/AuditDestinationARN"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the storage used for the audit logs."
              }
            ]
          },
          "CacheAttributes": {
            "$ref": "#/$defs/CacheAttributes"
          },
          "EndpointNetworkConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/EndpointNetworkConfiguration"
              },
              {
                "description": "<p>Specifies the network configuration information for the gateway associated with the Amazon FSx file system.</p> <note> <p>If multiple file systems are associated with this gateway, this parameter's <code>IpAddresses</code> field is required.</p> </note>"
              }
            ]
          }
        }
      },
      "DomainUserName": {
        "type": "string",
        "pattern": "^\\w[\\w\\.\\- ]*$",
        "minLength": 1,
        "maxLength": 1024
      },
      "DomainUserPassword": {
        "type": "string",
        "pattern": "^[ -~]+$",
        "minLength": 1,
        "maxLength": 1024,
        "format": "password"
      },
      "ClientToken": {
        "type": "string",
        "minLength": 5,
        "maxLength": 100
      },
      "GatewayARN": {
        "type": "string",
        "description": "The Amazon Resource Name (ARN) of the gateway. Use the <a>ListGateways</a> operation to return a list of gateways for your account and Amazon Web Services Region.",
        "minLength": 50,
        "maxLength": 500
      },
      "FileSystemLocationARN": {
        "type": "string",
        "minLength": 8,
        "maxLength": 512
      },
      "Tags": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/Tag"
        }
      },
      "Tag": {
        "type": "object",
        "required": [
          "Key",
          "Value"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "Tag key. The key can't start with aws:."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "Value of the tag key."
              }
            ]
          }
        },
        "description": "A key-value pair that helps you manage, filter, and search for your resource. Allowed characters: letters, white space, and numbers, representable in UTF-8, and the following characters: + - = . _ : /."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "minLength": 1,
        "maxLength": 128
      },
      "TagValue": {
        "type": "string",
        "maxLength": 256
      },
      "AuditDestinationARN": {
        "type": "string",
        "maxLength": 1024
      },
      "CacheAttributes": {
        "type": "object",
        "properties": {
          "CacheStaleTimeoutInSeconds": {
            "allOf": [
              {
                "$ref": "#/$defs/CacheStaleTimeoutInSeconds"
              },
              {
                "description": "<p>Refreshes a file share's cache by using Time To Live (TTL). TTL is the length of time since the last refresh after which access to the directory would cause the file gateway to first refresh that directory's contents from the Amazon S3 bucket or Amazon FSx file system. The TTL duration is in seconds.</p> <p>Valid Values:0, 300 to 2,592,000 seconds (5 minutes to 30 days)</p>"
              }
            ]
          }
        },
        "description": "The refresh cache information for the file share or FSx file systems."
      },
      "CacheStaleTimeoutInSeconds": {
        "type": "integer"
      },
      "EndpointNetworkConfiguration": {
        "type": "object",
        "properties": {
          "IpAddresses": {
            "allOf": [
              {
                "$ref": "#/$defs/IpAddressList"
              },
              {
                "description": "<p>A list of gateway IP addresses on which the associated Amazon FSx file system is available.</p> <note> <p>If multiple file systems are associated with this gateway, this field is required.</p> </note>"
              }
            ]
          }
        },
        "description": "Specifies network configuration information for the gateway associated with the Amazon FSx file system."
      },
      "IpAddressList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/IPV4Address"
        },
        "minItems": 0,
        "maxItems": 1
      },
      "IPV4Address": {
        "type": "string",
        "pattern": "^((25[0-5]|(2[0-4]|1[0-9]|[1-9]|)[0-9])(\\.(?!$)|$)){4}",
        "minLength": 7,
        "maxLength": 15
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://storagegateway.us-east-1.amazonaws.com/#X-Amz-Target=StorageGateway_20130630.AssociateFileSystem"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**FileSystemAssociationARN**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
