{
  "name": "CreateStudio",
  "description": "<p>Create a new studio.</p> <p>When creating a studio, two IAM roles must be provided: the admin role and the user role. These roles are assumed by your users when they log in to the Nimble Studio portal.</p> <p>The user role must have the <code>AmazonNimbleStudio-StudioUser</code> managed policy attached for the portal to function properly.</p> <p>The admin role must have the <code>AmazonNimbleStudio-StudioAdmin</code> managed policy attached for the portal to function properly.</p> <p>You may optionally specify a KMS key in the <code>StudioEncryptionConfiguration</code>.</p> <p>In Nimble Studio, resource names, descriptions, initialization scripts, and other data you provide are always encrypted at rest using an KMS key. By default, this key is owned by Amazon Web Services and managed on your behalf. You may provide your own KMS key when calling <code>CreateStudio</code> to encrypt this data using a key you own and manage.</p> <p>When providing an KMS key during studio creation, Nimble Studio creates KMS grants in your account to provide your studio user and admin roles access to these KMS keys.</p> <p>If you delete this grant, the studio will no longer be accessible to your portal users.</p> <p>If you delete the studio KMS key, your studio will no longer be accessible.</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Client-Token": {
        "type": "string",
        "minLength": 1,
        "maxLength": 64,
        "description": "Unique, case-sensitive identifier that you provide to ensure the idempotency of the request. If you donâ€™t specify a client token, the Amazon Web Services SDK automatically generates a client token and uses it for the request to ensure idempotency."
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "adminRoleArn",
          "displayName",
          "studioName",
          "userRoleArn"
        ],
        "properties": {
          "adminRoleArn": {
            "description": "The IAM role that studio admins will assume when logging in to the Nimble Studio portal.",
            "type": "string",
            "minLength": 0,
            "maxLength": 2048
          },
          "displayName": {
            "description": "A friendly name for the studio.",
            "type": "string",
            "minLength": 0,
            "maxLength": 64,
            "format": "password"
          },
          "studioEncryptionConfiguration": {
            "description": "Configuration of the encryption method that is used for the studio.",
            "type": "object",
            "properties": {
              "keyArn": {
                "allOf": [
                  {
                    "$ref": "#/$defs/StudioEncryptionConfigurationKeyArn"
                  },
                  {
                    "description": "The ARN for a KMS key that is used to encrypt studio data."
                  }
                ]
              },
              "keyType": {
                "allOf": [
                  {
                    "$ref": "#/$defs/StudioEncryptionConfigurationKeyType"
                  },
                  {
                    "description": "The type of KMS key that is used to encrypt studio data."
                  }
                ]
              }
            }
          },
          "studioName": {
            "description": "The studio name that is used in the URL of the Nimble Studio portal when accessed by Nimble Studio users.",
            "type": "string",
            "pattern": "^[a-z0-9]*$",
            "minLength": 3,
            "maxLength": 64
          },
          "tags": {
            "description": "A collection of labels, in the form of key-value pairs, that apply to this resource.",
            "type": "object",
            "additionalProperties": {
              "$ref": "#/$defs/String"
            }
          },
          "userRoleArn": {
            "description": "The IAM role that studio users will assume when logging in to the Nimble Studio portal.",
            "type": "string",
            "minLength": 0,
            "maxLength": 2048
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "StudioEncryptionConfigurationKeyArn": {
        "type": "string",
        "pattern": "^arn:.*",
        "description": "The Amazon Resource Name (ARN) for a KMS key that is used to encrypt studio data.",
        "minLength": 4
      },
      "StudioEncryptionConfigurationKeyType": {
        "type": "string",
        "enum": [
          "AWS_OWNED_KEY",
          "CUSTOMER_MANAGED_KEY"
        ],
        "description": "The type of KMS key that is used to encrypt studio data."
      },
      "String": {
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://nimble.us-east-1.amazonaws.com/2020-08-01/studios"
    },
    "headers": {
      "X-Amz-Client-Token": {
        "$": "X-Amz-Client-Token"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**studio**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "486": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
