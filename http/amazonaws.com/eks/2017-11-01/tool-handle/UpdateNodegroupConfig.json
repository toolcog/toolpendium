{
  "name": "UpdateNodegroupConfig",
  "description": "Updates an Amazon EKS managed node group configuration. Your node group continues to function during the update. The response output includes an update ID that you can use to track the status of your node group update with the <a>DescribeUpdate</a> API operation. Currently you can update the Kubernetes labels for a node group or the scaling configuration.",
  "parameters": {
    "type": "object",
    "properties": {
      "name": {
        "type": "string",
        "description": "The name of the Amazon EKS cluster that the managed node group resides in."
      },
      "nodegroupName": {
        "type": "string",
        "description": "The name of the managed node group to update."
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "properties": {
          "labels": {
            "description": "An object representing a Kubernetes label change for a managed node group.",
            "type": "object",
            "properties": {
              "addOrUpdateLabels": {
                "allOf": [
                  {
                    "$ref": "#/$defs/labelsMap"
                  },
                  {
                    "description": "Kubernetes labels to be added or updated."
                  }
                ]
              },
              "removeLabels": {
                "allOf": [
                  {
                    "$ref": "#/$defs/labelsKeyList"
                  },
                  {
                    "description": "Kubernetes labels to be removed."
                  }
                ]
              }
            }
          },
          "taints": {
            "description": "An object representing the details of an update to a taints payload. For more information, see <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/node-taints-managed-node-groups.html\">Node taints on managed node groups</a>.",
            "type": "object",
            "properties": {
              "addOrUpdateTaints": {
                "allOf": [
                  {
                    "$ref": "#/$defs/taintsList"
                  },
                  {
                    "description": "Kubernetes taints to be added or updated."
                  }
                ]
              },
              "removeTaints": {
                "allOf": [
                  {
                    "$ref": "#/$defs/taintsList"
                  },
                  {
                    "description": "Kubernetes taints to remove."
                  }
                ]
              }
            }
          },
          "scalingConfig": {
            "description": "An object representing the scaling configuration details for the Auto Scaling group that is associated with your node group. When creating a node group, you must specify all or none of the properties. When updating a node group, you can specify any or none of the properties.",
            "type": "object",
            "properties": {
              "minSize": {
                "allOf": [
                  {
                    "$ref": "#/$defs/ZeroCapacity"
                  },
                  {
                    "description": "The minimum number of nodes that the managed node group can scale in to."
                  }
                ]
              },
              "maxSize": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Capacity"
                  },
                  {
                    "description": "The maximum number of nodes that the managed node group can scale out to. For information about the maximum number that you can specify, see <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/service-quotas.html\">Amazon EKS service quotas</a> in the <i>Amazon EKS User Guide</i>."
                  }
                ]
              },
              "desiredSize": {
                "allOf": [
                  {
                    "$ref": "#/$defs/ZeroCapacity"
                  },
                  {
                    "description": "<p>The current number of nodes that the managed node group should maintain.</p> <important> <p>If you use Cluster Autoscaler, you shouldn't change the desiredSize value directly, as this can cause the Cluster Autoscaler to suddenly scale up or scale down.</p> </important> <p>Whenever this parameter changes, the number of worker nodes in the node group is updated to the specified size. If this parameter is given a value that is smaller than the current number of running worker nodes, the necessary number of worker nodes are terminated to match the given value. When using CloudFormation, no action occurs if you remove this parameter from your CFN template.</p> <p>This parameter can be different from minSize in some cases, such as when starting with extra hosts for testing. This parameter can also be different when you want to start with an estimated number of needed hosts, but let Cluster Autoscaler reduce the number if there are too many. When Cluster Autoscaler is used, the desiredSize parameter is altered by Cluster Autoscaler (but can be out-of-date for short periods of time). Cluster Autoscaler doesn't scale a managed node group lower than minSize or higher than maxSize.</p>"
                  }
                ]
              }
            }
          },
          "updateConfig": {
            "description": "The node group update configuration.",
            "type": "object",
            "properties": {
              "maxUnavailable": {
                "allOf": [
                  {
                    "$ref": "#/$defs/NonZeroInteger"
                  },
                  {
                    "description": "The maximum number of nodes unavailable at once during a version update. Nodes will be updated in parallel. This value or <code>maxUnavailablePercentage</code> is required to have a value.The maximum number is 100."
                  }
                ]
              },
              "maxUnavailablePercentage": {
                "allOf": [
                  {
                    "$ref": "#/$defs/PercentCapacity"
                  },
                  {
                    "description": "The maximum percentage of nodes unavailable during a version update. This percentage of nodes will be updated in parallel, up to 100 nodes at once. This value or <code>maxUnavailable</code> is required to have a value."
                  }
                ]
              }
            }
          },
          "clientRequestToken": {
            "description": "Unique, case-sensitive identifier that you provide to ensure the idempotency of the request.",
            "type": "string"
          }
        }
      }
    },
    "required": [
      "name",
      "nodegroupName",
      "body"
    ],
    "$defs": {
      "labelsMap": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/$defs/labelValue"
        }
      },
      "labelValue": {
        "type": "string",
        "minLength": 1,
        "maxLength": 63
      },
      "labelsKeyList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/String"
        }
      },
      "String": {
        "type": "string"
      },
      "taintsList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/Taint"
        }
      },
      "Taint": {
        "type": "object",
        "properties": {
          "key": {
            "allOf": [
              {
                "$ref": "#/$defs/taintKey"
              },
              {
                "description": "The key of the taint."
              }
            ]
          },
          "value": {
            "allOf": [
              {
                "$ref": "#/$defs/taintValue"
              },
              {
                "description": "The value of the taint."
              }
            ]
          },
          "effect": {
            "allOf": [
              {
                "$ref": "#/$defs/TaintEffect"
              },
              {
                "description": "The effect of the taint."
              }
            ]
          }
        },
        "description": "A property that allows a node to repel a set of pods. For more information, see <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/node-taints-managed-node-groups.html\">Node taints on managed node groups</a>."
      },
      "taintKey": {
        "type": "string",
        "minLength": 1,
        "maxLength": 63
      },
      "taintValue": {
        "type": "string",
        "minLength": 0,
        "maxLength": 63
      },
      "TaintEffect": {
        "type": "string",
        "enum": [
          "NO_SCHEDULE",
          "NO_EXECUTE",
          "PREFER_NO_SCHEDULE"
        ]
      },
      "ZeroCapacity": {
        "type": "integer",
        "minimum": 0
      },
      "Capacity": {
        "type": "integer",
        "minimum": 1
      },
      "NonZeroInteger": {
        "type": "integer",
        "minimum": 1
      },
      "PercentCapacity": {
        "type": "integer",
        "minimum": 1,
        "maximum": 100
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://eks.us-east-1.amazonaws.com/clusters/{name}/node-groups/{nodegroupName}/update-config"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**update**: An object representing an asynchronous update.",
              {
                "$ul": [
                  "**id**",
                  "**status**",
                  "**type**",
                  "**params**",
                  "**createdAt**",
                  "**errors**"
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
