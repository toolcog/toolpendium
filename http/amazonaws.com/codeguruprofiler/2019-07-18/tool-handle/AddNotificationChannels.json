{
  "name": "AddNotificationChannels",
  "description": "Add up to 2 anomaly notifications channels for a profiling group.",
  "parameters": {
    "type": "object",
    "properties": {
      "profilingGroupName": {
        "type": "string",
        "pattern": "^[\\w-]+$",
        "minLength": 1,
        "maxLength": 255,
        "description": "The name of the profiling group that we are setting up notifications for."
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "channels"
        ],
        "properties": {
          "channels": {
            "description": "One or 2 channels to report to when anomalies are detected.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/Channel"
            },
            "minItems": 1,
            "maxItems": 2
          }
        }
      }
    },
    "required": [
      "profilingGroupName",
      "body"
    ],
    "$defs": {
      "Channel": {
        "type": "object",
        "required": [
          "eventPublishers",
          "uri"
        ],
        "properties": {
          "eventPublishers": {
            "allOf": [
              {
                "$ref": "#/$defs/EventPublishers"
              },
              {
                "description": "List of publishers for different type of events that may be detected in an application from the profile. Anomaly detection is the only event publisher in Profiler."
              }
            ]
          },
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/ChannelId"
              },
              {
                "description": "Unique identifier for each <code>Channel</code> in the notification configuration of a Profiling Group. A random UUID for channelId is used when adding a channel to the notification configuration if not specified in the request."
              }
            ]
          },
          "uri": {
            "allOf": [
              {
                "$ref": "#/$defs/ChannelUri"
              },
              {
                "description": "Unique arn of the resource to be used for notifications. We support a valid SNS topic arn as a channel uri."
              }
            ]
          }
        },
        "description": "Notification medium for users to get alerted for events that occur in application profile. We support SNS topic as a notification channel."
      },
      "EventPublishers": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/EventPublisher"
        },
        "minItems": 1,
        "maxItems": 1
      },
      "EventPublisher": {
        "type": "string",
        "enum": [
          "AnomalyDetection"
        ]
      },
      "ChannelId": {
        "type": "string",
        "pattern": "[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}"
      },
      "ChannelUri": {
        "type": "string",
        "description": "Channel URI uniquely identifies a Notification Channel. TopicArn is the uri for an SNS channel, emailId is uri for an email channel etc. Currently we only support SNS channels and thus required to be an ARN"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://codeguru-profiler.us-east-1.amazonaws.com/profilingGroups/{profilingGroupName}/notificationConfiguration"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The structure representing the AddNotificationChannelsResponse.",
        "**Key properties:**",
        {
          "$ul": [
            "**notificationConfiguration**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
