{
  "name": "UpdateAccessControlConfiguration",
  "description": "<p>Updates an access control configuration for your documents in an index. This includes user and group access information for your documents. This is useful for user context filtering, where search results are filtered based on the user or their group access to documents.</p> <p>You can update an access control configuration you created without indexing all of your documents again. For example, your index contains top-secret company documents that only certain employees or users should access. You created an 'allow' access control configuration for one user who recently joined the 'top-secret' team, switching from a team with 'deny' access to top-secret documents. However, the user suddenly returns to their previous team and should no longer have access to top secret documents. You can update the access control configuration to re-configure access control for your documents as circumstances change.</p> <p>You call the <a href=\"https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html\">BatchPutDocument</a> API to apply the updated access control configuration, with the <code>AccessControlConfigurationId</code> included in the <a href=\"https://docs.aws.amazon.com/kendra/latest/dg/API_Document.html\">Document</a> object. If you use an S3 bucket as a data source, you synchronize your data source to apply the <code>AccessControlConfigurationId</code> in the <code>.metadata.json</code> file. Amazon Kendra currently only supports access control configuration for S3 data sources and documents indexed using the <code>BatchPutDocument</code> API.</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "AWSKendraFrontendService.UpdateAccessControlConfiguration"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/UpdateAccessControlConfigurationRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "UpdateAccessControlConfigurationRequest": {
        "type": "object",
        "required": [
          "IndexId",
          "Id"
        ],
        "title": "UpdateAccessControlConfigurationRequest",
        "properties": {
          "IndexId": {
            "allOf": [
              {
                "$ref": "#/$defs/IndexId"
              },
              {
                "description": "The identifier of the index for an access control configuration."
              }
            ]
          },
          "Id": {
            "allOf": [
              {
                "$ref": "#/$defs/AccessControlConfigurationId"
              },
              {
                "description": "The identifier of the access control configuration you want to update."
              }
            ]
          },
          "Name": {
            "allOf": [
              {
                "$ref": "#/$defs/AccessControlConfigurationName"
              },
              {
                "description": "A new name for the access control configuration."
              }
            ]
          },
          "Description": {
            "allOf": [
              {
                "$ref": "#/$defs/Description"
              },
              {
                "description": "A new description for the access control configuration."
              }
            ]
          },
          "AccessControlList": {
            "allOf": [
              {
                "$ref": "#/$defs/PrincipalList"
              },
              {
                "description": "Information you want to update on principals (users and/or groups) and which documents they should have access to. This is useful for user context filtering, where search results are filtered based on the user or their group access to documents."
              }
            ]
          },
          "HierarchicalAccessControlList": {
            "allOf": [
              {
                "$ref": "#/$defs/HierarchicalPrincipalList"
              },
              {
                "description": "The updated list of <a href=\"https://docs.aws.amazon.com/kendra/latest/dg/API_Principal.html\">principal</a> lists that define the hierarchy for which documents users should have access to."
              }
            ]
          }
        }
      },
      "IndexId": {
        "type": "string",
        "pattern": "[a-zA-Z0-9][a-zA-Z0-9-]*",
        "minLength": 36,
        "maxLength": 36
      },
      "AccessControlConfigurationId": {
        "type": "string",
        "pattern": "[a-zA-Z0-9-]+",
        "minLength": 1,
        "maxLength": 36
      },
      "AccessControlConfigurationName": {
        "type": "string",
        "pattern": "[\\S\\s]*",
        "minLength": 1,
        "maxLength": 200
      },
      "Description": {
        "type": "string",
        "pattern": "^\\P{C}*$",
        "minLength": 0,
        "maxLength": 1000
      },
      "PrincipalList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/Principal"
        }
      },
      "Principal": {
        "type": "object",
        "required": [
          "Name",
          "Type",
          "Access"
        ],
        "properties": {
          "Name": {
            "allOf": [
              {
                "$ref": "#/$defs/PrincipalName"
              },
              {
                "description": "The name of the user or group."
              }
            ]
          },
          "Type": {
            "allOf": [
              {
                "$ref": "#/$defs/PrincipalType"
              },
              {
                "description": "The type of principal."
              }
            ]
          },
          "Access": {
            "allOf": [
              {
                "$ref": "#/$defs/ReadAccessType"
              },
              {
                "description": "Whether to allow or deny document access to the principal."
              }
            ]
          },
          "DataSourceId": {
            "allOf": [
              {
                "$ref": "#/$defs/DataSourceId"
              },
              {
                "description": "The identifier of the data source the principal should access documents from."
              }
            ]
          }
        },
        "description": "Provides user and group information for <a href=\"https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html\">user context filtering</a>."
      },
      "PrincipalName": {
        "type": "string",
        "pattern": "^\\P{C}*$",
        "minLength": 1,
        "maxLength": 200
      },
      "PrincipalType": {
        "type": "string",
        "enum": [
          "USER",
          "GROUP"
        ]
      },
      "ReadAccessType": {
        "type": "string",
        "enum": [
          "ALLOW",
          "DENY"
        ]
      },
      "DataSourceId": {
        "type": "string",
        "pattern": "[a-zA-Z0-9][a-zA-Z0-9_-]*",
        "minLength": 1,
        "maxLength": 100
      },
      "HierarchicalPrincipalList": {
        "type": "array",
        "description": "A list of <a href=\"https://docs.aws.amazon.com/kendra/latest/dg/API_Principal.html\">principal</a> lists that define the hierarchy for which documents users should have access to. Each hierarchical list specifies which user or group has allow or deny access for each document.",
        "items": {
          "$ref": "#/$defs/HierarchicalPrincipal"
        },
        "minItems": 1,
        "maxItems": 30
      },
      "HierarchicalPrincipal": {
        "type": "object",
        "required": [
          "PrincipalList"
        ],
        "properties": {
          "PrincipalList": {
            "allOf": [
              {
                "$ref": "#/$defs/PrincipalList"
              },
              {
                "description": "A list of <a href=\"https://docs.aws.amazon.com/kendra/latest/dg/API_Principal.html\">principal</a> lists that define the hierarchy for which documents users should have access to. Each hierarchical list specifies which user or group has allow or deny access for each document."
              }
            ]
          }
        },
        "description": " Information to define the hierarchy for which documents users should have access to. "
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://kendra.us-east-1.amazonaws.com/#X-Amz-Target=AWSKendraFrontendService.UpdateAccessControlConfiguration"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "486": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
