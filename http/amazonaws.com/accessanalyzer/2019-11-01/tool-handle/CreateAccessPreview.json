{
  "name": "CreateAccessPreview",
  "description": "Creates an access preview that allows you to preview IAM Access Analyzer findings for your resource before deploying resource permissions.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "analyzerArn",
          "configurations"
        ],
        "properties": {
          "analyzerArn": {
            "description": "The <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-getting-started.html#permission-resources\">ARN of the account analyzer</a> used to generate the access preview. You can only create an access preview for analyzers with an <code>Account</code> type and <code>Active</code> status.",
            "type": "string",
            "pattern": "[^:]*:[^:]*:[^:]*:[^:]*:[^:]*:analyzer/.{1,255}"
          },
          "configurations": {
            "description": "Access control configuration for your resource that is used to generate the access preview. The access preview includes findings for external access allowed to the resource with the proposed access control configuration. The configuration must contain exactly one element.",
            "type": "object",
            "additionalProperties": {
              "$ref": "#/$defs/Configuration"
            }
          },
          "clientToken": {
            "description": "A client token.",
            "type": "string"
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "Configuration": {
        "type": "object",
        "properties": {
          "ebsSnapshot": {
            "allOf": [
              {
                "$ref": "#/$defs/EbsSnapshotConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon EBS volume snapshot."
              }
            ]
          },
          "ecrRepository": {
            "allOf": [
              {
                "$ref": "#/$defs/EcrRepositoryConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon ECR repository."
              }
            ]
          },
          "iamRole": {
            "allOf": [
              {
                "$ref": "#/$defs/IamRoleConfiguration"
              },
              {
                "description": "The access control configuration is for an IAM role. "
              }
            ]
          },
          "efsFileSystem": {
            "allOf": [
              {
                "$ref": "#/$defs/EfsFileSystemConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon EFS file system."
              }
            ]
          },
          "kmsKey": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsKeyConfiguration"
              },
              {
                "description": "The access control configuration is for a KMS key. "
              }
            ]
          },
          "rdsDbClusterSnapshot": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbClusterSnapshotConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon RDS DB cluster snapshot."
              }
            ]
          },
          "rdsDbSnapshot": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbSnapshotConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon RDS DB snapshot."
              }
            ]
          },
          "secretsManagerSecret": {
            "allOf": [
              {
                "$ref": "#/$defs/SecretsManagerSecretConfiguration"
              },
              {
                "description": "The access control configuration is for a Secrets Manager secret."
              }
            ]
          },
          "s3Bucket": {
            "allOf": [
              {
                "$ref": "#/$defs/S3BucketConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon S3 Bucket. "
              }
            ]
          },
          "snsTopic": {
            "allOf": [
              {
                "$ref": "#/$defs/SnsTopicConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon SNS topic"
              }
            ]
          },
          "sqsQueue": {
            "allOf": [
              {
                "$ref": "#/$defs/SqsQueueConfiguration"
              },
              {
                "description": "The access control configuration is for an Amazon SQS queue. "
              }
            ]
          }
        },
        "description": "Access control configuration structures for your resource. You specify the configuration as a type-value pair. You can specify only one type of access control configuration."
      },
      "EbsSnapshotConfiguration": {
        "type": "object",
        "properties": {
          "userIds": {
            "allOf": [
              {
                "$ref": "#/$defs/EbsUserIdList"
              },
              {
                "description": "<p>The IDs of the Amazon Web Services accounts that have access to the Amazon EBS volume snapshot.</p> <ul> <li> <p>If the configuration is for an existing Amazon EBS volume snapshot and you do not specify the <code>userIds</code>, then the access preview uses the existing shared <code>userIds</code> for the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the <code>userIds</code>, then the access preview considers the snapshot without any <code>userIds</code>.</p> </li> <li> <p>To propose deletion of existing shared <code>accountIds</code>, you can specify an empty list for <code>userIds</code>.</p> </li> </ul>"
              }
            ]
          },
          "groups": {
            "allOf": [
              {
                "$ref": "#/$defs/EbsGroupList"
              },
              {
                "description": "<p>The groups that have access to the Amazon EBS volume snapshot. If the value <code>all</code> is specified, then the Amazon EBS volume snapshot is public.</p> <ul> <li> <p>If the configuration is for an existing Amazon EBS volume snapshot and you do not specify the <code>groups</code>, then the access preview uses the existing shared <code>groups</code> for the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the <code>groups</code>, then the access preview considers the snapshot without any <code>groups</code>.</p> </li> <li> <p>To propose deletion of existing shared <code>groups</code>, you can specify an empty list for <code>groups</code>.</p> </li> </ul>"
              }
            ]
          },
          "kmsKeyId": {
            "allOf": [
              {
                "$ref": "#/$defs/EbsSnapshotDataEncryptionKeyId"
              },
              {
                "description": "<p>The KMS key identifier for an encrypted Amazon EBS volume snapshot. The KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.</p> <ul> <li> <p>If the configuration is for an existing Amazon EBS volume snapshot and you do not specify the <code>kmsKeyId</code>, or you specify an empty string, then the access preview uses the existing <code>kmsKeyId</code> of the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the <code>kmsKeyId</code>, the access preview considers the snapshot as unencrypted.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The proposed access control configuration for an Amazon EBS volume snapshot. You can propose a configuration for a new Amazon EBS volume snapshot or an Amazon EBS volume snapshot that you own by specifying the user IDs, groups, and optional KMS encryption key. For more information, see <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_ModifySnapshotAttribute.html\">ModifySnapshotAttribute</a>."
      },
      "EbsUserIdList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/EbsUserId"
        }
      },
      "EbsUserId": {
        "type": "string"
      },
      "EbsGroupList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/EbsGroup"
        }
      },
      "EbsGroup": {
        "type": "string"
      },
      "EbsSnapshotDataEncryptionKeyId": {
        "type": "string"
      },
      "EcrRepositoryConfiguration": {
        "type": "object",
        "properties": {
          "repositoryPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/EcrRepositoryPolicy"
              },
              {
                "description": "The JSON repository policy text to apply to the Amazon ECR repository. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonECR/latest/userguide/repository-policy-examples.html\">Private repository policy examples</a> in the <i>Amazon ECR User Guide</i>."
              }
            ]
          }
        },
        "description": "<p>The proposed access control configuration for an Amazon ECR repository. You can propose a configuration for a new Amazon ECR repository or an existing Amazon ECR repository that you own by specifying the Amazon ECR policy. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonECR/latest/APIReference/API_Repository.html\">Repository</a>.</p> <ul> <li> <p>If the configuration is for an existing Amazon ECR repository and you do not specify the Amazon ECR policy, then the access preview uses the existing Amazon ECR policy for the repository.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the policy, then the access preview assumes an Amazon ECR repository without a policy.</p> </li> <li> <p>To propose deletion of an existing Amazon ECR repository policy, you can specify an empty string for the Amazon ECR policy.</p> </li> </ul>"
      },
      "EcrRepositoryPolicy": {
        "type": "string"
      },
      "IamRoleConfiguration": {
        "type": "object",
        "properties": {
          "trustPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/IamTrustPolicy"
              },
              {
                "description": "The proposed trust policy for the IAM role."
              }
            ]
          }
        },
        "description": "The proposed access control configuration for an IAM role. You can propose a configuration for a new IAM role or an existing IAM role that you own by specifying the trust policy. If the configuration is for a new IAM role, you must specify the trust policy. If the configuration is for an existing IAM role that you own and you do not propose the trust policy, the access preview uses the existing trust policy for the role. The proposed trust policy cannot be an empty string. For more information about role trust policy limits, see <a href=\"https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html\">IAM and STS quotas</a>."
      },
      "IamTrustPolicy": {
        "type": "string"
      },
      "EfsFileSystemConfiguration": {
        "type": "object",
        "properties": {
          "fileSystemPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/EfsFileSystemPolicy"
              },
              {
                "description": "The JSON policy definition to apply to the Amazon EFS file system. For more information on the elements that make up a file system policy, see <a href=\"https://docs.aws.amazon.com/efs/latest/ug/access-control-overview.html#access-control-manage-access-intro-resource-policies\">Amazon EFS Resource-based policies</a>."
              }
            ]
          }
        },
        "description": "<p>The proposed access control configuration for an Amazon EFS file system. You can propose a configuration for a new Amazon EFS file system or an existing Amazon EFS file system that you own by specifying the Amazon EFS policy. For more information, see <a href=\"https://docs.aws.amazon.com/efs/latest/ug/using-fs.html\">Using file systems in Amazon EFS</a>.</p> <ul> <li> <p>If the configuration is for an existing Amazon EFS file system and you do not specify the Amazon EFS policy, then the access preview uses the existing Amazon EFS policy for the file system.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the policy, then the access preview assumes an Amazon EFS file system without a policy.</p> </li> <li> <p>To propose deletion of an existing Amazon EFS file system policy, you can specify an empty string for the Amazon EFS policy.</p> </li> </ul>"
      },
      "EfsFileSystemPolicy": {
        "type": "string"
      },
      "KmsKeyConfiguration": {
        "type": "object",
        "properties": {
          "keyPolicies": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsKeyPoliciesMap"
              },
              {
                "description": "Resource policy configuration for the KMS key. The only valid value for the name of the key policy is <code>default</code>. For more information, see <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html#key-policy-default\">Default key policy</a>."
              }
            ]
          },
          "grants": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsGrantConfigurationsList"
              },
              {
                "description": "A list of proposed grant configurations for the KMS key. If the proposed grant configuration is for an existing key, the access preview uses the proposed list of grant configurations in place of the existing grants. Otherwise, the access preview uses the existing grants for the key."
              }
            ]
          }
        },
        "description": "<p>Proposed access control configuration for a KMS key. You can propose a configuration for a new KMS key or an existing KMS key that you own by specifying the key policy and KMS grant configuration. If the configuration is for an existing key and you do not specify the key policy, the access preview uses the existing policy for the key. If the access preview is for a new resource and you do not specify the key policy, then the access preview uses the default key policy. The proposed key policy cannot be an empty string. For more information, see <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html#key-policy-default\">Default key policy</a>. For more information about key policy limits, see <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/resource-limits.html\">Resource quotas</a>.</p> <p/>"
      },
      "KmsKeyPoliciesMap": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/$defs/KmsKeyPolicy"
        }
      },
      "KmsKeyPolicy": {
        "type": "string"
      },
      "KmsGrantConfigurationsList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/KmsGrantConfiguration"
        }
      },
      "KmsGrantConfiguration": {
        "type": "object",
        "required": [
          "operations",
          "granteePrincipal",
          "issuingAccount"
        ],
        "properties": {
          "operations": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsGrantOperationsList"
              },
              {
                "description": "A list of operations that the grant permits."
              }
            ]
          },
          "granteePrincipal": {
            "allOf": [
              {
                "$ref": "#/$defs/GranteePrincipal"
              },
              {
                "description": "The principal that is given permission to perform the operations that the grant permits."
              }
            ]
          },
          "retiringPrincipal": {
            "allOf": [
              {
                "$ref": "#/$defs/RetiringPrincipal"
              },
              {
                "description": "The principal that is given permission to retire the grant by using <a href=\"https://docs.aws.amazon.com/kms/latest/APIReference/API_RetireGrant.html\">RetireGrant</a> operation."
              }
            ]
          },
          "constraints": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsGrantConstraints"
              },
              {
                "description": "Use this structure to propose allowing <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations\">cryptographic operations</a> in the grant only when the operation request includes the specified <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#encrypt_context\">encryption context</a>."
              }
            ]
          },
          "issuingAccount": {
            "allOf": [
              {
                "$ref": "#/$defs/IssuingAccount"
              },
              {
                "description": " The Amazon Web Services account under which the grant was issued. The account is used to propose KMS grants issued by accounts other than the owner of the key."
              }
            ]
          }
        },
        "description": "A proposed grant configuration for a KMS key. For more information, see <a href=\"https://docs.aws.amazon.com/kms/latest/APIReference/API_CreateGrant.html\">CreateGrant</a>."
      },
      "KmsGrantOperationsList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/KmsGrantOperation"
        }
      },
      "KmsGrantOperation": {
        "type": "string",
        "enum": [
          "CreateGrant",
          "Decrypt",
          "DescribeKey",
          "Encrypt",
          "GenerateDataKey",
          "GenerateDataKeyPair",
          "GenerateDataKeyPairWithoutPlaintext",
          "GenerateDataKeyWithoutPlaintext",
          "GetPublicKey",
          "ReEncryptFrom",
          "ReEncryptTo",
          "RetireGrant",
          "Sign",
          "Verify"
        ]
      },
      "GranteePrincipal": {
        "type": "string"
      },
      "RetiringPrincipal": {
        "type": "string"
      },
      "KmsGrantConstraints": {
        "type": "object",
        "properties": {
          "encryptionContextEquals": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsConstraintsMap"
              },
              {
                "description": "A list of key-value pairs that must match the encryption context in the <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations\">cryptographic operation</a> request. The grant allows the operation only when the encryption context in the request is the same as the encryption context specified in this constraint."
              }
            ]
          },
          "encryptionContextSubset": {
            "allOf": [
              {
                "$ref": "#/$defs/KmsConstraintsMap"
              },
              {
                "description": "A list of key-value pairs that must be included in the encryption context of the <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations\">cryptographic operation</a> request. The grant allows the cryptographic operation only when the encryption context in the request includes the key-value pairs specified in this constraint, although it can include additional key-value pairs."
              }
            ]
          }
        },
        "description": "Use this structure to propose allowing <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#cryptographic-operations\">cryptographic operations</a> in the grant only when the operation request includes the specified <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#encrypt_context\">encryption context</a>. You can specify only one type of encryption context. An empty map is treated as not specified. For more information, see <a href=\"https://docs.aws.amazon.com/kms/latest/APIReference/API_GrantConstraints.html\">GrantConstraints</a>."
      },
      "KmsConstraintsMap": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/$defs/KmsConstraintsValue"
        }
      },
      "KmsConstraintsValue": {
        "type": "string"
      },
      "IssuingAccount": {
        "type": "string"
      },
      "RdsDbClusterSnapshotConfiguration": {
        "type": "object",
        "properties": {
          "attributes": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbClusterSnapshotAttributesMap"
              },
              {
                "description": "The names and values of manual DB cluster snapshot attributes. Manual DB cluster snapshot attributes are used to authorize other Amazon Web Services accounts to restore a manual DB cluster snapshot. The only valid value for <code>AttributeName</code> for the attribute map is <code>restore</code> "
              }
            ]
          },
          "kmsKeyId": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbClusterSnapshotKmsKeyId"
              },
              {
                "description": "<p>The KMS key identifier for an encrypted Amazon RDS DB cluster snapshot. The KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.</p> <ul> <li> <p>If the configuration is for an existing Amazon RDS DB cluster snapshot and you do not specify the <code>kmsKeyId</code>, or you specify an empty string, then the access preview uses the existing <code>kmsKeyId</code> of the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the specify the <code>kmsKeyId</code>, then the access preview considers the snapshot as unencrypted.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The proposed access control configuration for an Amazon RDS DB cluster snapshot. You can propose a configuration for a new Amazon RDS DB cluster snapshot or an Amazon RDS DB cluster snapshot that you own by specifying the <code>RdsDbClusterSnapshotAttributeValue</code> and optional KMS encryption key. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_ModifyDBClusterSnapshotAttribute.html\">ModifyDBClusterSnapshotAttribute</a>."
      },
      "RdsDbClusterSnapshotAttributesMap": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/$defs/RdsDbClusterSnapshotAttributeValue"
        }
      },
      "RdsDbClusterSnapshotAttributeValue": {
        "type": "object",
        "properties": {
          "accountIds": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbClusterSnapshotAccountIdsList"
              },
              {
                "description": "<p>The Amazon Web Services account IDs that have access to the manual Amazon RDS DB cluster snapshot. If the value <code>all</code> is specified, then the Amazon RDS DB cluster snapshot is public and can be copied or restored by all Amazon Web Services accounts.</p> <ul> <li> <p>If the configuration is for an existing Amazon RDS DB cluster snapshot and you do not specify the <code>accountIds</code> in <code>RdsDbClusterSnapshotAttributeValue</code>, then the access preview uses the existing shared <code>accountIds</code> for the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the specify the <code>accountIds</code> in <code>RdsDbClusterSnapshotAttributeValue</code>, then the access preview considers the snapshot without any attributes.</p> </li> <li> <p>To propose deletion of existing shared <code>accountIds</code>, you can specify an empty list for <code>accountIds</code> in the <code>RdsDbClusterSnapshotAttributeValue</code>.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The values for a manual Amazon RDS DB cluster snapshot attribute."
      },
      "RdsDbClusterSnapshotAccountIdsList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/RdsDbClusterSnapshotAccountId"
        }
      },
      "RdsDbClusterSnapshotAccountId": {
        "type": "string"
      },
      "RdsDbClusterSnapshotKmsKeyId": {
        "type": "string"
      },
      "RdsDbSnapshotConfiguration": {
        "type": "object",
        "properties": {
          "attributes": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbSnapshotAttributesMap"
              },
              {
                "description": "The names and values of manual DB snapshot attributes. Manual DB snapshot attributes are used to authorize other Amazon Web Services accounts to restore a manual DB snapshot. The only valid value for <code>attributeName</code> for the attribute map is restore."
              }
            ]
          },
          "kmsKeyId": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbSnapshotKmsKeyId"
              },
              {
                "description": "<p>The KMS key identifier for an encrypted Amazon RDS DB snapshot. The KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.</p> <ul> <li> <p>If the configuration is for an existing Amazon RDS DB snapshot and you do not specify the <code>kmsKeyId</code>, or you specify an empty string, then the access preview uses the existing <code>kmsKeyId</code> of the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the specify the <code>kmsKeyId</code>, then the access preview considers the snapshot as unencrypted.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The proposed access control configuration for an Amazon RDS DB snapshot. You can propose a configuration for a new Amazon RDS DB snapshot or an Amazon RDS DB snapshot that you own by specifying the <code>RdsDbSnapshotAttributeValue</code> and optional KMS encryption key. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/API_ModifyDBSnapshotAttribute.html\">ModifyDBSnapshotAttribute</a>."
      },
      "RdsDbSnapshotAttributesMap": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/$defs/RdsDbSnapshotAttributeValue"
        }
      },
      "RdsDbSnapshotAttributeValue": {
        "type": "object",
        "properties": {
          "accountIds": {
            "allOf": [
              {
                "$ref": "#/$defs/RdsDbSnapshotAccountIdsList"
              },
              {
                "description": "<p>The Amazon Web Services account IDs that have access to the manual Amazon RDS DB snapshot. If the value <code>all</code> is specified, then the Amazon RDS DB snapshot is public and can be copied or restored by all Amazon Web Services accounts.</p> <ul> <li> <p>If the configuration is for an existing Amazon RDS DB snapshot and you do not specify the <code>accountIds</code> in <code>RdsDbSnapshotAttributeValue</code>, then the access preview uses the existing shared <code>accountIds</code> for the snapshot.</p> </li> <li> <p>If the access preview is for a new resource and you do not specify the specify the <code>accountIds</code> in <code>RdsDbSnapshotAttributeValue</code>, then the access preview considers the snapshot without any attributes.</p> </li> <li> <p>To propose deletion of an existing shared <code>accountIds</code>, you can specify an empty list for <code>accountIds</code> in the <code>RdsDbSnapshotAttributeValue</code>.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "The name and values of a manual Amazon RDS DB snapshot attribute. Manual DB snapshot attributes are used to authorize other Amazon Web Services accounts to restore a manual DB snapshot."
      },
      "RdsDbSnapshotAccountIdsList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/RdsDbSnapshotAccountId"
        }
      },
      "RdsDbSnapshotAccountId": {
        "type": "string"
      },
      "RdsDbSnapshotKmsKeyId": {
        "type": "string"
      },
      "SecretsManagerSecretConfiguration": {
        "type": "object",
        "properties": {
          "kmsKeyId": {
            "allOf": [
              {
                "$ref": "#/$defs/SecretsManagerSecretKmsId"
              },
              {
                "description": "The proposed ARN, key ID, or alias of the KMS key."
              }
            ]
          },
          "secretPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/SecretsManagerSecretPolicy"
              },
              {
                "description": "The proposed resource policy defining who can access or manage the secret."
              }
            ]
          }
        },
        "description": "<p>The configuration for a Secrets Manager secret. For more information, see <a href=\"https://docs.aws.amazon.com/secretsmanager/latest/apireference/API_CreateSecret.html\">CreateSecret</a>.</p> <p>You can propose a configuration for a new secret or an existing secret that you own by specifying the secret policy and optional KMS encryption key. If the configuration is for an existing secret and you do not specify the secret policy, the access preview uses the existing policy for the secret. If the access preview is for a new resource and you do not specify the policy, the access preview assumes a secret without a policy. To propose deletion of an existing policy, you can specify an empty string. If the proposed configuration is for a new secret and you do not specify the KMS key ID, the access preview uses the Amazon Web Services managed key <code>aws/secretsmanager</code>. If you specify an empty string for the KMS key ID, the access preview uses the Amazon Web Services managed key of the Amazon Web Services account. For more information about secret policy limits, see <a href=\"https://docs.aws.amazon.com/secretsmanager/latest/userguide/reference_limits.html\">Quotas for Secrets Manager.</a>.</p>"
      },
      "SecretsManagerSecretKmsId": {
        "type": "string"
      },
      "SecretsManagerSecretPolicy": {
        "type": "string"
      },
      "S3BucketConfiguration": {
        "type": "object",
        "properties": {
          "bucketPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/S3BucketPolicy"
              },
              {
                "description": "The proposed bucket policy for the Amazon S3 bucket."
              }
            ]
          },
          "bucketAclGrants": {
            "allOf": [
              {
                "$ref": "#/$defs/S3BucketAclGrantConfigurationsList"
              },
              {
                "description": "The proposed list of ACL grants for the Amazon S3 bucket. You can propose up to 100 ACL grants per bucket. If the proposed grant configuration is for an existing bucket, the access preview uses the proposed list of grant configurations in place of the existing grants. Otherwise, the access preview uses the existing grants for the bucket."
              }
            ]
          },
          "bucketPublicAccessBlock": {
            "allOf": [
              {
                "$ref": "#/$defs/S3PublicAccessBlockConfiguration"
              },
              {
                "description": "The proposed block public access configuration for the Amazon S3 bucket."
              }
            ]
          },
          "accessPoints": {
            "allOf": [
              {
                "$ref": "#/$defs/S3AccessPointConfigurationsMap"
              },
              {
                "description": "The configuration of Amazon S3 access points or multi-region access points for the bucket. You can propose up to 10 new access points per bucket."
              }
            ]
          }
        },
        "description": "Proposed access control configuration for an Amazon S3 bucket. You can propose a configuration for a new Amazon S3 bucket or an existing Amazon S3 bucket that you own by specifying the Amazon S3 bucket policy, bucket ACLs, bucket BPA settings, Amazon S3 access points, and multi-region access points attached to the bucket. If the configuration is for an existing Amazon S3 bucket and you do not specify the Amazon S3 bucket policy, the access preview uses the existing policy attached to the bucket. If the access preview is for a new resource and you do not specify the Amazon S3 bucket policy, the access preview assumes a bucket without a policy. To propose deletion of an existing bucket policy, you can specify an empty string. For more information about bucket policy limits, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html\">Bucket Policy Examples</a>."
      },
      "S3BucketPolicy": {
        "type": "string"
      },
      "S3BucketAclGrantConfigurationsList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/S3BucketAclGrantConfiguration"
        }
      },
      "S3BucketAclGrantConfiguration": {
        "type": "object",
        "required": [
          "permission",
          "grantee"
        ],
        "properties": {
          "permission": {
            "allOf": [
              {
                "$ref": "#/$defs/AclPermission"
              },
              {
                "description": "The permissions being granted."
              }
            ]
          },
          "grantee": {
            "allOf": [
              {
                "$ref": "#/$defs/AclGrantee"
              },
              {
                "description": "The grantee to whom youâ€™re assigning access rights."
              }
            ]
          }
        },
        "description": "A proposed access control list grant configuration for an Amazon S3 bucket. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html#setting-acls\">How to Specify an ACL</a>."
      },
      "AclPermission": {
        "type": "string",
        "enum": [
          "READ",
          "WRITE",
          "READ_ACP",
          "WRITE_ACP",
          "FULL_CONTROL"
        ]
      },
      "AclGrantee": {
        "type": "object",
        "properties": {
          "id": {
            "allOf": [
              {
                "$ref": "#/$defs/AclCanonicalId"
              },
              {
                "description": "The value specified is the canonical user ID of an Amazon Web Services account."
              }
            ]
          },
          "uri": {
            "allOf": [
              {
                "$ref": "#/$defs/AclUri"
              },
              {
                "description": "Used for granting permissions to a predefined group."
              }
            ]
          }
        },
        "description": "You specify each grantee as a type-value pair using one of these types. You can specify only one type of grantee. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutBucketAcl.html\">PutBucketAcl</a>."
      },
      "AclCanonicalId": {
        "type": "string"
      },
      "AclUri": {
        "type": "string"
      },
      "S3PublicAccessBlockConfiguration": {
        "type": "object",
        "required": [
          "ignorePublicAcls",
          "restrictPublicBuckets"
        ],
        "properties": {
          "ignorePublicAcls": {
            "allOf": [
              {
                "$ref": "#/$defs/Boolean"
              },
              {
                "description": " Specifies whether Amazon S3 should ignore public ACLs for this bucket and objects in this bucket. "
              }
            ]
          },
          "restrictPublicBuckets": {
            "allOf": [
              {
                "$ref": "#/$defs/Boolean"
              },
              {
                "description": " Specifies whether Amazon S3 should restrict public bucket policies for this bucket. "
              }
            ]
          }
        },
        "description": "The <code>PublicAccessBlock</code> configuration to apply to this Amazon S3 bucket. If the proposed configuration is for an existing Amazon S3 bucket and the configuration is not specified, the access preview uses the existing setting. If the proposed configuration is for a new bucket and the configuration is not specified, the access preview uses <code>false</code>. If the proposed configuration is for a new access point or multi-region access point and the access point BPA configuration is not specified, the access preview uses <code>true</code>. For more information, see <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket-publicaccessblockconfiguration.html\">PublicAccessBlockConfiguration</a>. "
      },
      "Boolean": {
        "type": "boolean"
      },
      "S3AccessPointConfigurationsMap": {
        "type": "object",
        "additionalProperties": {
          "$ref": "#/$defs/S3AccessPointConfiguration"
        }
      },
      "S3AccessPointConfiguration": {
        "type": "object",
        "properties": {
          "accessPointPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/AccessPointPolicy"
              },
              {
                "description": "The access point or multi-region access point policy."
              }
            ]
          },
          "publicAccessBlock": {
            "allOf": [
              {
                "$ref": "#/$defs/S3PublicAccessBlockConfiguration"
              },
              {
                "description": "The proposed <code>S3PublicAccessBlock</code> configuration to apply to this Amazon S3 access point or multi-region access point."
              }
            ]
          },
          "networkOrigin": {
            "allOf": [
              {
                "$ref": "#/$defs/NetworkOriginConfiguration"
              },
              {
                "description": "The proposed <code>Internet</code> and <code>VpcConfiguration</code> to apply to this Amazon S3 access point. <code>VpcConfiguration</code> does not apply to multi-region access points. If the access preview is for a new resource and neither is specified, the access preview uses <code>Internet</code> for the network origin. If the access preview is for an existing resource and neither is specified, the access preview uses the exiting network origin."
              }
            ]
          }
        },
        "description": "The configuration for an Amazon S3 access point or multi-region access point for the bucket. You can propose up to 10 access points or multi-region access points per bucket. If the proposed Amazon S3 access point configuration is for an existing bucket, the access preview uses the proposed access point configuration in place of the existing access points. To propose an access point without a policy, you can provide an empty string as the access point policy. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/creating-access-points.html\">Creating access points</a>. For more information about access point policy limits, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/access-points-restrictions-limitations.html\">Access points restrictions and limitations</a>."
      },
      "AccessPointPolicy": {
        "type": "string"
      },
      "NetworkOriginConfiguration": {
        "type": "object",
        "properties": {
          "vpcConfiguration": {
            "$ref": "#/$defs/VpcConfiguration"
          },
          "internetConfiguration": {
            "allOf": [
              {
                "$ref": "#/$defs/InternetConfiguration"
              },
              {
                "description": "The configuration for the Amazon S3 access point or multi-region access point with an <code>Internet</code> origin."
              }
            ]
          }
        },
        "description": "The proposed <code>InternetConfiguration</code> or <code>VpcConfiguration</code> to apply to the Amazon S3 access point. <code>VpcConfiguration</code> does not apply to multi-region access points. You can make the access point accessible from the internet, or you can specify that all requests made through that access point must originate from a specific virtual private cloud (VPC). You can specify only one type of network configuration. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/dev/creating-access-points.html\">Creating access points</a>."
      },
      "VpcConfiguration": {
        "type": "object",
        "required": [
          "vpcId"
        ],
        "properties": {
          "vpcId": {
            "allOf": [
              {
                "$ref": "#/$defs/VpcId"
              },
              {
                "description": " If this field is specified, this access point will only allow connections from the specified VPC ID. "
              }
            ]
          }
        },
        "description": "The proposed virtual private cloud (VPC) configuration for the Amazon S3 access point. VPC configuration does not apply to multi-region access points. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/API_control_VpcConfiguration.html\">VpcConfiguration</a>. "
      },
      "VpcId": {
        "type": "string",
        "pattern": "vpc-([0-9a-f]){8}(([0-9a-f]){9})?"
      },
      "InternetConfiguration": {
        "type": "object",
        "properties": {},
        "description": "This configuration sets the network origin for the Amazon S3 access point or multi-region access point to <code>Internet</code>."
      },
      "SnsTopicConfiguration": {
        "type": "object",
        "properties": {
          "topicPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/SnsTopicPolicy"
              },
              {
                "description": "The JSON policy text that defines who can access an Amazon SNS topic. For more information, see <a href=\"https://docs.aws.amazon.com/sns/latest/dg/sns-access-policy-use-cases.html\">Example cases for Amazon SNS access control</a> in the <i>Amazon SNS Developer Guide</i>."
              }
            ]
          }
        },
        "description": "The proposed access control configuration for an Amazon SNS topic. You can propose a configuration for a new Amazon SNS topic or an existing Amazon SNS topic that you own by specifying the policy. If the configuration is for an existing Amazon SNS topic and you do not specify the Amazon SNS policy, then the access preview uses the existing Amazon SNS policy for the topic. If the access preview is for a new resource and you do not specify the policy, then the access preview assumes an Amazon SNS topic without a policy. To propose deletion of an existing Amazon SNS topic policy, you can specify an empty string for the Amazon SNS policy. For more information, see <a href=\"https://docs.aws.amazon.com/sns/latest/api/API_Topic.html\">Topic</a>."
      },
      "SnsTopicPolicy": {
        "type": "string",
        "minLength": 0,
        "maxLength": 30720
      },
      "SqsQueueConfiguration": {
        "type": "object",
        "properties": {
          "queuePolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/SqsQueuePolicy"
              },
              {
                "description": " The proposed resource policy for the Amazon SQS queue. "
              }
            ]
          }
        },
        "description": "The proposed access control configuration for an Amazon SQS queue. You can propose a configuration for a new Amazon SQS queue or an existing Amazon SQS queue that you own by specifying the Amazon SQS policy. If the configuration is for an existing Amazon SQS queue and you do not specify the Amazon SQS policy, the access preview uses the existing Amazon SQS policy for the queue. If the access preview is for a new resource and you do not specify the policy, the access preview assumes an Amazon SQS queue without a policy. To propose deletion of an existing Amazon SQS queue policy, you can specify an empty string for the Amazon SQS policy. For more information about Amazon SQS policy limits, see <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/quotas-policies.html\">Quotas related to policies</a>."
      },
      "SqsQueuePolicy": {
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "http://access-analyzer.us-east-1.amazonaws.com/access-preview"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**id**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "486": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
