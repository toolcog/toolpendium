{
  "name": "UpdateMonitoring",
  "description": "\n            <p>Updates the monitoring settings for the cluster. You can use this operation to specify which Apache Kafka metrics you want Amazon MSK to send to Amazon CloudWatch. You can also specify settings for open monitoring with Prometheus.</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "clusterArn": {
        "type": "string",
        "description": "\n            <p>The Amazon Resource Name (ARN) that uniquely identifies the cluster.</p>"
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "currentVersion"
        ],
        "properties": {
          "currentVersion": {
            "description": "\n            <p>The version of the MSK cluster to update. Cluster versions aren't simple numbers. You can describe an MSK cluster to find its version. When this update operation is successful, it generates a new cluster version.</p>",
            "type": "string"
          },
          "enhancedMonitoring": {
            "description": "\n            <p>Specifies which metrics are gathered for the MSK cluster. This property has the following possible values: DEFAULT, PER_BROKER, PER_TOPIC_PER_BROKER, and PER_TOPIC_PER_PARTITION. For a list of the metrics associated with each of these levels of monitoring, see <a href=\"https://docs.aws.amazon.com/msk/latest/developerguide/monitoring.html\">Monitoring</a>.</p>",
            "type": "string",
            "enum": [
              "DEFAULT",
              "PER_BROKER",
              "PER_TOPIC_PER_BROKER",
              "PER_TOPIC_PER_PARTITION"
            ]
          },
          "openMonitoring": {
            "description": "\n            <p>JMX and Node monitoring for the MSK cluster.</p>",
            "type": "object",
            "properties": {
              "Prometheus": {
                "allOf": [
                  {
                    "$ref": "#/$defs/PrometheusInfo"
                  },
                  {
                    "xml": {
                      "name": "prometheus"
                    },
                    "description": "\n            <p>Prometheus settings.</p>"
                  }
                ]
              }
            }
          },
          "loggingInfo": {
            "description": "",
            "type": "object",
            "properties": {
              "BrokerLogs": {
                "allOf": [
                  {
                    "$ref": "#/$defs/BrokerLogs"
                  },
                  {
                    "xml": {
                      "name": "brokerLogs"
                    }
                  }
                ]
              }
            }
          }
        }
      }
    },
    "required": [
      "clusterArn",
      "body"
    ],
    "$defs": {
      "PrometheusInfo": {
        "type": "object",
        "properties": {
          "JmxExporter": {
            "allOf": [
              {
                "$ref": "#/$defs/JmxExporterInfo"
              },
              {
                "xml": {
                  "name": "jmxExporter"
                },
                "description": "\n            <p>Indicates whether you want to turn on or turn off the JMX Exporter.</p>"
              }
            ]
          },
          "NodeExporter": {
            "allOf": [
              {
                "$ref": "#/$defs/NodeExporterInfo"
              },
              {
                "xml": {
                  "name": "nodeExporter"
                },
                "description": "\n            <p>Indicates whether you want to turn on or turn off the Node Exporter.</p>"
              }
            ]
          }
        },
        "description": "\n            <p>Prometheus settings.</p>"
      },
      "JmxExporterInfo": {
        "type": "object",
        "required": [
          "EnabledInBroker"
        ],
        "properties": {
          "EnabledInBroker": {
            "allOf": [
              {
                "$ref": "#/$defs/__boolean"
              },
              {
                "xml": {
                  "name": "enabledInBroker"
                },
                "description": "\n            <p>Indicates whether you want to turn on or turn off the JMX Exporter.</p>"
              }
            ]
          }
        },
        "description": "\n            <p>Indicates whether you want to turn on or turn off the JMX Exporter.</p>"
      },
      "__boolean": {
        "type": "boolean"
      },
      "NodeExporterInfo": {
        "type": "object",
        "required": [
          "EnabledInBroker"
        ],
        "properties": {
          "EnabledInBroker": {
            "allOf": [
              {
                "$ref": "#/$defs/__boolean"
              },
              {
                "xml": {
                  "name": "enabledInBroker"
                },
                "description": "\n            <p>Indicates whether you want to turn on or turn off the Node Exporter.</p>"
              }
            ]
          }
        },
        "description": "\n            <p>Indicates whether you want to turn on or turn off the Node Exporter.</p>"
      },
      "BrokerLogs": {
        "type": "object",
        "properties": {
          "CloudWatchLogs": {
            "allOf": [
              {
                "$ref": "#/$defs/CloudWatchLogs"
              },
              {
                "xml": {
                  "name": "cloudWatchLogs"
                }
              }
            ]
          },
          "Firehose": {
            "allOf": [
              {
                "$ref": "#/$defs/Firehose"
              },
              {
                "xml": {
                  "name": "firehose"
                }
              }
            ]
          },
          "S3": {
            "allOf": [
              {
                "$ref": "#/$defs/S3"
              },
              {
                "xml": {
                  "name": "s3"
                }
              }
            ]
          }
        }
      },
      "CloudWatchLogs": {
        "type": "object",
        "required": [
          "Enabled"
        ],
        "properties": {
          "Enabled": {
            "allOf": [
              {
                "$ref": "#/$defs/__boolean"
              },
              {
                "xml": {
                  "name": "enabled"
                }
              }
            ]
          },
          "LogGroup": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "logGroup"
                }
              }
            ]
          }
        }
      },
      "__string": {
        "type": "string"
      },
      "Firehose": {
        "type": "object",
        "required": [
          "Enabled"
        ],
        "properties": {
          "DeliveryStream": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "deliveryStream"
                }
              }
            ]
          },
          "Enabled": {
            "allOf": [
              {
                "$ref": "#/$defs/__boolean"
              },
              {
                "xml": {
                  "name": "enabled"
                }
              }
            ]
          }
        }
      },
      "S3": {
        "type": "object",
        "required": [
          "Enabled"
        ],
        "properties": {
          "Bucket": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "bucket"
                }
              }
            ]
          },
          "Enabled": {
            "allOf": [
              {
                "$ref": "#/$defs/__boolean"
              },
              {
                "xml": {
                  "name": "enabled"
                }
              }
            ]
          },
          "Prefix": {
            "allOf": [
              {
                "$ref": "#/$defs/__string"
              },
              {
                "xml": {
                  "name": "prefix"
                }
              }
            ]
          }
        }
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "http://kafka.us-east-1.amazonaws.com/v1/clusters/{clusterArn}/monitoring"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**ClusterArn**",
            "**ClusterOperationArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
