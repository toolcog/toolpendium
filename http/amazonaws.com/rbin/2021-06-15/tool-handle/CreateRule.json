{
  "name": "CreateRule",
  "description": "Creates a Recycle Bin retention rule. For more information, see <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/recycle-bin-working-with-rules.html#recycle-bin-create-rule\"> Create Recycle Bin retention rules</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "RetentionPeriod",
          "ResourceType"
        ],
        "properties": {
          "RetentionPeriod": {
            "description": "Information about the retention period for which the retention rule is to retain resources.",
            "type": "object",
            "properties": {
              "RetentionPeriodValue": {
                "allOf": [
                  {
                    "$ref": "#/$defs/RetentionPeriodValue"
                  },
                  {
                    "description": "The period value for which the retention rule is to retain resources. The period is measured using the unit specified for <b>RetentionPeriodUnit</b>."
                  }
                ]
              },
              "RetentionPeriodUnit": {
                "allOf": [
                  {
                    "$ref": "#/$defs/RetentionPeriodUnit"
                  },
                  {
                    "description": "The unit of time in which the retention period is measured. Currently, only <code>DAYS</code> is supported."
                  }
                ]
              }
            }
          },
          "Description": {
            "description": "The retention rule description.",
            "type": "string",
            "pattern": "^[\\S ]{0,255}$"
          },
          "Tags": {
            "description": "Information about the tags to assign to the retention rule.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/Tag"
            },
            "minItems": 0,
            "maxItems": 200
          },
          "ResourceType": {
            "description": "The resource type to be retained by the retention rule. Currently, only Amazon EBS snapshots and EBS-backed AMIs are supported. To retain snapshots, specify <code>EBS_SNAPSHOT</code>. To retain EBS-backed AMIs, specify <code>EC2_IMAGE</code>.",
            "type": "string",
            "enum": [
              "EBS_SNAPSHOT",
              "EC2_IMAGE"
            ]
          },
          "ResourceTags": {
            "description": "<p>Specifies the resource tags to use to identify resources that are to be retained by a tag-level retention rule. For tag-level retention rules, only deleted resources, of the specified resource type, that have one or more of the specified tag key and value pairs are retained. If a resource is deleted, but it does not have any of the specified tag key and value pairs, it is immediately deleted without being retained by the retention rule.</p> <p>You can add the same tag key and value pair to a maximum or five retention rules.</p> <p>To create a Region-level retention rule, omit this parameter. A Region-level retention rule does not have any resource tags specified. It retains all deleted resources of the specified resource type in the Region in which the rule is created, even if the resources are not tagged.</p>",
            "type": "array",
            "items": {
              "$ref": "#/$defs/ResourceTag"
            },
            "minItems": 0,
            "maxItems": 50
          },
          "LockConfiguration": {
            "description": "Information about a retention rule lock configuration.",
            "type": "object",
            "properties": {
              "UnlockDelay": {
                "allOf": [
                  {
                    "$ref": "#/$defs/UnlockDelay"
                  },
                  {
                    "description": "Information about the retention rule unlock delay."
                  }
                ]
              }
            }
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "RetentionPeriodValue": {
        "type": "integer",
        "minimum": 1,
        "maximum": 3650
      },
      "RetentionPeriodUnit": {
        "type": "string",
        "enum": [
          "DAYS"
        ]
      },
      "Tag": {
        "type": "object",
        "required": [
          "Key",
          "Value"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "The tag key."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The tag value."
              }
            ]
          }
        },
        "description": "Information about the tags to assign to the retention rule."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "minLength": 1,
        "maxLength": 128
      },
      "TagValue": {
        "type": "string",
        "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:/=+\\-@]*)$",
        "minLength": 0,
        "maxLength": 256
      },
      "ResourceTag": {
        "type": "object",
        "required": [
          "ResourceTagKey"
        ],
        "properties": {
          "ResourceTagKey": {
            "allOf": [
              {
                "$ref": "#/$defs/ResourceTagKey"
              },
              {
                "description": "The tag key."
              }
            ]
          },
          "ResourceTagValue": {
            "allOf": [
              {
                "$ref": "#/$defs/ResourceTagValue"
              },
              {
                "description": "The tag value."
              }
            ]
          }
        },
        "description": "Information about the resource tags used to identify resources that are retained by the retention rule."
      },
      "ResourceTagKey": {
        "type": "string",
        "pattern": "^[\\S\\s]{1,128}$"
      },
      "ResourceTagValue": {
        "type": "string",
        "pattern": "^[\\S\\s]{0,256}$"
      },
      "UnlockDelay": {
        "type": "object",
        "required": [
          "UnlockDelayValue",
          "UnlockDelayUnit"
        ],
        "properties": {
          "UnlockDelayValue": {
            "allOf": [
              {
                "$ref": "#/$defs/UnlockDelayValue"
              },
              {
                "description": "The unlock delay period, measured in the unit specified for <b> UnlockDelayUnit</b>."
              }
            ]
          },
          "UnlockDelayUnit": {
            "allOf": [
              {
                "$ref": "#/$defs/UnlockDelayUnit"
              },
              {
                "description": "The unit of time in which to measure the unlock delay. Currently, the unlock delay can be measure only in days."
              }
            ]
          }
        },
        "description": "Information about the retention rule unlock delay. The unlock delay is the period after which a retention rule can be modified or edited after it has been unlocked by a user with the required permissions. The retention rule can't be modified or deleted during the unlock delay."
      },
      "UnlockDelayValue": {
        "type": "integer",
        "minimum": 7,
        "maximum": 30
      },
      "UnlockDelayUnit": {
        "type": "string",
        "enum": [
          "DAYS"
        ]
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://rbin.us-east-1.amazonaws.com/rules"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "201": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**Identifier**",
            [
              "**RetentionPeriod**: Information about the retention period for which the retention rule is to retain resources.",
              {
                "$ul": [
                  "**RetentionPeriodValue**",
                  "**RetentionPeriodUnit**"
                ]
              }
            ],
            "**Description**",
            "**Tags**",
            "**ResourceType**",
            "**ResourceTags**",
            "**Status**",
            "**LockConfiguration**",
            "**LockState**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
