{
  "name": "SendHeartbeat",
  "description": "Use to get the current status of devices registered on SageMaker Edge Manager.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "type": "object",
        "required": [
          "AgentVersion",
          "DeviceName",
          "DeviceFleetName"
        ],
        "properties": {
          "AgentMetrics": {
            "description": "For internal use. Returns a list of SageMaker Edge Manager agent operating metrics.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/EdgeMetric"
            }
          },
          "Models": {
            "description": "Returns a list of models deployed on the the device.",
            "type": "array",
            "items": {
              "$ref": "#/$defs/Model"
            }
          },
          "AgentVersion": {
            "description": "Returns the version of the agent.",
            "type": "string",
            "pattern": "[a-zA-Z0-9\\ \\_\\.]+",
            "minLength": 1,
            "maxLength": 64
          },
          "DeviceName": {
            "description": "The unique name of the device.",
            "type": "string",
            "pattern": "^[a-zA-Z0-9](-*_*[a-zA-Z0-9])*$",
            "minLength": 1,
            "maxLength": 63
          },
          "DeviceFleetName": {
            "description": "The name of the fleet that the device belongs to.",
            "type": "string",
            "pattern": "^[a-zA-Z0-9](-*_*[a-zA-Z0-9])*$",
            "minLength": 1,
            "maxLength": 63
          },
          "DeploymentResult": {
            "description": "Information about the result of a deployment on an edge device that is registered with SageMaker Edge Manager.",
            "type": "object",
            "properties": {
              "DeploymentName": {
                "allOf": [
                  {
                    "$ref": "#/$defs/EntityName"
                  },
                  {
                    "description": "The name and unique ID of the deployment."
                  }
                ]
              },
              "DeploymentStatus": {
                "allOf": [
                  {
                    "$ref": "#/$defs/EntityName"
                  },
                  {
                    "description": "Returns the bucket error code."
                  }
                ]
              },
              "DeploymentStatusMessage": {
                "allOf": [
                  {
                    "$ref": "#/$defs/String"
                  },
                  {
                    "description": "Returns the detailed error message."
                  }
                ]
              },
              "DeploymentStartTime": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Timestamp"
                  },
                  {
                    "description": "The timestamp of when the deployment was started on the agent."
                  }
                ]
              },
              "DeploymentEndTime": {
                "allOf": [
                  {
                    "$ref": "#/$defs/Timestamp"
                  },
                  {
                    "description": "The timestamp of when the deployment was ended, and the agent got the deployment results."
                  }
                ]
              },
              "DeploymentModels": {
                "allOf": [
                  {
                    "$ref": "#/$defs/DeploymentModels"
                  },
                  {
                    "description": "Returns a list of models deployed on the agent."
                  }
                ]
              }
            }
          }
        }
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "EdgeMetric": {
        "type": "object",
        "properties": {
          "Dimension": {
            "allOf": [
              {
                "$ref": "#/$defs/Dimension"
              },
              {
                "description": "The dimension of metrics published."
              }
            ]
          },
          "MetricName": {
            "allOf": [
              {
                "$ref": "#/$defs/Metric"
              },
              {
                "description": "Returns the name of the metric."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/Value"
              },
              {
                "description": "Returns the value of the metric."
              }
            ]
          },
          "Timestamp": {
            "allOf": [
              {
                "$ref": "#/$defs/Timestamp"
              },
              {
                "description": "Timestamp of when the metric was requested."
              }
            ]
          }
        },
        "description": "Information required for edge device metrics."
      },
      "Dimension": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9](-*[a-zA-Z0-9\\/])*$",
        "minLength": 1,
        "maxLength": 1000
      },
      "Metric": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9](-*[a-zA-Z0-9])*$",
        "minLength": 4,
        "maxLength": 100
      },
      "Value": {
        "type": "number",
        "format": "double"
      },
      "Timestamp": {
        "type": "string",
        "format": "date-time"
      },
      "Model": {
        "type": "object",
        "properties": {
          "ModelName": {
            "allOf": [
              {
                "$ref": "#/$defs/ModelName"
              },
              {
                "description": "The name of the model."
              }
            ]
          },
          "ModelVersion": {
            "allOf": [
              {
                "$ref": "#/$defs/Version"
              },
              {
                "description": "The version of the model."
              }
            ]
          },
          "LatestSampleTime": {
            "allOf": [
              {
                "$ref": "#/$defs/Timestamp"
              },
              {
                "description": "The timestamp of the last data sample taken."
              }
            ]
          },
          "LatestInference": {
            "allOf": [
              {
                "$ref": "#/$defs/Timestamp"
              },
              {
                "description": "The timestamp of the last inference that was made."
              }
            ]
          },
          "ModelMetrics": {
            "allOf": [
              {
                "$ref": "#/$defs/EdgeMetrics"
              },
              {
                "description": "Information required for model metrics."
              }
            ]
          }
        },
        "description": "Information about a model deployed on an edge device that is registered with SageMaker Edge Manager."
      },
      "ModelName": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9](-*[a-zA-Z0-9])*$",
        "minLength": 4,
        "maxLength": 255
      },
      "Version": {
        "type": "string",
        "pattern": "[a-zA-Z0-9\\ \\_\\.]+",
        "minLength": 1,
        "maxLength": 64
      },
      "EdgeMetrics": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/EdgeMetric"
        }
      },
      "EntityName": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9](-*[a-zA-Z0-9])*$",
        "minLength": 1,
        "maxLength": 63
      },
      "String": {
        "type": "string"
      },
      "DeploymentModels": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/DeploymentModel"
        }
      },
      "DeploymentModel": {
        "type": "object",
        "properties": {
          "ModelHandle": {
            "allOf": [
              {
                "$ref": "#/$defs/EntityName"
              },
              {
                "description": "The unique handle of the model."
              }
            ]
          },
          "ModelName": {
            "allOf": [
              {
                "$ref": "#/$defs/ModelName"
              },
              {
                "description": "The name of the model."
              }
            ]
          },
          "ModelVersion": {
            "allOf": [
              {
                "$ref": "#/$defs/Version"
              },
              {
                "description": "The version of the model."
              }
            ]
          },
          "DesiredState": {
            "allOf": [
              {
                "$ref": "#/$defs/ModelState"
              },
              {
                "description": "The desired state of the model."
              }
            ]
          },
          "State": {
            "allOf": [
              {
                "$ref": "#/$defs/ModelState"
              },
              {
                "description": "Returns the current state of the model."
              }
            ]
          },
          "Status": {
            "allOf": [
              {
                "$ref": "#/$defs/DeploymentStatus"
              },
              {
                "description": "Returns the deployment status of the model."
              }
            ]
          },
          "StatusReason": {
            "allOf": [
              {
                "$ref": "#/$defs/String"
              },
              {
                "description": "Returns the error message for the deployment status result."
              }
            ]
          },
          "RollbackFailureReason": {
            "allOf": [
              {
                "$ref": "#/$defs/String"
              },
              {
                "description": "Returns the error message if there is a rollback."
              }
            ]
          }
        },
        "description": "<p/>"
      },
      "ModelState": {
        "type": "string",
        "enum": [
          "DEPLOY",
          "UNDEPLOY"
        ]
      },
      "DeploymentStatus": {
        "type": "string",
        "enum": [
          "SUCCESS",
          "FAIL"
        ]
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://edge.sagemaker.us-east-1.amazonaws.com/SendHeartbeat"
    },
    "headers": {
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
