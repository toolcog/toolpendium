{
  "name": "UpdateDistribution",
  "description": "<p>Updates an existing Amazon Lightsail content delivery network (CDN) distribution.</p> <p>Use this action to update the configuration of your existing distribution.</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "Lightsail_20161128.UpdateDistribution"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/UpdateDistributionRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "UpdateDistributionRequest": {
        "type": "object",
        "required": [
          "distributionName"
        ],
        "title": "UpdateDistributionRequest",
        "properties": {
          "distributionName": {
            "allOf": [
              {
                "$ref": "#/$defs/ResourceName"
              },
              {
                "description": "<p>The name of the distribution to update.</p> <p>Use the <code>GetDistributions</code> action to get a list of distribution names that you can specify.</p>"
              }
            ]
          },
          "origin": {
            "allOf": [
              {
                "$ref": "#/$defs/InputOrigin"
              },
              {
                "description": "<p>An object that describes the origin resource for the distribution, such as a Lightsail instance, bucket, or load balancer.</p> <p>The distribution pulls, caches, and serves content from the origin.</p>"
              }
            ]
          },
          "defaultCacheBehavior": {
            "allOf": [
              {
                "$ref": "#/$defs/CacheBehavior"
              },
              {
                "description": "An object that describes the default cache behavior for the distribution."
              }
            ]
          },
          "cacheBehaviorSettings": {
            "allOf": [
              {
                "$ref": "#/$defs/CacheSettings"
              },
              {
                "description": "<p>An object that describes the cache behavior settings for the distribution.</p> <note> <p>The <code>cacheBehaviorSettings</code> specified in your <code>UpdateDistributionRequest</code> will replace your distribution's existing settings.</p> </note>"
              }
            ]
          },
          "cacheBehaviors": {
            "allOf": [
              {
                "$ref": "#/$defs/CacheBehaviorList"
              },
              {
                "description": "An array of objects that describe the per-path cache behavior for the distribution."
              }
            ]
          },
          "isEnabled": {
            "allOf": [
              {
                "$ref": "#/$defs/boolean"
              },
              {
                "description": "Indicates whether to enable the distribution."
              }
            ]
          }
        }
      },
      "ResourceName": {
        "type": "string",
        "pattern": "\\w[\\w\\-]*\\w"
      },
      "InputOrigin": {
        "type": "object",
        "properties": {
          "name": {
            "allOf": [
              {
                "$ref": "#/$defs/ResourceName"
              },
              {
                "description": "The name of the origin resource."
              }
            ]
          },
          "regionName": {
            "allOf": [
              {
                "$ref": "#/$defs/RegionName"
              },
              {
                "description": "The AWS Region name of the origin resource."
              }
            ]
          },
          "protocolPolicy": {
            "allOf": [
              {
                "$ref": "#/$defs/OriginProtocolPolicyEnum"
              },
              {
                "description": "The protocol that your Amazon Lightsail distribution uses when establishing a connection with your origin to pull content."
              }
            ]
          }
        },
        "description": "<p>Describes the origin resource of an Amazon Lightsail content delivery network (CDN) distribution.</p> <p>An origin can be a Lightsail instance, bucket, or load balancer. A distribution pulls content from an origin, caches it, and serves it to viewers via a worldwide network of edge servers.</p>"
      },
      "RegionName": {
        "type": "string",
        "enum": [
          "us-east-1",
          "us-east-2",
          "us-west-1",
          "us-west-2",
          "eu-west-1",
          "eu-west-2",
          "eu-west-3",
          "eu-central-1",
          "ca-central-1",
          "ap-south-1",
          "ap-southeast-1",
          "ap-southeast-2",
          "ap-northeast-1",
          "ap-northeast-2",
          "eu-north-1"
        ]
      },
      "OriginProtocolPolicyEnum": {
        "type": "string",
        "enum": [
          "http-only",
          "https-only"
        ]
      },
      "CacheBehavior": {
        "type": "object",
        "properties": {
          "behavior": {
            "allOf": [
              {
                "$ref": "#/$defs/BehaviorEnum"
              },
              {
                "description": "<p>The cache behavior of the distribution.</p> <p>The following cache behaviors can be specified:</p> <ul> <li> <p> <b> <code>cache</code> </b> - This option is best for static sites. When specified, your distribution caches and serves your entire website as static content. This behavior is ideal for websites with static content that doesn't change depending on who views it, or for websites that don't use cookies, headers, or query strings to personalize content.</p> </li> <li> <p> <b> <code>dont-cache</code> </b> - This option is best for sites that serve a mix of static and dynamic content. When specified, your distribution caches and serve only the content that is specified in the distribution's <code>CacheBehaviorPerPath</code> parameter. This behavior is ideal for websites or web applications that use cookies, headers, and query strings to personalize content for individual users.</p> </li> </ul>"
              }
            ]
          }
        },
        "description": "Describes the default cache behavior of an Amazon Lightsail content delivery network (CDN) distribution."
      },
      "BehaviorEnum": {
        "type": "string",
        "enum": [
          "dont-cache",
          "cache"
        ]
      },
      "CacheSettings": {
        "type": "object",
        "properties": {
          "defaultTTL": {
            "allOf": [
              {
                "$ref": "#/$defs/long"
              },
              {
                "description": "<p>The default amount of time that objects stay in the distribution's cache before the distribution forwards another request to the origin to determine whether the content has been updated.</p> <note> <p>The value specified applies only when the origin does not add HTTP headers such as <code>Cache-Control max-age</code>, <code>Cache-Control s-maxage</code>, and <code>Expires</code> to objects.</p> </note>"
              }
            ]
          },
          "minimumTTL": {
            "allOf": [
              {
                "$ref": "#/$defs/long"
              },
              {
                "description": "<p>The minimum amount of time that objects stay in the distribution's cache before the distribution forwards another request to the origin to determine whether the object has been updated.</p> <p>A value of <code>0</code> must be specified for <code>minimumTTL</code> if the distribution is configured to forward all headers to the origin.</p>"
              }
            ]
          },
          "maximumTTL": {
            "allOf": [
              {
                "$ref": "#/$defs/long"
              },
              {
                "description": "<p>The maximum amount of time that objects stay in the distribution's cache before the distribution forwards another request to the origin to determine whether the object has been updated.</p> <p>The value specified applies only when the origin adds HTTP headers such as <code>Cache-Control max-age</code>, <code>Cache-Control s-maxage</code>, and <code>Expires</code> to objects.</p>"
              }
            ]
          },
          "allowedHTTPMethods": {
            "allOf": [
              {
                "$ref": "#/$defs/NonEmptyString"
              },
              {
                "description": "<p>The HTTP methods that are processed and forwarded to the distribution's origin.</p> <p>You can specify the following options:</p> <ul> <li> <p> <code>GET,HEAD</code> - The distribution forwards the <code>GET</code> and <code>HEAD</code> methods.</p> </li> <li> <p> <code>GET,HEAD,OPTIONS</code> - The distribution forwards the <code>GET</code>, <code>HEAD</code>, and <code>OPTIONS</code> methods.</p> </li> <li> <p> <code>GET,HEAD,OPTIONS,PUT,PATCH,POST,DELETE</code> - The distribution forwards the <code>GET</code>, <code>HEAD</code>, <code>OPTIONS</code>, <code>PUT</code>, <code>PATCH</code>, <code>POST</code>, and <code>DELETE</code> methods.</p> </li> </ul> <p>If you specify the third option, you might need to restrict access to your distribution's origin so users can't perform operations that you don't want them to. For example, you might not want users to have permission to delete objects from your origin.</p>"
              }
            ]
          },
          "cachedHTTPMethods": {
            "allOf": [
              {
                "$ref": "#/$defs/NonEmptyString"
              },
              {
                "description": "<p>The HTTP method responses that are cached by your distribution.</p> <p>You can specify the following options:</p> <ul> <li> <p> <code>GET,HEAD</code> - The distribution caches responses to the <code>GET</code> and <code>HEAD</code> methods.</p> </li> <li> <p> <code>GET,HEAD,OPTIONS</code> - The distribution caches responses to the <code>GET</code>, <code>HEAD</code>, and <code>OPTIONS</code> methods.</p> </li> </ul>"
              }
            ]
          },
          "forwardedCookies": {
            "allOf": [
              {
                "$ref": "#/$defs/CookieObject"
              },
              {
                "description": "An object that describes the cookies that are forwarded to the origin. Your content is cached based on the cookies that are forwarded."
              }
            ]
          },
          "forwardedHeaders": {
            "allOf": [
              {
                "$ref": "#/$defs/HeaderObject"
              },
              {
                "description": "An object that describes the headers that are forwarded to the origin. Your content is cached based on the headers that are forwarded."
              }
            ]
          },
          "forwardedQueryStrings": {
            "allOf": [
              {
                "$ref": "#/$defs/QueryStringObject"
              },
              {
                "description": "An object that describes the query strings that are forwarded to the origin. Your content is cached based on the query strings that are forwarded."
              }
            ]
          }
        },
        "description": "<p>Describes the cache settings of an Amazon Lightsail content delivery network (CDN) distribution.</p> <p>These settings apply only to your distribution's <code>cacheBehaviors</code> (including the <code>defaultCacheBehavior</code>) that have a <code>behavior</code> of <code>cache</code>.</p>"
      },
      "long": {
        "type": "integer"
      },
      "NonEmptyString": {
        "type": "string",
        "pattern": ".*\\S.*"
      },
      "CookieObject": {
        "type": "object",
        "properties": {
          "option": {
            "allOf": [
              {
                "$ref": "#/$defs/ForwardValues"
              },
              {
                "description": "Specifies which cookies to forward to the distribution's origin for a cache behavior: <code>all</code>, <code>none</code>, or <code>allow-list</code> to forward only the cookies specified in the <code>cookiesAllowList</code> parameter."
              }
            ]
          },
          "cookiesAllowList": {
            "allOf": [
              {
                "$ref": "#/$defs/StringList"
              },
              {
                "description": "The specific cookies to forward to your distribution's origin."
              }
            ]
          }
        },
        "description": "<p>Describes whether an Amazon Lightsail content delivery network (CDN) distribution forwards cookies to the origin and, if so, which ones.</p> <p>For the cookies that you specify, your distribution caches separate versions of the specified content based on the cookie values in viewer requests.</p>"
      },
      "ForwardValues": {
        "type": "string",
        "enum": [
          "none",
          "allow-list",
          "all"
        ]
      },
      "StringList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/string"
        }
      },
      "string": {
        "type": "string"
      },
      "HeaderObject": {
        "type": "object",
        "properties": {
          "option": {
            "allOf": [
              {
                "$ref": "#/$defs/ForwardValues"
              },
              {
                "description": "<p>The headers that you want your distribution to forward to your origin and base caching on.</p> <p>You can configure your distribution to do one of the following:</p> <ul> <li> <p> <b> <code>all</code> </b> - Forward all headers to your origin.</p> </li> <li> <p> <b> <code>none</code> </b> - Forward only the default headers.</p> </li> <li> <p> <b> <code>allow-list</code> </b> - Forward only the headers you specify using the <code>headersAllowList</code> parameter.</p> </li> </ul>"
              }
            ]
          },
          "headersAllowList": {
            "allOf": [
              {
                "$ref": "#/$defs/HeaderForwardList"
              },
              {
                "description": "The specific headers to forward to your distribution's origin."
              }
            ]
          }
        },
        "description": "<p>Describes the request headers that a Lightsail distribution bases caching on.</p> <p>For the headers that you specify, your distribution caches separate versions of the specified content based on the header values in viewer requests. For example, suppose viewer requests for <code>logo.jpg</code> contain a custom <code>product</code> header that has a value of either <code>acme</code> or <code>apex</code>, and you configure your distribution to cache your content based on values in the <code>product</code> header. Your distribution forwards the <code>product</code> header to the origin and caches the response from the origin once for each header value. </p>"
      },
      "HeaderForwardList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/HeaderEnum"
        }
      },
      "HeaderEnum": {
        "type": "string",
        "enum": [
          "Accept",
          "Accept-Charset",
          "Accept-Datetime",
          "Accept-Encoding",
          "Accept-Language",
          "Authorization",
          "CloudFront-Forwarded-Proto",
          "CloudFront-Is-Desktop-Viewer",
          "CloudFront-Is-Mobile-Viewer",
          "CloudFront-Is-SmartTV-Viewer",
          "CloudFront-Is-Tablet-Viewer",
          "CloudFront-Viewer-Country",
          "Host",
          "Origin",
          "Referer"
        ]
      },
      "QueryStringObject": {
        "type": "object",
        "properties": {
          "option": {
            "allOf": [
              {
                "$ref": "#/$defs/boolean"
              },
              {
                "description": "Indicates whether the distribution forwards and caches based on query strings."
              }
            ]
          },
          "queryStringsAllowList": {
            "allOf": [
              {
                "$ref": "#/$defs/StringList"
              },
              {
                "description": "<p>The specific query strings that the distribution forwards to the origin.</p> <p>Your distribution will cache content based on the specified query strings.</p> <p>If the <code>option</code> parameter is true, then your distribution forwards all query strings, regardless of what you specify using the <code>queryStringsAllowList</code> parameter.</p>"
              }
            ]
          }
        },
        "description": "<p>Describes the query string parameters that an Amazon Lightsail content delivery network (CDN) distribution to bases caching on.</p> <p>For the query strings that you specify, your distribution caches separate versions of the specified content based on the query string values in viewer requests.</p>"
      },
      "boolean": {
        "type": "boolean"
      },
      "CacheBehaviorList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/CacheBehaviorPerPath"
        }
      },
      "CacheBehaviorPerPath": {
        "type": "object",
        "properties": {
          "path": {
            "allOf": [
              {
                "$ref": "#/$defs/string"
              },
              {
                "description": "<p>The path to a directory or file to cached, or not cache. Use an asterisk symbol to specify wildcard directories (<code>path/to/assets/*</code>), and file types (<code>*.html, *jpg, *js</code>). Directories and file paths are case-sensitive.</p> <p>Examples:</p> <ul> <li> <p>Specify the following to cache all files in the document root of an Apache web server running on a Lightsail instance.</p> <p> <code>var/www/html/</code> </p> </li> <li> <p>Specify the following file to cache only the index page in the document root of an Apache web server.</p> <p> <code>var/www/html/index.html</code> </p> </li> <li> <p>Specify the following to cache only the .html files in the document root of an Apache web server.</p> <p> <code>var/www/html/*.html</code> </p> </li> <li> <p>Specify the following to cache only the .jpg, .png, and .gif files in the images sub-directory of the document root of an Apache web server.</p> <p> <code>var/www/html/images/*.jpg</code> </p> <p> <code>var/www/html/images/*.png</code> </p> <p> <code>var/www/html/images/*.gif</code> </p> <p>Specify the following to cache all files in the images sub-directory of the document root of an Apache web server.</p> <p> <code>var/www/html/images/</code> </p> </li> </ul>"
              }
            ]
          },
          "behavior": {
            "allOf": [
              {
                "$ref": "#/$defs/BehaviorEnum"
              },
              {
                "description": "<p>The cache behavior for the specified path.</p> <p>You can specify one of the following per-path cache behaviors:</p> <ul> <li> <p> <b> <code>cache</code> </b> - This behavior caches the specified path. </p> </li> <li> <p> <b> <code>dont-cache</code> </b> - This behavior doesn't cache the specified path. </p> </li> </ul>"
              }
            ]
          }
        },
        "description": "<p>Describes the per-path cache behavior of an Amazon Lightsail content delivery network (CDN) distribution.</p> <p>A per-path cache behavior is used to override, or add an exception to, the default cache behavior of a distribution. For example, if the <code>cacheBehavior</code> is set to <code>cache</code>, then a per-path cache behavior can be used to specify a directory, file, or file type that your distribution will cache. Alternately, if the distribution's <code>cacheBehavior</code> is <code>dont-cache</code>, then a per-path cache behavior can be used to specify a directory, file, or file type that your distribution will not cache.</p>"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://lightsail.us-east-1.amazonaws.com/#X-Amz-Target=Lightsail_20161128.UpdateDistribution"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**operation**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "482": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "483": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "484": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "485": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
