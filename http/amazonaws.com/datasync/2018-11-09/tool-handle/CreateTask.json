{
  "name": "CreateTask",
  "description": "<p>Configures a task, which defines where and how DataSync transfers your data.</p> <p>A task includes a source location, a destination location, and the preferences for how and when you want to transfer your data (such as bandwidth limits, scheduling, among other options).</p> <important> <p>If you're planning to transfer data to or from an Amazon S3 location, review <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#create-s3-location-s3-requests\">how DataSync can affect your S3 request charges</a> and the <a href=\"http://aws.amazon.com/datasync/pricing/\">DataSync pricing page</a> before you begin.</p> </important>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "FmrsService.CreateTask"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/CreateTaskRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "CreateTaskRequest": {
        "type": "object",
        "required": [
          "SourceLocationArn",
          "DestinationLocationArn"
        ],
        "title": "CreateTaskRequest",
        "properties": {
          "SourceLocationArn": {
            "allOf": [
              {
                "$ref": "#/$defs/LocationArn"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the source location for the task."
              }
            ]
          },
          "DestinationLocationArn": {
            "allOf": [
              {
                "$ref": "#/$defs/LocationArn"
              },
              {
                "description": "The Amazon Resource Name (ARN) of an Amazon Web Services storage resource's location. "
              }
            ]
          },
          "CloudWatchLogGroupArn": {
            "allOf": [
              {
                "$ref": "#/$defs/LogGroupArn"
              },
              {
                "description": "The Amazon Resource Name (ARN) of the Amazon CloudWatch log group that is used to monitor and log events in the task. "
              }
            ]
          },
          "Name": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The name of a task. This value is a text reference that is used to identify the task in the console. "
              }
            ]
          },
          "Options": {
            "allOf": [
              {
                "$ref": "#/$defs/Options"
              },
              {
                "description": "<p>Specifies the configuration options for a task. Some options include preserving file or object metadata and verifying data integrity.</p> <p>You can also override these options before starting an individual run of a task (also known as a <i>task execution</i>). For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_StartTaskExecution.html\">StartTaskExecution</a>.</p>"
              }
            ]
          },
          "Excludes": {
            "allOf": [
              {
                "$ref": "#/$defs/FilterList"
              },
              {
                "description": "Specifies a list of filter rules that exclude specific data during your transfer. For more information and examples, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/filtering.html\">Filtering data transferred by DataSync</a>."
              }
            ]
          },
          "Schedule": {
            "allOf": [
              {
                "$ref": "#/$defs/TaskSchedule"
              },
              {
                "description": "Specifies a schedule used to periodically transfer files from a source to a destination location. The schedule should be specified in UTC time. For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/task-scheduling.html\">Scheduling your task</a>."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/InputTagList"
              },
              {
                "description": "<p>Specifies the tags that you want to apply to the Amazon Resource Name (ARN) representing the task.</p> <p> <i>Tags</i> are key-value pairs that help you manage, filter, and search for your DataSync resources.</p>"
              }
            ]
          },
          "Includes": {
            "allOf": [
              {
                "$ref": "#/$defs/FilterList"
              },
              {
                "description": "Specifies a list of filter rules that include specific data during your transfer. For more information and examples, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/filtering.html\">Filtering data transferred by DataSync</a>."
              }
            ]
          }
        },
        "description": "CreateTaskRequest"
      },
      "LocationArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):datasync:[a-z\\-0-9]+:[0-9]{12}:location/loc-[0-9a-z]{17}$",
        "maxLength": 128
      },
      "LogGroupArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):logs:[a-z\\-0-9]+:[0-9]{12}:log-group:([^:\\*]*)(:\\*)?$",
        "maxLength": 562
      },
      "TagValue": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:@/-]+$",
        "minLength": 1,
        "maxLength": 256
      },
      "Options": {
        "type": "object",
        "properties": {
          "VerifyMode": {
            "allOf": [
              {
                "$ref": "#/$defs/VerifyMode"
              },
              {
                "description": "<p>Specifies how and when DataSync checks the integrity of your data during a transfer. </p> <p>Default value: <code>POINT_IN_TIME_CONSISTENT</code> </p> <p> <code>ONLY_FILES_TRANSFERRED</code> (recommended): DataSync calculates the checksum of transferred files and metadata at the source location. At the end of the transfer, DataSync then compares this checksum to the checksum calculated on those files at the destination.</p> <p>We recommend this option when transferring to S3 Glacier Flexible Retrieval or S3 Glacier Deep Archive storage classes. For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#using-storage-classes\">Storage class considerations with Amazon S3 locations</a>.</p> <p> <code>POINT_IN_TIME_CONSISTENT</code>: At the end of the transfer, DataSync scans the entire source and destination to verify that both locations are fully synchronized.</p> <p>You can't use this option when transferring to S3 Glacier Flexible Retrieval or S3 Glacier Deep Archive storage classes. For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#using-storage-classes\">Storage class considerations with Amazon S3 locations</a>.</p> <p> <code>NONE</code>: DataSync doesn't run additional verification at the end of the transfer. All data transmissions are still integrity-checked with checksum verification during the transfer.</p>"
              }
            ]
          },
          "OverwriteMode": {
            "allOf": [
              {
                "$ref": "#/$defs/OverwriteMode"
              },
              {
                "description": "<p>Specifies whether data at the destination location should be overwritten or preserved. If set to <code>NEVER</code>, a destination file for example will not be replaced by a source file (even if the destination file differs from the source file). If you modify files in the destination and you sync the files, you can use this value to protect against overwriting those changes. </p> <p>Some storage classes have specific behaviors that can affect your Amazon S3 storage cost. For detailed information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#using-storage-classes\">Considerations when working with Amazon S3 storage classes in DataSync</a>.</p>"
              }
            ]
          },
          "Atime": {
            "allOf": [
              {
                "$ref": "#/$defs/Atime"
              },
              {
                "description": "<p>Specifies whether to preserve metadata indicating the last time a file was read or written to. If you set <code>Atime</code> to <code>BEST_EFFORT</code>, DataSync attempts to preserve the original <code>Atime</code> attribute on all source files (that is, the version before the <code>PREPARING</code> phase of the task execution).</p> <note> <p>The behavior of <code>Atime</code> isn't fully standard across platforms, so DataSync can only do this on a best-effort basis.</p> </note> <p>Default value: <code>BEST_EFFORT</code> </p> <p> <code>BEST_EFFORT</code>: Attempt to preserve the per-file <code>Atime</code> value (recommended).</p> <p> <code>NONE</code>: Ignore <code>Atime</code>.</p> <note> <p>If <code>Atime</code> is set to <code>BEST_EFFORT</code>, <code>Mtime</code> must be set to <code>PRESERVE</code>. </p> <p>If <code>Atime</code> is set to <code>NONE</code>, <code>Mtime</code> must also be <code>NONE</code>. </p> </note>"
              }
            ]
          },
          "Mtime": {
            "allOf": [
              {
                "$ref": "#/$defs/Mtime"
              },
              {
                "description": "<p>Specifies whether to preserve metadata indicating the last time that a file was written to before the <code>PREPARING</code> phase of your task execution. This option is required when you need to run the a task more than once.</p> <p>Default Value: <code>PRESERVE</code> </p> <p> <code>PRESERVE</code>: Preserve original <code>Mtime</code> (recommended)</p> <p> <code>NONE</code>: Ignore <code>Mtime</code>. </p> <note> <p>If <code>Mtime</code> is set to <code>PRESERVE</code>, <code>Atime</code> must be set to <code>BEST_EFFORT</code>.</p> <p>If <code>Mtime</code> is set to <code>NONE</code>, <code>Atime</code> must also be set to <code>NONE</code>. </p> </note>"
              }
            ]
          },
          "Uid": {
            "allOf": [
              {
                "$ref": "#/$defs/Uid"
              },
              {
                "description": "<p>Specifies the POSIX user ID (UID) of the file's owner.</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/special-files.html#metadata-copied\">Metadata copied by DataSync</a>.</p> <p>Default value: <code>INT_VALUE</code>. This preserves the integer value of the ID.</p> <p> <code>INT_VALUE</code>: Preserve the integer value of UID and group ID (GID) (recommended).</p> <p> <code>NONE</code>: Ignore UID and GID. </p>"
              }
            ]
          },
          "Gid": {
            "allOf": [
              {
                "$ref": "#/$defs/Gid"
              },
              {
                "description": "<p>Specifies the POSIX group ID (GID) of the file's owners.</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/special-files.html#metadata-copied\">Metadata copied by DataSync</a>.</p> <p>Default value: <code>INT_VALUE</code>. This preserves the integer value of the ID.</p> <p> <code>INT_VALUE</code>: Preserve the integer value of user ID (UID) and GID (recommended).</p> <p> <code>NONE</code>: Ignore UID and GID.</p>"
              }
            ]
          },
          "PreserveDeletedFiles": {
            "allOf": [
              {
                "$ref": "#/$defs/PreserveDeletedFiles"
              },
              {
                "description": "<p>Specifies whether files in the destination location that don't exist in the source should be preserved. This option can affect your Amazon S3 storage cost. If your task deletes objects, you might incur minimum storage duration charges for certain storage classes. For detailed information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#using-storage-classes\">Considerations when working with Amazon S3 storage classes in DataSync</a>.</p> <p>Default value: <code>PRESERVE</code> </p> <p> <code>PRESERVE</code>: Ignore such destination files (recommended). </p> <p> <code>REMOVE</code>: Delete destination files that aren’t present in the source.</p> <note> <p>If you set this parameter to <code>REMOVE</code>, you can't set <code>TransferMode</code> to <code>ALL</code>. When you transfer all data, DataSync doesn't scan your destination location and doesn't know what to delete.</p> </note>"
              }
            ]
          },
          "PreserveDevices": {
            "allOf": [
              {
                "$ref": "#/$defs/PreserveDevices"
              },
              {
                "description": "<p>Specifies whether DataSync should preserve the metadata of block and character devices in the source location and recreate the files with that device name and metadata on the destination. DataSync copies only the name and metadata of such devices.</p> <note> <p>DataSync can't copy the actual contents of these devices because they're nonterminal and don't return an end-of-file (EOF) marker.</p> </note> <p>Default value: <code>NONE</code> </p> <p> <code>NONE</code>: Ignore special devices (recommended). </p> <p> <code>PRESERVE</code>: Preserve character and block device metadata. This option currently isn't supported for Amazon EFS. </p>"
              }
            ]
          },
          "PosixPermissions": {
            "allOf": [
              {
                "$ref": "#/$defs/PosixPermissions"
              },
              {
                "description": "<p>Specifies which users or groups can access a file for a specific purpose such as reading, writing, or execution of the file.</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/special-files.html#metadata-copied\">Metadata copied by DataSync</a>.</p> <p>Default value: <code>PRESERVE</code> </p> <p> <code>PRESERVE</code>: Preserve POSIX-style permissions (recommended).</p> <p> <code>NONE</code>: Ignore permissions. </p> <note> <p>DataSync can preserve extant permissions of a source location.</p> </note>"
              }
            ]
          },
          "BytesPerSecond": {
            "allOf": [
              {
                "$ref": "#/$defs/BytesPerSecond"
              },
              {
                "description": "Limits the bandwidth used by a DataSync task. For example, if you want DataSync to use a maximum of 1 MB, set this value to <code>1048576</code> (<code>=1024*1024</code>)."
              }
            ]
          },
          "TaskQueueing": {
            "allOf": [
              {
                "$ref": "#/$defs/TaskQueueing"
              },
              {
                "description": "Specifies whether your transfer tasks should be put into a queue during certain scenarios when <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/run-task.html#running-multiple-tasks\">running multiple tasks</a>. This is <code>ENABLED</code> by default."
              }
            ]
          },
          "LogLevel": {
            "allOf": [
              {
                "$ref": "#/$defs/LogLevel"
              },
              {
                "description": "<p>Specifies the type of logs that DataSync publishes to a Amazon CloudWatch Logs log group. To specify the log group, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateTask.html#DataSync-CreateTask-request-CloudWatchLogGroupArn\">CloudWatchLogGroupArn</a>.</p> <p>If you set <code>LogLevel</code> to <code>OFF</code>, no logs are published. <code>BASIC</code> publishes logs on errors for individual files transferred. <code>TRANSFER</code> publishes logs for every file or object that is transferred and integrity checked.</p>"
              }
            ]
          },
          "TransferMode": {
            "allOf": [
              {
                "$ref": "#/$defs/TransferMode"
              },
              {
                "description": "<p>Determines whether DataSync transfers only the data and metadata that differ between the source and the destination location or transfers all the content from the source (without comparing what's in the destination).</p> <p> <code>CHANGED</code>: DataSync copies only data or metadata that is new or different content from the source location to the destination location.</p> <p> <code>ALL</code>: DataSync copies all source location content to the destination (without comparing what's in the destination).</p>"
              }
            ]
          },
          "SecurityDescriptorCopyFlags": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbSecurityDescriptorCopyFlags"
              },
              {
                "description": "<p>Specifies which components of the SMB security descriptor are copied from source to destination objects. </p> <p>This value is only used for transfers between SMB and Amazon FSx for Windows File Server locations or between two FSx for Windows File Server locations. For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/special-files.html\">how DataSync handles metadata</a>.</p> <p>Default value: <code>OWNER_DACL</code> </p> <p> <code>OWNER_DACL</code>: For each copied object, DataSync copies the following metadata:</p> <ul> <li> <p>The object owner.</p> </li> <li> <p>NTFS discretionary access control lists (DACLs), which determine whether to grant access to an object.</p> <p>DataSync won't copy NTFS system access control lists (SACLs) with this option.</p> </li> </ul> <p> <code>OWNER_DACL_SACL</code>: For each copied object, DataSync copies the following metadata:</p> <ul> <li> <p>The object owner.</p> </li> <li> <p>NTFS discretionary access control lists (DACLs), which determine whether to grant access to an object.</p> </li> <li> <p>SACLs, which are used by administrators to log attempts to access a secured object.</p> <p>Copying SACLs requires granting additional permissions to the Windows user that DataSync uses to access your SMB location. For information about choosing a user that ensures sufficient permissions to files, folders, and metadata, see <a href=\"create-smb-location.html#SMBuser\">user</a>.</p> </li> </ul> <p> <code>NONE</code>: None of the SMB security descriptor components are copied. Destination objects are owned by the user that was provided for accessing the destination location. DACLs and SACLs are set based on the destination server’s configuration. </p>"
              }
            ]
          },
          "ObjectTags": {
            "allOf": [
              {
                "$ref": "#/$defs/ObjectTags"
              },
              {
                "description": "<p>Specifies whether object tags are preserved when transferring between object storage systems. If you want your DataSync task to ignore object tags, specify the <code>NONE</code> value.</p> <p>Default Value: <code>PRESERVE</code> </p>"
              }
            ]
          }
        },
        "description": "<p>Configures your DataSync task settings. These options include how DataSync handles files, objects, and their associated metadata. You also can specify how DataSync verifies data integrity, set bandwidth limits for your task, among other options.</p> <p>Each task setting has a default value. Unless you need to, you don't have to configure any of these <code>Options</code> before starting your task.</p>"
      },
      "VerifyMode": {
        "type": "string",
        "enum": [
          "POINT_IN_TIME_CONSISTENT",
          "ONLY_FILES_TRANSFERRED",
          "NONE"
        ]
      },
      "OverwriteMode": {
        "type": "string",
        "enum": [
          "ALWAYS",
          "NEVER"
        ]
      },
      "Atime": {
        "type": "string",
        "enum": [
          "NONE",
          "BEST_EFFORT"
        ]
      },
      "Mtime": {
        "type": "string",
        "enum": [
          "NONE",
          "PRESERVE"
        ]
      },
      "Uid": {
        "type": "string",
        "enum": [
          "NONE",
          "INT_VALUE",
          "NAME",
          "BOTH"
        ]
      },
      "Gid": {
        "type": "string",
        "enum": [
          "NONE",
          "INT_VALUE",
          "NAME",
          "BOTH"
        ]
      },
      "PreserveDeletedFiles": {
        "type": "string",
        "enum": [
          "PRESERVE",
          "REMOVE"
        ]
      },
      "PreserveDevices": {
        "type": "string",
        "enum": [
          "NONE",
          "PRESERVE"
        ]
      },
      "PosixPermissions": {
        "type": "string",
        "enum": [
          "NONE",
          "PRESERVE"
        ]
      },
      "BytesPerSecond": {
        "type": "integer",
        "minimum": -1
      },
      "TaskQueueing": {
        "type": "string",
        "enum": [
          "ENABLED",
          "DISABLED"
        ]
      },
      "LogLevel": {
        "type": "string",
        "enum": [
          "OFF",
          "BASIC",
          "TRANSFER"
        ]
      },
      "TransferMode": {
        "type": "string",
        "enum": [
          "CHANGED",
          "ALL"
        ]
      },
      "SmbSecurityDescriptorCopyFlags": {
        "type": "string",
        "enum": [
          "NONE",
          "OWNER_DACL",
          "OWNER_DACL_SACL"
        ]
      },
      "ObjectTags": {
        "type": "string",
        "enum": [
          "PRESERVE",
          "NONE"
        ]
      },
      "FilterList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/FilterRule"
        },
        "minItems": 0,
        "maxItems": 1
      },
      "FilterRule": {
        "type": "object",
        "properties": {
          "FilterType": {
            "allOf": [
              {
                "$ref": "#/$defs/FilterType"
              },
              {
                "description": "The type of filter rule to apply. DataSync only supports the SIMPLE_PATTERN rule type."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/FilterValue"
              },
              {
                "description": "<p>A single filter string that consists of the patterns to include or exclude. The patterns are delimited by \"|\" (that is, a pipe), for example: <code>/folder1|/folder2</code> </p> <p> </p>"
              }
            ]
          }
        },
        "description": "Specifies which files, folders, and objects to include or exclude when transferring files from source to destination."
      },
      "FilterType": {
        "type": "string",
        "enum": [
          "SIMPLE_PATTERN"
        ],
        "pattern": "^[A-Z0-9_]+$",
        "maxLength": 128
      },
      "FilterValue": {
        "type": "string",
        "pattern": "^[^\\x00]+$",
        "maxLength": 102400
      },
      "TaskSchedule": {
        "type": "object",
        "required": [
          "ScheduleExpression"
        ],
        "properties": {
          "ScheduleExpression": {
            "allOf": [
              {
                "$ref": "#/$defs/ScheduleExpressionCron"
              },
              {
                "description": "A cron expression that specifies when DataSync initiates a scheduled transfer from a source to a destination location. "
              }
            ]
          }
        },
        "description": "Specifies the schedule you want your task to use for repeated executions. For more information, see <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html\">Schedule Expressions for Rules</a>."
      },
      "ScheduleExpressionCron": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\ \\_\\*\\?\\,\\|\\^\\-\\/\\#\\s\\(\\)\\+]*$",
        "maxLength": 256
      },
      "InputTagList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/TagListEntry"
        },
        "minItems": 0,
        "maxItems": 50
      },
      "TagListEntry": {
        "type": "object",
        "required": [
          "Key"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "The key for an Amazon Web Services resource tag."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The value for an Amazon Web Services resource tag."
              }
            ]
          }
        },
        "description": "A key-value pair representing a single tag that's been applied to an Amazon Web Services resource."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:/-]+$",
        "minLength": 1,
        "maxLength": 256
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://datasync.us-east-1.amazonaws.com/#X-Amz-Target=FmrsService.CreateTask"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "CreateTaskResponse",
        "**Key properties:**",
        {
          "$ul": [
            "**TaskArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
