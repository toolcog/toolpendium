{
  "name": "CreateLocationS3",
  "description": "<p>A <i>location</i> is an endpoint for an Amazon S3 bucket. DataSync can use the location as a source or destination for copying data.</p> <important> <p>Before you create your location, make sure that you read the following sections:</p> <ul> <li> <p> <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#using-storage-classes\">Storage class considerations with Amazon S3 locations</a> </p> </li> <li> <p> <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#create-s3-location-s3-requests\">Evaluating S3 request costs when using DataSync</a> </p> </li> </ul> </important> <p> For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-locations-cli.html#create-location-s3-cli\">Creating an Amazon S3 location</a>.</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "FmrsService.CreateLocationS3"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/CreateLocationS3Request"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "CreateLocationS3Request": {
        "type": "object",
        "required": [
          "S3BucketArn",
          "S3Config"
        ],
        "title": "CreateLocationS3Request",
        "properties": {
          "Subdirectory": {
            "allOf": [
              {
                "$ref": "#/$defs/S3Subdirectory"
              },
              {
                "description": "A subdirectory in the Amazon S3 bucket. This subdirectory in Amazon S3 is used to read data from the S3 source location or write data to the S3 destination."
              }
            ]
          },
          "S3BucketArn": {
            "allOf": [
              {
                "$ref": "#/$defs/S3BucketArn"
              },
              {
                "description": "The ARN of the Amazon S3 bucket. If the bucket is on an Amazon Web Services Outpost, this must be an access point ARN."
              }
            ]
          },
          "S3StorageClass": {
            "allOf": [
              {
                "$ref": "#/$defs/S3StorageClass"
              },
              {
                "description": "<p>The Amazon S3 storage class that you want to store your files in when this location is used as a task destination. For buckets in Amazon Web Services Regions, the storage class defaults to Standard. For buckets on Outposts, the storage class defaults to Amazon Web Services S3 Outposts.</p> <p>For more information about S3 storage classes, see <a href=\"http://aws.amazon.com/s3/storage-classes/\">Amazon S3 Storage Classes</a>. Some storage classes have behaviors that can affect your S3 storage cost. For detailed information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-s3-location.html#using-storage-classes\">Considerations when working with S3 storage classes in DataSync</a>.</p>"
              }
            ]
          },
          "S3Config": {
            "$ref": "#/$defs/S3Config"
          },
          "AgentArns": {
            "allOf": [
              {
                "$ref": "#/$defs/AgentArnList"
              },
              {
                "description": "If you're using DataSync on an Amazon Web Services Outpost, specify the Amazon Resource Names (ARNs) of the DataSync agents deployed on your Outpost. For more information about launching a DataSync agent on an Amazon Web Services Outpost, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/deploy-agents.html#outposts-agent\">Deploy your DataSync agent on Outposts</a>."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/InputTagList"
              },
              {
                "description": "The key-value pair that represents the tag that you want to add to the location. The value can be an empty string. We recommend using tags to name your resources."
              }
            ]
          }
        },
        "description": "CreateLocationS3Request"
      },
      "S3Subdirectory": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9_\\-\\+\\./\\(\\)\\p{Zs}]*$",
        "maxLength": 4096
      },
      "S3BucketArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):(s3|s3-outposts):[a-z\\-0-9]*:[0-9]*:.*$",
        "maxLength": 156
      },
      "S3StorageClass": {
        "type": "string",
        "enum": [
          "STANDARD",
          "STANDARD_IA",
          "ONEZONE_IA",
          "INTELLIGENT_TIERING",
          "GLACIER",
          "DEEP_ARCHIVE",
          "OUTPOSTS",
          "GLACIER_INSTANT_RETRIEVAL"
        ]
      },
      "S3Config": {
        "type": "object",
        "required": [
          "BucketAccessRoleArn"
        ],
        "properties": {
          "BucketAccessRoleArn": {
            "allOf": [
              {
                "$ref": "#/$defs/IamRoleArn"
              },
              {
                "description": "The ARN of the IAM role for accessing the S3 bucket. "
              }
            ]
          }
        },
        "description": "<p>The Amazon Resource Name (ARN) of the Identity and Access Management (IAM) role used to access an Amazon S3 bucket.</p> <p>For detailed information about using such a role, see Creating a Location for Amazon S3 in the <i>DataSync User Guide</i>.</p>"
      },
      "IamRoleArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):iam::[0-9]{12}:role/.*$",
        "maxLength": 2048
      },
      "AgentArnList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/AgentArn"
        },
        "minItems": 1,
        "maxItems": 4
      },
      "AgentArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):datasync:[a-z\\-0-9]+:[0-9]{12}:agent/agent-[0-9a-z]{17}$",
        "maxLength": 128
      },
      "InputTagList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/TagListEntry"
        },
        "minItems": 0,
        "maxItems": 50
      },
      "TagListEntry": {
        "type": "object",
        "required": [
          "Key"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "The key for an Amazon Web Services resource tag."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The value for an Amazon Web Services resource tag."
              }
            ]
          }
        },
        "description": "A key-value pair representing a single tag that's been applied to an Amazon Web Services resource."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:/-]+$",
        "minLength": 1,
        "maxLength": 256
      },
      "TagValue": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:@/-]+$",
        "minLength": 1,
        "maxLength": 256
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://datasync.us-east-1.amazonaws.com/#X-Amz-Target=FmrsService.CreateLocationS3"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "CreateLocationS3Response",
        "**Key properties:**",
        {
          "$ul": [
            "**LocationArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
