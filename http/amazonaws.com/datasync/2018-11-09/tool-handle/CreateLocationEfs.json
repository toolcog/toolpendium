{
  "name": "CreateLocationEfs",
  "description": "Creates an endpoint for an Amazon EFS file system that DataSync can access for a transfer. For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-efs-location.html\">Creating a location for Amazon EFS</a>.",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "FmrsService.CreateLocationEfs"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/CreateLocationEfsRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "CreateLocationEfsRequest": {
        "type": "object",
        "required": [
          "EfsFilesystemArn",
          "Ec2Config"
        ],
        "title": "CreateLocationEfsRequest",
        "properties": {
          "Subdirectory": {
            "allOf": [
              {
                "$ref": "#/$defs/EfsSubdirectory"
              },
              {
                "description": "<p>Specifies a mount path for your Amazon EFS file system. This is where DataSync reads or writes data (depending on if this is a source or destination location). By default, DataSync uses the root directory, but you can also include subdirectories.</p> <note> <p>You must specify a value with forward slashes (for example, <code>/path/to/folder</code>).</p> </note>"
              }
            ]
          },
          "EfsFilesystemArn": {
            "allOf": [
              {
                "$ref": "#/$defs/EfsFilesystemArn"
              },
              {
                "description": "Specifies the ARN for the Amazon EFS file system."
              }
            ]
          },
          "Ec2Config": {
            "allOf": [
              {
                "$ref": "#/$defs/Ec2Config"
              },
              {
                "description": "Specifies the subnet and security groups DataSync uses to access your Amazon EFS file system."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/InputTagList"
              },
              {
                "description": "Specifies the key-value pair that represents a tag that you want to add to the resource. The value can be an empty string. This value helps you manage, filter, and search for your resources. We recommend that you create a name tag for your location."
              }
            ]
          },
          "AccessPointArn": {
            "allOf": [
              {
                "$ref": "#/$defs/EfsAccessPointArn"
              },
              {
                "description": "Specifies the Amazon Resource Name (ARN) of the access point that DataSync uses to access the Amazon EFS file system."
              }
            ]
          },
          "FileSystemAccessRoleArn": {
            "allOf": [
              {
                "$ref": "#/$defs/IamRoleArn"
              },
              {
                "description": "Specifies an Identity and Access Management (IAM) role that DataSync assumes when mounting the Amazon EFS file system."
              }
            ]
          },
          "InTransitEncryption": {
            "allOf": [
              {
                "$ref": "#/$defs/EfsInTransitEncryption"
              },
              {
                "description": "<p>Specifies whether you want DataSync to use Transport Layer Security (TLS) 1.2 encryption when it copies data to or from the Amazon EFS file system.</p> <p>If you specify an access point using <code>AccessPointArn</code> or an IAM role using <code>FileSystemAccessRoleArn</code>, you must set this parameter to <code>TLS1_2</code>.</p>"
              }
            ]
          }
        },
        "description": "CreateLocationEfsRequest"
      },
      "EfsSubdirectory": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9_\\-\\+\\./\\(\\)\\p{Zs}]*$",
        "maxLength": 4096
      },
      "EfsFilesystemArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):elasticfilesystem:[a-z\\-0-9]*:[0-9]{12}:file-system/fs-.*$",
        "maxLength": 128
      },
      "Ec2Config": {
        "type": "object",
        "required": [
          "SubnetArn",
          "SecurityGroupArns"
        ],
        "properties": {
          "SubnetArn": {
            "allOf": [
              {
                "$ref": "#/$defs/Ec2SubnetArn"
              },
              {
                "description": "<p>Specifies the ARN of a subnet where DataSync creates the <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/datasync-network.html#required-network-interfaces\">network interfaces</a> for managing traffic during your transfer.</p> <p>The subnet must be located:</p> <ul> <li> <p>In the same virtual private cloud (VPC) as the Amazon EFS file system.</p> </li> <li> <p>In the same Availability Zone as at least one mount target for the Amazon EFS file system.</p> </li> </ul> <note> <p>You don't need to specify a subnet that includes a file system mount target.</p> </note>"
              }
            ]
          },
          "SecurityGroupArns": {
            "allOf": [
              {
                "$ref": "#/$defs/Ec2SecurityGroupArnList"
              },
              {
                "description": "Specifies the Amazon Resource Names (ARNs) of the security groups associated with an Amazon EFS file system's mount target."
              }
            ]
          }
        },
        "description": "The subnet and security groups that DataSync uses to access your Amazon EFS file system."
      },
      "Ec2SubnetArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):ec2:[a-z\\-0-9]*:[0-9]{12}:subnet/.*$",
        "maxLength": 128
      },
      "Ec2SecurityGroupArnList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/Ec2SecurityGroupArn"
        },
        "minItems": 1,
        "maxItems": 5
      },
      "Ec2SecurityGroupArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):ec2:[a-z\\-0-9]*:[0-9]{12}:security-group/sg-[a-f0-9]+$",
        "maxLength": 128
      },
      "InputTagList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/TagListEntry"
        },
        "minItems": 0,
        "maxItems": 50
      },
      "TagListEntry": {
        "type": "object",
        "required": [
          "Key"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "The key for an Amazon Web Services resource tag."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The value for an Amazon Web Services resource tag."
              }
            ]
          }
        },
        "description": "A key-value pair representing a single tag that's been applied to an Amazon Web Services resource."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:/-]+$",
        "minLength": 1,
        "maxLength": 256
      },
      "TagValue": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:@/-]+$",
        "minLength": 1,
        "maxLength": 256
      },
      "EfsAccessPointArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):elasticfilesystem:[a-z\\-0-9]+:[0-9]{12}:access-point/fsap-[0-9a-f]{8,40}$",
        "maxLength": 128
      },
      "IamRoleArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):iam::[0-9]{12}:role/.*$",
        "maxLength": 2048
      },
      "EfsInTransitEncryption": {
        "type": "string",
        "enum": [
          "NONE",
          "TLS1_2"
        ]
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://datasync.us-east-1.amazonaws.com/#X-Amz-Target=FmrsService.CreateLocationEfs"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "CreateLocationEfs",
        "**Key properties:**",
        {
          "$ul": [
            "**LocationArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
