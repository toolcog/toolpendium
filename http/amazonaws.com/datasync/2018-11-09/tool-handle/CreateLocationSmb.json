{
  "name": "CreateLocationSmb",
  "description": "<p>Creates an endpoint for a Server Message Block (SMB) file server that DataSync can use for a data transfer.</p> <p>Before you begin, make sure that you understand how DataSync <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-smb-location.html\">accesses an SMB file server</a>.</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "X-Amz-Target": {
        "type": "string",
        "enum": [
          "FmrsService.CreateLocationSmb"
        ]
      },
      "X-Amz-Content-Sha256": {
        "type": "string"
      },
      "X-Amz-Date": {
        "type": "string"
      },
      "X-Amz-Algorithm": {
        "type": "string"
      },
      "X-Amz-Credential": {
        "type": "string"
      },
      "X-Amz-Security-Token": {
        "type": "string"
      },
      "X-Amz-Signature": {
        "type": "string"
      },
      "X-Amz-SignedHeaders": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/CreateLocationSmbRequest"
      }
    },
    "required": [
      "X-Amz-Target",
      "body"
    ],
    "$defs": {
      "CreateLocationSmbRequest": {
        "type": "object",
        "required": [
          "Subdirectory",
          "ServerHostname",
          "User",
          "Password",
          "AgentArns"
        ],
        "title": "CreateLocationSmbRequest",
        "properties": {
          "Subdirectory": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbSubdirectory"
              },
              {
                "description": "<p>Specifies the name of the share exported by your SMB file server where DataSync will read or write data. You can include a subdirectory in the share path (for example, <code>/path/to/subdirectory</code>). Make sure that other SMB clients in your network can also mount this path.</p> <p>To copy all data in the specified subdirectory, DataSync must be able to mount the SMB share and access all of its data. For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-smb-location.html#configuring-smb-permissions\">required permissions</a> for SMB locations.</p>"
              }
            ]
          },
          "ServerHostname": {
            "allOf": [
              {
                "$ref": "#/$defs/ServerHostname"
              },
              {
                "description": "<p>Specifies the Domain Name Service (DNS) name or IP address of the SMB file server that your DataSync agent will mount.</p> <note> <p>You can't specify an IP version 6 (IPv6) address.</p> </note>"
              }
            ]
          },
          "User": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbUser"
              },
              {
                "description": "<p>Specifies the user name that can mount your SMB file server and has permission to access the files and folders involved in your transfer.</p> <p>For information about choosing a user with the right level of access for your transfer, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-smb-location.html#configuring-smb-permissions\">required permissions</a> for SMB locations.</p>"
              }
            ]
          },
          "Domain": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbDomain"
              },
              {
                "description": "<p>Specifies the Windows domain name that your SMB file server belongs to. </p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-smb-location.html#configuring-smb-permissions\">required permissions</a> for SMB locations.</p>"
              }
            ]
          },
          "Password": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbPassword"
              },
              {
                "description": "<p>Specifies the password of the user who can mount your SMB file server and has permission to access the files and folders involved in your transfer.</p> <p>For more information, see <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/create-smb-location.html#configuring-smb-permissions\">required permissions</a> for SMB locations.</p>"
              }
            ]
          },
          "AgentArns": {
            "allOf": [
              {
                "$ref": "#/$defs/AgentArnList"
              },
              {
                "description": "Specifies the DataSync agent (or agents) which you want to connect to your SMB file server. You specify an agent by using its Amazon Resource Name (ARN)."
              }
            ]
          },
          "MountOptions": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbMountOptions"
              },
              {
                "description": "Specifies the version of the SMB protocol that DataSync uses to access your SMB file server."
              }
            ]
          },
          "Tags": {
            "allOf": [
              {
                "$ref": "#/$defs/InputTagList"
              },
              {
                "description": "Specifies labels that help you categorize, filter, and search for your Amazon Web Services resources. We recommend creating at least a name tag for your location."
              }
            ]
          }
        },
        "description": "CreateLocationSmbRequest"
      },
      "SmbSubdirectory": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9_\\-\\+\\./\\(\\)\\$\\p{Zs}]+$",
        "maxLength": 4096
      },
      "ServerHostname": {
        "type": "string",
        "pattern": "^(([a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9\\-]*[A-Za-z0-9])$",
        "maxLength": 255
      },
      "SmbUser": {
        "type": "string",
        "pattern": "^[^\\x5B\\x5D\\\\/:;|=,+*?]{1,104}$",
        "maxLength": 104
      },
      "SmbDomain": {
        "type": "string",
        "pattern": "^[A-Za-z0-9]((\\.|-+)?[A-Za-z0-9]){0,252}$",
        "maxLength": 253
      },
      "SmbPassword": {
        "type": "string",
        "pattern": "^.{0,104}$",
        "maxLength": 104,
        "format": "password"
      },
      "AgentArnList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/AgentArn"
        },
        "minItems": 1,
        "maxItems": 4
      },
      "AgentArn": {
        "type": "string",
        "pattern": "^arn:(aws|aws-cn|aws-us-gov|aws-iso|aws-iso-b):datasync:[a-z\\-0-9]+:[0-9]{12}:agent/agent-[0-9a-z]{17}$",
        "maxLength": 128
      },
      "SmbMountOptions": {
        "type": "object",
        "properties": {
          "Version": {
            "allOf": [
              {
                "$ref": "#/$defs/SmbVersion"
              },
              {
                "description": "<p>By default, DataSync automatically chooses an SMB protocol version based on negotiation with your SMB file server. You also can configure DataSync to use a specific SMB version, but we recommend doing this only if DataSync has trouble negotiating with the SMB file server automatically.</p> <p>These are the following options for configuring the SMB version:</p> <ul> <li> <p> <code>AUTOMATIC</code> (default): DataSync and the SMB file server negotiate the highest version of SMB that they mutually support between 2.1 and 3.1.1.</p> <p>This is the recommended option. If you instead choose a specific version that your file server doesn't support, you may get an <code>Operation Not Supported</code> error.</p> </li> <li> <p> <code>SMB3</code>: Restricts the protocol negotiation to only SMB version 3.0.2.</p> </li> <li> <p> <code>SMB2</code>: Restricts the protocol negotiation to only SMB version 2.1.</p> </li> <li> <p> <code>SMB2_0</code>: Restricts the protocol negotiation to only SMB version 2.0.</p> </li> <li> <p> <code>SMB1</code>: Restricts the protocol negotiation to only SMB version 1.0.</p> <note> <p>The <code>SMB1</code> option isn't available when <a href=\"https://docs.aws.amazon.com/datasync/latest/userguide/API_CreateLocationFsxOntap.html\">creating an Amazon FSx for NetApp ONTAP location</a>.</p> </note> </li> </ul>"
              }
            ]
          }
        },
        "description": "Specifies the version of the Server Message Block (SMB) protocol that DataSync uses to access an SMB file server."
      },
      "SmbVersion": {
        "type": "string",
        "enum": [
          "AUTOMATIC",
          "SMB2",
          "SMB3",
          "SMB1",
          "SMB2_0"
        ]
      },
      "InputTagList": {
        "type": "array",
        "items": {
          "$ref": "#/$defs/TagListEntry"
        },
        "minItems": 0,
        "maxItems": 50
      },
      "TagListEntry": {
        "type": "object",
        "required": [
          "Key"
        ],
        "properties": {
          "Key": {
            "allOf": [
              {
                "$ref": "#/$defs/TagKey"
              },
              {
                "description": "The key for an Amazon Web Services resource tag."
              }
            ]
          },
          "Value": {
            "allOf": [
              {
                "$ref": "#/$defs/TagValue"
              },
              {
                "description": "The value for an Amazon Web Services resource tag."
              }
            ]
          }
        },
        "description": "A key-value pair representing a single tag that's been applied to an Amazon Web Services resource."
      },
      "TagKey": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:/-]+$",
        "minLength": 1,
        "maxLength": 256
      },
      "TagValue": {
        "type": "string",
        "pattern": "^[a-zA-Z0-9\\s+=._:@/-]+$",
        "minLength": 1,
        "maxLength": 256
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://datasync.us-east-1.amazonaws.com/#X-Amz-Target=FmrsService.CreateLocationSmb"
    },
    "headers": {
      "X-Amz-Target": {
        "$": "X-Amz-Target"
      },
      "X-Amz-Content-Sha256": {
        "$": "X-Amz-Content-Sha256"
      },
      "X-Amz-Date": {
        "$": "X-Amz-Date"
      },
      "X-Amz-Algorithm": {
        "$": "X-Amz-Algorithm"
      },
      "X-Amz-Credential": {
        "$": "X-Amz-Credential"
      },
      "X-Amz-Security-Token": {
        "$": "X-Amz-Security-Token"
      },
      "X-Amz-Signature": {
        "$": "X-Amz-Signature"
      },
      "X-Amz-SignedHeaders": {
        "$": "X-Amz-SignedHeaders"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "CreateLocationSmbResponse",
        "**Key properties:**",
        {
          "$ul": [
            "**LocationArn**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "480": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    },
    "481": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
