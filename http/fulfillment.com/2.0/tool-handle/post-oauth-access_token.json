{
  "name": "post-oauth-access_token",
  "description": "By default tokens are valid for 7 days while refresh tokens are valid for 30 days. If your `grant_type` is \"password\" include the `username` and `password`, if however your `grant_type` is \"refresh_token\" the username/password are not required, instead set the `refresh_token`",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "oneOf": [
          {
            "allOf": [
              {
                "properties": {
                  "password": {
                    "description": "",
                    "type": "string"
                  },
                  "username": {
                    "description": "",
                    "type": "string"
                  }
                },
                "required": [
                  "username",
                  "password"
                ],
                "type": "object"
              },
              {
                "properties": {
                  "client_id": {
                    "description": "Id and secret provided by FDC",
                    "type": "string"
                  },
                  "client_secret": {
                    "type": "string"
                  },
                  "grant_type": {
                    "description": "Indicates how you're authenticating your request",
                    "enum": [
                      "password",
                      "refresh_token"
                    ],
                    "type": "string"
                  },
                  "scope": {
                    "default": "oms",
                    "description": "Currently limited to Order Management System",
                    "enum": [
                      "oms"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "scope",
                  "grant_type",
                  "client_secret",
                  "client_id"
                ],
                "title": "AccessTokenRequestBase.v2",
                "type": "object"
              }
            ],
            "title": "AccessTokenRequestPassword.v2"
          },
          {
            "allOf": [
              {
                "properties": {
                  "refresh_token": {
                    "description": "You may request future tokens with the `refresh_token` from your previous `/oauth/access_token` request",
                    "type": "string"
                  }
                },
                "required": [
                  "refresh_token"
                ],
                "type": "object"
              },
              {
                "$ref": "#/$defs/1"
              }
            ],
            "title": "AccessTokenRequestRefresh.v2"
          }
        ],
        "title": "AccessTokenRequest.v2",
        "description": "Get an access token"
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "1": {
        "properties": {
          "client_id": {
            "description": "Id and secret provided by FDC",
            "type": "string"
          },
          "client_secret": {
            "type": "string"
          },
          "grant_type": {
            "description": "Indicates how you're authenticating your request",
            "enum": [
              "password",
              "refresh_token"
            ],
            "type": "string"
          },
          "scope": {
            "default": "oms",
            "description": "Currently limited to Order Management System",
            "enum": [
              "oms"
            ],
            "type": "string"
          }
        },
        "required": [
          "scope",
          "grant_type",
          "client_secret",
          "client_id"
        ],
        "title": "AccessTokenRequestBase.v2",
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.fulfillment.com/v2/oauth/access_token"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "AccessTokenResponse.v2"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**access_token**",
            "**expires_in**",
            "**refresh_token**",
            "**token_type** (default: Bearer)"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "ErrorStandard.v2"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**message**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
