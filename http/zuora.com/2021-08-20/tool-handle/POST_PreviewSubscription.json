{
  "name": "POST_PreviewSubscription",
  "description": "The REST API reference describes how to create a new subscription in preview mode. This call does not require a valid customer account. It can be used to show potential new customers a preview of a subscription with complete details and charges before creating an account, or to let existing customers preview a subscription with all charges before committing.\n\n## Notes\n- The response of the Preview Subscription call is based on the REST API minor version you set in the request header. The response structure might be different if you use different minor version numbers. \n\n- If you have the Invoice Settlement feature enabled, we recommend that you set the `zuora-version` parameter to `207.0` or later. Otherwise, an error is returned.\n\n\n- Default values for **customerAcceptanceDate** and **serviceActivationDate** are set as follows.\n\n|        | serviceActivationDate (SA) specified          | serviceActivationDate (SA) NOT specified  |\n| ------------- |:-------------:| -----:|\n| customerAcceptanceDate (CA) specified      | SA uses value in the request call; CA uses value in the request call| CA uses value in the request call;SA uses CE as default |\n| customerAcceptanceDate (CA) NOT specified      | SA uses value in the request call; CA uses SA as default |   SA and CA use CE as default |\n",
  "parameters": {
    "type": "object",
    "properties": {
      "Zuora-Track-Id": {
        "maxLength": 64,
        "type": "string",
        "description": "A custom identifier for tracing the API call. If you set a value for this header, Zuora returns the same value in the response headers. This header enables you to associate your system process identifiers with Zuora API calls, to assist with troubleshooting in the event of an issue.\n\nThe value of this field must use the US-ASCII character set and must not include any of the following characters: colon (`:`), semicolon (`;`), double quote (`\"`), and quote (`'`).\n"
      },
      "Zuora-Entity-Ids": {
        "type": "string",
        "description": "An entity ID. If you have [Zuora Multi-entity](https://knowledgecenter.zuora.com/BB_Introducing_Z_Business/Multi-entity) enabled and the OAuth token is valid for more than one entity, you must use this header to specify which entity to perform the operation in. If the OAuth token is only valid for a single entity, or you do not have Zuora Multi-entity enabled, you do not need to set this header.\n"
      },
      "zuora-version": {
        "type": "string",
        "description": "\nThe minor version of the Zuora REST API. \n\nYou need to set this parameter if you use the following fields:\n* targetDate\n* includeExistingDraftDocItems\n* previewType\n\n\nIf you have the Invoice Settlement feature enabled, you need to specify this parameter. Otherwise, an error is returned.\n\n\nSee [Zuora REST API Versions](https://www.zuora.com/developer/api-reference/#section/API-Versions) for more information. \n"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://rest.zuora.com/v1/subscriptions/preview"
    },
    "headers": {
      "Zuora-Track-Id": {
        "$": "Zuora-Track-Id"
      },
      "Zuora-Entity-Ids": {
        "$": "Zuora-Entity-Ids"
      },
      "zuora-version": {
        "$": "zuora-version"
      }
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**amount**: Invoice amount.",
            "**amountWithoutTax**: Invoice amount minus tax.",
            [
              "**chargeMetrics**: Container for charge metrics.",
              {
                "$ul": [
                  "**dmrr**: Change in monthly recurring revenue.",
                  "**dtcv**: Change in total contract value.",
                  "**mrr**: Monthly recurring revenue.",
                  "**number**: The charge number of the subscription. Only available for update subscription.",
                  "**originRatePlanId**: The origin rate plan ID. Only available for update subscription.",
                  "**originalId**: The original rate plan charge ID. Only available for update subscription.",
                  "**productRatePlanChargeId**: The product rate plan charge ID.",
                  "**productRatePlanId**: The product rate plan ID.",
                  "**tcv**: Total contract value."
                ]
              }
            ],
            "**contractedMrr**: Monthly recurring revenue of the subscription.",
            [
              "**creditMemo**: ",
              {
                "$ul": [
                  "**amount**: Credit memo amount.",
                  "**amountWithoutTax**: Credit memo amount minus tax.",
                  "**creditMemoItems**: ",
                  "**taxAmount**: Tax amount on the credit memo."
                ]
              }
            ],
            "**invoice**: Container for invoices.",
            "**invoiceItems**: Container for invoice items.",
            "**invoiceTargetDate**: Date through which charges are calculated on the invoice, as yyyy-mm-dd.",
            "**success**: Returns `true` if the request was processed successfully.",
            "**targetDate**: Date through which to calculate charges if an invoice is generated, as yyyy-mm-dd. Default is current date.",
            "**taxAmount**: Tax amount on the invoice.",
            "**totalContractedValue**: Total contracted value of the subscription."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
