{
  "name": "post_oauth2_token",
  "description": "Request an Access Token using either a client-side obtained OAuth 2.0\nauthorization code or a server-side JWT assertion.\n\nAn Access Token is a string that enables Box to verify that a\nrequest belongs to an authorized session. In the normal order of\noperations you will begin by requesting authentication from the\n[authorize](#get-authorize) endpoint and Box will send you an\nauthorization code.\n\nYou will then send this code to this endpoint to exchange it for\nan Access Token. The returned Access Token can then be used to to make\nBox API calls.",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/PostOAuth2Token"
      }
    },
    "$defs": {
      "PostOAuth2Token": {
        "description": "A request for a new OAuth 2.0 token",
        "properties": {
          "actor_token": {
            "description": "The token used to create an annotator token.\nThis is a JWT assertion.\n\nUsed in combination with `urn:ietf:params:oauth:grant-type:token-exchange`\nas the `grant_type`.",
            "example": "c3FIOG9vSGV4VHo4QzAyg5T1JvNnJoZ3ExaVNyQWw6WjRsanRKZG5lQk9qUE1BVQ",
            "format": "token",
            "type": "string"
          },
          "actor_token_type": {
            "description": "The type of `actor_token` passed in.\n\nUsed in combination with `urn:ietf:params:oauth:grant-type:token-exchange`\nas the `grant_type`.",
            "enum": [
              "urn:ietf:params:oauth:token-type:id_token"
            ],
            "example": "urn:ietf:params:oauth:token-type:id_token",
            "format": "urn",
            "type": "string"
          },
          "assertion": {
            "description": "A JWT assertion for which to request a new access token.\n\nUsed in combination with `urn:ietf:params:oauth:grant-type:jwt-bearer`\nas the `grant_type`.",
            "example": "xxxxx.yyyyy.zzzzz",
            "format": "jwt",
            "type": "string"
          },
          "box_shared_link": {
            "description": "Full URL of the shared link on the file or folder\nthat the token should be generated for.",
            "example": "https://cloud.box.com/s/123456",
            "format": "url",
            "type": "string"
          },
          "box_subject_id": {
            "description": "Used in combination with `client_credentials` as the `grant_type`.\nValue is determined by `box_subject_type`. If `user` use user ID and if\n`enterprise` use enterprise ID.",
            "example": "123456789",
            "type": "string"
          },
          "box_subject_type": {
            "description": "Used in combination with `client_credentials` as the `grant_type`.",
            "enum": [
              "enterprise",
              "user"
            ],
            "example": "enterprise",
            "type": "string"
          },
          "client_id": {
            "description": "The Client ID of the application requesting an access token.\n\nUsed in combination with `authorization_code`, `client_credentials`, or\n`urn:ietf:params:oauth:grant-type:jwt-bearer` as the `grant_type`.",
            "example": "ly1nj6n11vionaie65emwzk575hnnmrk",
            "type": "string"
          },
          "client_secret": {
            "description": "The client secret of the application requesting an access token.\n\nUsed in combination with `authorization_code`, `client_credentials`, or\n`urn:ietf:params:oauth:grant-type:jwt-bearer` as the `grant_type`.",
            "example": "hOzsTeFlT6ko0dme22uGbQal04SBPYc1",
            "type": "string"
          },
          "code": {
            "description": "The client-side authorization code passed to your application by\nBox in the browser redirect after the user has successfully\ngranted your application permission to make API calls on their\nbehalf.\n\nUsed in combination with `authorization_code` as the `grant_type`.",
            "example": "n22JPxrh18m4Y0wIZPIqYZK7VRrsMTWW",
            "format": "token",
            "type": "string"
          },
          "grant_type": {
            "description": "The type of request being made, either using a client-side obtained\nauthorization code, a refresh token, a JWT assertion, client credentials\ngrant or another access token for the purpose of downscoping a token.",
            "enum": [
              "authorization_code",
              "refresh_token",
              "client_credentials",
              "urn:ietf:params:oauth:grant-type:jwt-bearer",
              "urn:ietf:params:oauth:grant-type:token-exchange"
            ],
            "example": "authorization_code",
            "format": "urn",
            "type": "string"
          },
          "refresh_token": {
            "description": "A refresh token used to get a new access token with.\n\nUsed in combination with `refresh_token` as the `grant_type`.",
            "example": "c3FIOG9vSGV4VHo4QzAyg5T1JvNnJoZ3ExaVNyQWw6WjRsanRKZG5lQk9qUE1BVQ",
            "format": "token",
            "type": "string"
          },
          "resource": {
            "description": "Full URL for the file that the token should be generated for.",
            "example": "https://api.box.com/2.0/files/123456",
            "format": "url",
            "type": "string"
          },
          "scope": {
            "description": "The space-delimited list of scopes that you want apply to the\nnew access token.\n\nThe `subject_token` will need to have all of these scopes or\nthe call will error with **401 Unauthorized**.",
            "example": "item_upload item_preview base_explorer",
            "format": "space_delimited_list",
            "type": "string"
          },
          "subject_token": {
            "description": "The token to exchange for a downscoped token. This can be a regular\naccess token, a JWT assertion, or an app token.\n\nUsed in combination with `urn:ietf:params:oauth:grant-type:token-exchange`\nas the `grant_type`.",
            "example": "c3FIOG9vSGV4VHo4QzAyg5T1JvNnJoZ3ExaVNyQWw6WjRsanRKZG5lQk9qUE1BVQ",
            "format": "token",
            "type": "string"
          },
          "subject_token_type": {
            "description": "The type of `subject_token` passed in.\n\nUsed in combination with `urn:ietf:params:oauth:grant-type:token-exchange`\nas the `grant_type`.",
            "enum": [
              "urn:ietf:params:oauth:token-type:access_token"
            ],
            "example": "urn:ietf:params:oauth:token-type:access_token",
            "type": "string"
          }
        },
        "required": [
          "grant_type"
        ],
        "title": "Token request",
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.box.com/oauth2/token"
    },
    "body": {
      "$": "body",
      "encode": "urlencoded"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Access token"
        },
        "A token that can be used to make authenticated API calls.",
        "**Key properties:**",
        {
          "$ul": [
            "**access_token**: The requested access token.",
            "**expires_in**: The time in seconds in seconds by which this token will expire.",
            "**issued_token_type**: The type of downscoped access token returned. This is only",
            "**refresh_token**: The refresh token for this access token, which can be used",
            "**restricted_to**: The permissions that this access token permits,",
            "**token_type**: The type of access token returned."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "OAuth 2.0 error"
        },
        "An OAuth 2.0 error",
        "**Key properties:**",
        {
          "$ul": [
            "**error**: The type of the error returned.",
            "**error_description**: The type of the error returned."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "OAuth 2.0 error"
        },
        "An OAuth 2.0 error",
        "**Key properties:**",
        {
          "$ul": [
            "**error**: The type of the error returned.",
            "**error_description**: The type of the error returned."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
