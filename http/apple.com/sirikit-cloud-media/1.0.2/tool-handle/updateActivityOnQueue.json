{
  "name": "updateActivityOnQueue",
  "description": "updateActivity",
  "parameters": {
    "type": "object",
    "properties": {
      "x-applecloudextension-session-id": {
        "maxLength": 128,
        "minLength": 1,
        "type": "string"
      },
      "x-applecloudextension-retry-count": {
        "format": "uint32",
        "minimum": 1,
        "type": "number"
      },
      "User-Agent": {
        "maxLength": 250,
        "pattern": "AppleCloudExtension/([0-9]+\\.[0-9]+\\.[0-9]+) *.*",
        "type": "string"
      },
      "Accept-Language": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/UpdateActivityRequest"
      }
    },
    "required": [
      "x-applecloudextension-session-id",
      "User-Agent",
      "Accept-Language"
    ],
    "$defs": {
      "UpdateActivityRequest": {
        "properties": {
          "constraints": {
            "$ref": "#/$defs/Constraints"
          },
          "nowPlaying": {
            "$ref": "#/$defs/PlayerContext"
          },
          "previouslyPlaying": {
            "$ref": "#/$defs/PlayerContext"
          },
          "report": {
            "$ref": "#/$defs/QueueActivityReportEvent"
          },
          "timestamp": {
            "format": "date-time",
            "type": "string"
          },
          "userActivity": {
            "$ref": "#/$defs/UserActivity"
          },
          "version": {
            "pattern": "[0-9]+\\.[0-9]+\\.[0-9]+",
            "type": "string"
          }
        },
        "required": [
          "version",
          "timestamp",
          "report",
          "userActivity"
        ],
        "type": "object"
      },
      "Constraints": {
        "properties": {
          "allowExplicitContent": {
            "default": true,
            "type": "boolean"
          },
          "maximumQueueSegmentItemCount": {
            "default": 1000,
            "format": "uint32",
            "maximum": 1000,
            "minimum": 50,
            "type": "integer"
          },
          "updateUserTasteProfile": {
            "default": true,
            "type": "boolean"
          }
        },
        "type": "object"
      },
      "PlayerContext": {
        "properties": {
          "activityIdentifier": {
            "maxLength": 250,
            "type": "string"
          },
          "contentIdentifier": {
            "$ref": "#/$defs/ContentIdentifier"
          },
          "offsetInMillis": {
            "example": 10942,
            "format": "int64",
            "type": "integer"
          },
          "playbackSpeed": {
            "default": 1,
            "format": "double",
            "type": "number"
          },
          "queueIdentifier": {
            "$ref": "#/$defs/QueueIdentifier"
          }
        },
        "type": "object"
      },
      "ContentIdentifier": {
        "example": "j15f8A3cuU0GG",
        "maxLength": 1000,
        "minLength": 1,
        "type": "string"
      },
      "QueueIdentifier": {
        "example": "u104823q8201",
        "maxLength": 1024,
        "minLength": 1,
        "type": "string"
      },
      "QueueActivityReportEvent": {
        "enum": [
          "local.playing.elapsed",
          "local.playing.paused",
          "local.playing.continued",
          "local.playing.scrub",
          "local.playing.fastForward",
          "local.playing.fastRewind",
          "local.playing.transitioned.naturally",
          "local.playing.transitioned.skip_next",
          "local.playing.transitioned.skip_previous",
          "local.playing.transitioned.queue_replaced",
          "local.stopped.naturally",
          "local.stopped.skip_past_end",
          "local.command.like",
          "local.command.dislike",
          "local.command.bookmark"
        ],
        "type": "string"
      },
      "UserActivity": {
        "nullable": true,
        "properties": {
          "activityType": {
            "example": "com.mediastreamingservice.playmedia",
            "maxLength": 250,
            "type": "string"
          },
          "persistentIdentifier": {
            "maxLength": 250,
            "type": "string"
          },
          "title": {
            "maxLength": 250,
            "type": "string"
          },
          "userInfo": {
            "title": "UserActivityUserInfo",
            "type": "object"
          },
          "version": {
            "maxLength": 25,
            "pattern": "[0-9]+\\.[0-9]+\\.[0-9]+",
            "type": "string"
          }
        },
        "required": [
          "version",
          "activityType"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://cloudextension-testservice.local/api/queues/updateActivity"
    },
    "headers": {
      "x-applecloudextension-session-id": {
        "$": "x-applecloudextension-session-id"
      },
      "x-applecloudextension-retry-count": {
        "$": "x-applecloudextension-retry-count"
      },
      "User-Agent": {
        "$": "User-Agent"
      },
      "Accept-Language": {
        "$": "Accept-Language"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**queue**",
              {
                "$ul": [
                  "**content**",
                  "**contentItemsCount**",
                  [
                    "**controls**",
                    {
                      "$ul": [
                        [
                          "**default**",
                          {
                            "$ul": [
                              [
                                "**activity**",
                                {
                                  "$ul": [
                                    "**playElapsed**",
                                    "**playElapsedInterval**",
                                    "**playPaused** (default: 5)"
                                  ]
                                }
                              ],
                              [
                                "**commands**",
                                {
                                  "$ul": [
                                    "**bookmarkTrack**",
                                    "**dislikeTrack**",
                                    "**likeTrack**",
                                    "**nextTrack**",
                                    "**preferSkipBackward**",
                                    "**preferSkipForward**",
                                    "**previousTrack**",
                                    "**seekToPlaybackPosition**",
                                    "**skipBackward**",
                                    "**skipForward**"
                                  ]
                                }
                              ],
                              "**scheme**"
                            ]
                          }
                        ]
                      ]
                    }
                  ],
                  "**identifier**",
                  [
                    "**insertPointer**",
                    {
                      "$ul": [
                        "**afterIdentifier**",
                        "**replace** (default: false)"
                      ]
                    }
                  ],
                  "**nextContentUrl**",
                  [
                    "**playPointer**",
                    {
                      "$ul": [
                        "**contentIdentifier**",
                        "**offsetInMillis**"
                      ]
                    }
                  ],
                  "**prerollSeconds**",
                  "**previousContentUrl**",
                  "**skipsRemaining**",
                  "**version**"
                ]
              }
            ],
            [
              "**userActivity**",
              {
                "$ul": [
                  "**activityType**",
                  "**persistentIdentifier**",
                  "**title**",
                  "**userInfo**",
                  "**version**"
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
