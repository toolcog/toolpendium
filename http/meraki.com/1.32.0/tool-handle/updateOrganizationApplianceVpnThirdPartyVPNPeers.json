{
  "name": "updateOrganizationApplianceVpnThirdPartyVPNPeers",
  "description": "Update the third party VPN peers for an organization",
  "parameters": {
    "type": "object",
    "properties": {
      "organizationId": {
        "type": "string"
      },
      "body": {
        "example": {
          "peers": [
            {
              "ikeVersion": "2",
              "ipsecPolicies": {
                "childAuthAlgo": [
                  "sha1"
                ],
                "childCipherAlgo": [
                  "aes128"
                ],
                "childLifetime": 28800,
                "childPfsGroup": [
                  "disabled"
                ],
                "ikeAuthAlgo": [
                  "sha1"
                ],
                "ikeCipherAlgo": [
                  "tripledes"
                ],
                "ikeDiffieHellmanGroup": [
                  "group2"
                ],
                "ikeLifetime": 28800,
                "ikePrfAlgo": [
                  "prfsha1"
                ]
              },
              "ipsecPoliciesPreset": "default",
              "localId": "myMXId@meraki.com",
              "name": "Peer Name",
              "networkTags": [
                "none"
              ],
              "privateSubnets": [
                "192.168.1.0/24",
                "192.168.128.0/24"
              ],
              "publicIp": "123.123.123.1",
              "remoteId": "miles@meraki.com",
              "secret": "Sample Password"
            }
          ]
        },
        "properties": {
          "peers": {
            "description": "The list of VPN peers",
            "items": {
              "properties": {
                "ikeVersion": {
                  "default": "1",
                  "description": "[optional] The IKE version to be used for the IPsec VPN peer configuration. Defaults to '1' when omitted.",
                  "enum": [
                    "1",
                    "2"
                  ],
                  "type": "string"
                },
                "ipsecPolicies": {
                  "description": "Custom IPSec policies for the VPN peer. If not included and a preset has not been chosen, the default preset for IPSec policies will be used.",
                  "properties": {
                    "childAuthAlgo": {
                      "description": "This is the authentication algorithms to be used in Phase 2. The value should be an array with one of the following algorithms: 'sha256', 'sha1', 'md5'",
                      "items": {
                        "enum": [
                          "md5",
                          "sha1",
                          "sha256"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "childCipherAlgo": {
                      "description": "This is the cipher algorithms to be used in Phase 2. The value should be an array with one or more of the following algorithms: 'aes256', 'aes192', 'aes128', 'tripledes', 'des', 'null'",
                      "items": {
                        "enum": [
                          "aes128",
                          "aes192",
                          "aes256",
                          "des",
                          "null",
                          "tripledes"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "childLifetime": {
                      "description": "The lifetime of the Phase 2 SA in seconds.",
                      "type": "integer"
                    },
                    "childPfsGroup": {
                      "description": "This is the Diffie-Hellman group to be used for Perfect Forward Secrecy in Phase 2. The value should be an array with one of the following values: 'disabled','group14', 'group5', 'group2', 'group1'",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "ikeAuthAlgo": {
                      "description": "This is the authentication algorithm to be used in Phase 1. The value should be an array with one of the following algorithms: 'sha256', 'sha1', 'md5'",
                      "items": {
                        "enum": [
                          "md5",
                          "sha1",
                          "sha256"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "ikeCipherAlgo": {
                      "description": "This is the cipher algorithm to be used in Phase 1. The value should be an array with one of the following algorithms: 'aes256', 'aes192', 'aes128', 'tripledes', 'des'",
                      "items": {
                        "enum": [
                          "aes128",
                          "aes192",
                          "aes256",
                          "des",
                          "tripledes"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "ikeDiffieHellmanGroup": {
                      "description": "This is the Diffie-Hellman group to be used in Phase 1. The value should be an array with one of the following algorithms: 'group14', 'group5', 'group2', 'group1'",
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "ikeLifetime": {
                      "description": "The lifetime of the Phase 1 SA in seconds.",
                      "type": "integer"
                    },
                    "ikePrfAlgo": {
                      "description": "[optional] This is the pseudo-random function to be used in IKE_SA. The value should be an array with one of the following algorithms: 'prfsha256', 'prfsha1', 'prfmd5', 'default'. The 'default' option can be used to default to the Authentication algorithm.",
                      "items": {
                        "enum": [
                          "default",
                          "prfmd5",
                          "prfsha1",
                          "prfsha256"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "type": "object"
                },
                "ipsecPoliciesPreset": {
                  "description": "One of the following available presets: 'default', 'aws', 'azure'. If this is provided, the 'ipsecPolicies' parameter is ignored.",
                  "type": "string"
                },
                "localId": {
                  "description": "[optional] The local ID is used to identify the MX to the peer. This will apply to all MXs this peer applies to.",
                  "type": "string"
                },
                "name": {
                  "description": "The name of the VPN peer",
                  "type": "string"
                },
                "networkTags": {
                  "description": "A list of network tags that will connect with this peer. Use ['all'] for all networks. Use ['none'] for no networks. If not included, the default is ['all'].",
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "privateSubnets": {
                  "description": "The list of the private subnets of the VPN peer",
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "publicIp": {
                  "description": "[optional] The public IP of the VPN peer",
                  "type": "string"
                },
                "remoteId": {
                  "description": "[optional] The remote ID is used to identify the connecting VPN peer. This can either be a valid IPv4 Address, FQDN or User FQDN.",
                  "type": "string"
                },
                "secret": {
                  "description": "The shared secret with the VPN peer",
                  "type": "string"
                }
              },
              "required": [
                "name",
                "privateSubnets",
                "secret"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "peers"
        ],
        "type": "object"
      }
    },
    "required": [
      "organizationId",
      "body"
    ]
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "https://api.meraki.com/api/v1/organizations/{organizationId}/appliance/vpn/thirdPartyVPNPeers"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**peers**: The list of VPN peers"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
