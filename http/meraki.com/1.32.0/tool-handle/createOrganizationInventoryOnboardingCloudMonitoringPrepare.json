{
  "name": "createOrganizationInventoryOnboardingCloudMonitoringPrepare",
  "description": "Initiates or updates an import session. An import ID will be generated and used when you are ready to commit the import.",
  "parameters": {
    "type": "object",
    "properties": {
      "organizationId": {
        "type": "string"
      },
      "body": {
        "example": {
          "devices": [
            {
              "sudi": "-----BEGIN CERTIFICATE-----\n        MIIDyTCCArGgAwIBAgIKBBNXOVCGU1YztjANBgkqhkiG9w0BAQsFADAnMQ4wDAYD\n        VQQKEwVDaXNjbzEVMBMGA1UEAxMMQUNUMiBTVURJIENBMB4XDTIxMDUzMTEzNTUx\n        NVoXDTI5MDUxNDIwMjU0MVowbTEpMCcGA1UEBRMgUElEOkM5MjAwTC0yNFAtNEcg\n        U046SkFFMjUyMjBSMksxDjAMBgNVBAoTBUNpc2NvMRgwFgYDVQQLEw9BQ1QtMiBM\n        aXRlIFNVREkxFjAUBgNVBAMTDUM5MjAwTC0yNFAtNEcwggEiMA0GCSqGSIb3DQEB\n        AQUAA4IBDwAwggEKAoIBAQDaUPxW76gT5MdoEAt+UrDFiYA9RYh2iHicDViBEyow\n        TR1TuP36bHh13X3vtGiDsCD88Ci2TZIqd/EDkkc7v9ipUUYVVH+YDrPt2Aukb1PH\n        D6K0R+KhgEzRo5x54TlU6oWvjUpwNZUwwdhMWIQaUVkMyZBYNy0jGPLO8jwZhyBg\n        1Fneybr9pwedGbLrAaz+gdEikB8B4a/fvPjVfL5Ngb4QRjFqWuE+X3nLc0kHedep\n        6nfgpUNXMlStVm5nIXKP6OjmzfCHPYh9L2Ehs1TrSk1ser9Ofx0ZMVL/jBZR2EIj\n        OZ8tH6KlX2/B2pbSPIO6kD5c4UA8Cf1SbDJCwJ/kI9ihAgMBAAGjgbAwga0wDgYD\n        VR0PAQH/BAQDAgXgMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAUSNjx8cJw1Vu7\n        fHMJk6+4uDAD+H8wTQYDVR0RBEYwRKBCBgkrBgEEAQkVAgOgNRMzQ2hpcElEPVVV\n        VUNNaElGcUVFMklFUUVBQWNBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUE9MB0GA1Ud\n        DgQWBBRdhMkFD/z5hokaQeLbaRsp4hkvbzANBgkqhkiG9w0BAQsFAAOCAQEAMtuh\n        YpBz4xEZ7YdJsLpw67Q0TTJGnTBRpzAeY1urYDoDz8TSx556XG7z3IRzuED5KVSp\n        OwmH/iZ+tDfYQ3W3ElWTW93871DkuW4WQIfbnoHg/F7bF0DKYVkD3rpZjyz3NhzH\n        d7cjTdJXQ85bTAOXDuxKH3qewrXxxOGXgh3I6NUq0UwMTWh84lND7Jl+ZAQkYNS2\n        iHanTZFQBk3ML0NUb7fKDYGRTZRqwQ/upIO4S6LV1cxH/6V0qbMy3sCSHZoMLrW3\n        0m3M6yKpe5+VZzHZwmWdUf3Ot+zKjhveK5/YNsMIASdvtvymxUizq2Hr1hvR/kPc\n        p1vuyWxipU8JfzOh/A==\n        -----END CERTIFICATE-----\n        ",
              "tunnel": {
                "certificateName": "DeviceSUDI",
                "localInterface": 1,
                "loopbackNumber": 1000,
                "name": "MERAKI"
              },
              "user": {
                "username": "Meraki"
              },
              "vty": {
                "accessList": {
                  "vtyIn": {
                    "name": "MERAKI_IN"
                  },
                  "vtyOut": {
                    "name": "MERAKI_OUT"
                  }
                },
                "authentication": {
                  "group": {
                    "name": ""
                  }
                },
                "authorization": {
                  "group": {
                    "name": "MERAKI"
                  }
                },
                "endLineNumber": 17,
                "rotaryNumber": 50,
                "startLineNumber": 16
              }
            }
          ]
        },
        "properties": {
          "devices": {
            "description": "A set of devices to import (or update)",
            "items": {
              "properties": {
                "sudi": {
                  "description": "Device SUDI certificate",
                  "type": "string"
                },
                "tunnel": {
                  "description": "TLS Related Parameters",
                  "properties": {
                    "certificateName": {
                      "description": "Name of the configured TLS certificate",
                      "type": "string"
                    },
                    "localInterface": {
                      "description": "Number of the vlan expected to be used to connect to the cloud",
                      "type": "integer"
                    },
                    "loopbackNumber": {
                      "description": "Number of the configured Loopback Interface used for TLS overlay",
                      "type": "integer"
                    },
                    "name": {
                      "description": "Name of the configured TLS tunnel",
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "user": {
                  "description": "User parameters",
                  "properties": {
                    "username": {
                      "description": "The name of the device user for Meraki monitoring",
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "vty": {
                  "description": "VTY Related Parameters",
                  "properties": {
                    "accessList": {
                      "description": "AccessList details",
                      "properties": {
                        "vtyIn": {
                          "description": "VTY in ACL",
                          "properties": {
                            "name": {
                              "description": "Name",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        },
                        "vtyOut": {
                          "description": "VTY out ACL",
                          "properties": {
                            "name": {
                              "description": "Name",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "authentication": {
                      "description": "VTY AAA authentication",
                      "properties": {
                        "group": {
                          "description": "Group Details",
                          "properties": {
                            "name": {
                              "description": "Group Name",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "authorization": {
                      "description": "VTY AAA authorization",
                      "properties": {
                        "group": {
                          "description": "Group Details",
                          "properties": {
                            "name": {
                              "description": "Group Name",
                              "type": "string"
                            }
                          },
                          "type": "object"
                        }
                      },
                      "type": "object"
                    },
                    "endLineNumber": {
                      "description": "Ending line VTY number",
                      "type": "integer"
                    },
                    "rotaryNumber": {
                      "description": "SSH rotary number",
                      "type": "integer"
                    },
                    "startLineNumber": {
                      "description": "Starting line VTY number",
                      "type": "integer"
                    }
                  },
                  "type": "object"
                }
              },
              "required": [
                "sudi"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "devices"
        ],
        "type": "object"
      }
    },
    "required": [
      "organizationId",
      "body"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.meraki.com/api/v1/organizations/{organizationId}/inventory/onboarding/cloudMonitoring/prepare"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "201": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "List"
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**configParams**: Params used in order to connect to the device",
              {
                "$ul": [
                  "**cloudStaticIp**: Static IP Address used to connect to the device",
                  [
                    "**tunnel**: Configuration options used to connect to the device",
                    {
                      "$ul": [
                        "**host**: SSH tunnel URL used to connect to the device",
                        "**mode**: ",
                        "**name**: The name of the tunnel we are attempting to connect to",
                        "**port**: The port used for the ssh tunnel.",
                        [
                          "**rootCertificate**: Root certificate information",
                          {
                            "$ul": [
                              "**content**: Public certificate value",
                              "**name**: The name of the server protected by the certificate"
                            ]
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    "**user**: User credentials used to connect to the device",
                    {
                      "$ul": [
                        "**publicKey**: The public key for the registered user",
                        [
                          "**secret**: Stores the user secret hash",
                          {
                            "$ul": [
                              "**hash**: The hashed secret"
                            ]
                          }
                        ],
                        "**username**: The username added to Catalyst device"
                      ]
                    }
                  ]
                ]
              }
            ],
            "**deviceId**: Import ID from the Import operation",
            "**message**: Message related to whether or not the device was found and can be imported.",
            "**status**: The import status of the device",
            "**udi**: Device UDI certificate"
          ]
        },
        {
          "$each": "$.body.*",
          "$as": "item",
          "$block": [
            {
              "$h2": "Item"
            },
            {
              "$lang": "json",
              "$code": {
                "$encode": "json",
                "$indent": true,
                "$content": {
                  "$": "$.item"
                }
              }
            }
          ]
        }
      ]
    }
  }
}
