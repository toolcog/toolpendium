{
  "name": "getTripDetails",
  "parameters": {
    "type": "object",
    "properties": {
      "vehicleId": {
        "type": "string",
        "description": "Amennyiben meg van adva, azon menet érkezik a válaszban, amit az adott jármű teljesít."
      },
      "tripId": {
        "type": "string",
        "description": "Ha nincs kitöltve a járműazonosító, az itt megadott azonosítóval rendelkező menet lesz a válaszban."
      },
      "date": {
        "type": "string",
        "description": "Ha nincs kitöltve a járműazonosító, ezen a dátumon lesz keresve az adott azonosítójú menet."
      },
      "ifModifiedSince": {
        "default": -1,
        "format": "int64",
        "type": "integer",
        "description": "Akkor adunk vissza adatot, ha az módosult az itt megadott időbélyeg (UNIX időbélyeg másodpercben) után. Ellenkező esetben HTTP 304 a válasz, ha nincs változás. Elsőbbsége van a header paraméterrel szemben."
      },
      "If-Modified-Since": {
        "format": "date-time",
        "type": "string",
        "description": "Ha meg van adva, akkor csak abban az esetben érkezik vissza adat, ha az változott a megadott időpont óta. Különben HTTP 304 a válasz. A query paraméternek elsőbbsége van ezzel szemben."
      },
      "appVersion": {
        "type": "string",
        "description": "A kliensalkalmazás verziója."
      },
      "version": {
        "$ref": "#/components/schemas/ApiVersion",
        "description": "Az API verziója."
      },
      "dialect": {
        "$ref": "#/components/schemas/Dialect",
        "description": "Az API referenciáinak dialektusa."
      },
      "includeReferences": {
        "default": "true",
        "items": {
          "$ref": "#/$defs/ReferencesSchema"
        },
        "type": "array",
        "description": "A referenciák típusát határozza meg. `true` vagy `COMPACT` esetén minden referencia szerepel, `false` esetén üres. `COMPACT` módban a route referenciák `description` mezője kihagyásra kerül."
      }
    },
    "required": [
      "dialect"
    ],
    "$defs": {
      "ReferencesSchema": {
        "default": "true",
        "enum": [
          "true",
          "false",
          "compact",
          "agencies",
          "routes",
          "trips",
          "stops",
          "alerts",
          "stations"
        ],
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://futar.bkk.hu/api/query/v1/ws/{dialect}/api/where/trip-details{?vehicleId,tripId,date,ifModifiedSince,appVersion,version,includeReferences}"
    },
    "headers": {
      "If-Modified-Since": {
        "$": "If-Modified-Since"
      }
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A válasz státusz kódja.",
            "**currentTime**: Az aktuális szerveridő ezredmásodpercben.",
            [
              "**data**: A válasz adat.",
              {
                "$ul": [
                  "**class**: Az adat típusa. Egy entitás esetén \"entryWithReferences\".",
                  [
                    "**entry**: A lekért adat.",
                    {
                      "$ul": [
                        "**alertIds**: Aktív zavarok a meneten.",
                        "**mayRequireBooking**: Igaz, ha a menet (legalább egy szakasza) foglalást igényel.",
                        "**nextBlockTripId**: A következő menet azonosítója a csoportban, ha a menet hurokjárat.",
                        [
                          "**polyline**: A menethez tartozó kódolt minta (polyline).",
                          {
                            "$ul": [
                              "**length**: A minta pontjainak száma.",
                              "**levels**: A minta magassági adatai (mindig üres).",
                              "**points**: A minta kódolt pontjai."
                            ]
                          }
                        ],
                        "**serviceDate**: A menet menetrendi napja.",
                        "**stopTimes**: Menet megállóinak listája.",
                        "**tripId**: A menet azonosítója.",
                        [
                          "**vehicle**: A lekért adatok listája.",
                          {
                            "$ul": [
                              "**bearing**: A jármű irányszöge.",
                              [
                                "**capacity**: A jármű kapacitása.",
                                {
                                  "$ul": [
                                    "**adults**: Hány felnőtt van a járművön.",
                                    "**children**: Hány gyermek van a járművön.",
                                    "**other**: Hány be nem kategorizált entitás van a járművön.",
                                    "**strollers**: Hány babakocsi van a járművön",
                                    "**wheelchairs**: Hány kerekesszék van a járművön."
                                  ]
                                }
                              ],
                              "**congestionLevel**: A járműhöz tartozó torlódási állapot.",
                              "**deviated**: Igaz, ha a jármű letért az útvonaláról.",
                              "**label**: A jármű kijelzőjén megjelenő célállomáskép.",
                              "**lastUpdateTime**: A járműhöz tartozó utolsó valós idejű adat időbélyege másodpercben.",
                              "**licensePlate**: A jármű rendszáma.",
                              [
                                "**location**: A jármű pozíciója.",
                                {
                                  "$ul": [
                                    "**lat**: Szélességi koordináta.",
                                    "**lon**: Hosszúsági koordináta."
                                  ]
                                }
                              ],
                              "**model**: A jármű típusa.",
                              [
                                "**occupancy**: A jármű kapacitása.",
                                {
                                  "$ul": [
                                    "**adults**: Hány felnőtt van a járművön.",
                                    "**children**: Hány gyermek van a járművön.",
                                    "**other**: Hány be nem kategorizált entitás van a járművön.",
                                    "**strollers**: Hány babakocsi van a járművön",
                                    "**wheelchairs**: Hány kerekesszék van a járművön."
                                  ]
                                }
                              ],
                              "**routeId**: A menethez tartozó járat azonosítója, amit a jármű teljesít.",
                              "**serviceDate**: A jármű által teljesített menet menetrendi napja.",
                              "**stale**: Igaz, ha a jármű pozíciója kiöregedett.",
                              "**status**: A jármű állapota.",
                              "**stopDistancePercent**: Hol tart a jármű a két megálló közti szakaszon, százalékban.",
                              "**stopId**: A járműhöz tartozó megálló azonosítója.",
                              "**stopSequence**: A jármű által érintett aktuális megálló sorszáma a meneten.",
                              [
                                "**style**: A járműhöz tartozó stílus.",
                                {
                                  "$ul": [
                                    [
                                      "**icon**: A járathoz tartozó jármű ikon stílus.",
                                      {
                                        "$ul": [
                                          "**name**: Az ikon neve."
                                        ]
                                      }
                                    ]
                                  ]
                                }
                              ],
                              "**tripId**: A járműhöz tartozó menet azonosítója.",
                              "**vehicleId**: A jármű azonosítója.",
                              "**vehicleRouteType**: A jármű fajtája. Deprecated: használjuk a `style` attribútumot.",
                              "**vertex**: A menet utazástervező azonosítója, amelyet a `fromPlace` megadásához lehet használni.",
                              "**wheelchairAccessible**: Igaz, ha a jármű alacsonypadlós."
                            ]
                          }
                        ],
                        "**vertex**: A menet utazástervező azonosítója, amelyet a `fromPlace` megadásához lehet használni."
                      ]
                    }
                  ],
                  "**limitExceeded**: Igaz, ha a lista több elemet tartalmaz, mint a limit paraméter. Indulási és érkezési idő típusú lekéréseknél használjuk.",
                  "**references**: A válaszhoz tartozó referenciák."
                ]
              }
            ],
            "**status**: A válasz státusza.",
            "**text**: A válasz szövege.",
            "**version**: A válasz API verziója."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
