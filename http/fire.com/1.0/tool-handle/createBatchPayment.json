{
  "name": "createBatchPayment",
  "description": "The fire.com API allows businesses to automate payments between their accounts or to third parties across the UK and Europe.\n\nFor added security, the API can only set up the payments in batches. These batches must be approved by an authorised user via the firework mobile app.\n\n\nThe process is as follows:\n\n**1.**Create a new batch\n\n**2.**Add payments to the batch\n\n**3.**Submit the batch for approval\n\nOnce the batch is submitted, the authorised users will receive notifications to their firework mobile apps. They can review the contents of the batch and then approve or reject it. If approved, the batch is then processed. You can avail of enhanced security by using Dual Authorisation to verify payments if you wish. Dual Authorisation can be enabled by you when setting up your API application in firework online.\n\n**Batch Life Cycle Events**\n\nA batch webhook can be specified to receive details of all the payments as they are processed. This webhook receives notifications for every event in the batch lifecycle.\n\nThe following events are triggered during a batch:\n\n**batch.opened:** Contains the details of the batch opened. Checks that the callback URL exists - unless a HTTP 200 response is returned, the callback URL will not be configured.\n\n**batch.item-added:** Details of the item added to the batch\n\n**batch.item-removed:** Details of the item removed from the batch\n\n**batch.cancelled:** Notifies that the batch was cancelled.\n\n**batch.submitted:** Notifes that the batch was submitted\n\n**batch.approved:** Notifies that the batch was approved.\n\n**batch.rejected:** Notifies that the batch was rejected.\n\n**batch.failed:** Notifies that the batch failed - includes the details of the failure (insufficient funds etc)\n\n**batch.completed:** Notifies that the batch completed successfully. Includes a summary.\n\nPush notifications are sent to the firework mobile app for many of these events too - these can be configured from within the app.\n\nThis is the first step in creating a batch payment.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "properties": {
          "batchName": {
            "description": "An optional name you give to the batch at creation time.",
            "example": "January 2018 Payroll",
            "type": "string"
          },
          "callbackUrl": {
            "description": "An optional POST URL that all events for this batch will be sent to.",
            "example": "https://my.webserver.com/cb/payroll",
            "type": "string"
          },
          "currency": {
            "description": "3 digit ISO code for the currency you wish to send - GBP, EUR, USD, CAD, etc...",
            "example": "EUR",
            "type": "string"
          },
          "jobNumber": {
            "description": "An optional job number you can give to the batch to help link it to your own system.",
            "example": "2022-01-PR",
            "type": "string"
          },
          "type": {
            "description": "The type of the batch - can be one of the listed 3",
            "enum": [
              "BANK_TRANSFER",
              "INTERNAL_TRANSFER",
              "INTERNATIONAL_TRANSFER"
            ],
            "type": "string"
          }
        },
        "title": "newBatch",
        "type": "object",
        "description": "Details of the batch payment"
      }
    },
    "required": [
      "body"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.fire.com/business/v1/batches"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "newBatchResponse"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**batchUuid**: A UUID for this item."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
