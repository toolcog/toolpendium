{
  "name": "DiaryController_GetAllocations",
  "description": "Get a list of all available allocations for a date + 7 days for a specified appointment type",
  "parameters": {
    "type": "object",
    "properties": {
      "shortName": {
        "type": "string",
        "description": "The unique client short-name"
      },
      "preferredDate": {
        "format": "date-time",
        "type": "string",
        "description": "The date to search from"
      },
      "appointmentType": {
        "type": "string",
        "description": "The unique appointment type identifier"
      },
      "lettings": {
        "type": "boolean",
        "description": "Sales or Lettings property?"
      },
      "propertyIdentifier": {
        "type": "string",
        "description": "The unique property identifier (Sales or Lettings) determines branch and property type"
      },
      "branchID": {
        "type": "string",
        "description": "Branch ID to check appointments (required if no property submitted)"
      }
    },
    "required": [
      "shortName",
      "preferredDate",
      "appointmentType"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://live-api.letmc.com/v3/diary/{shortName}/allocations{?preferredDate,appointmentType,lettings,propertyIdentifier,branchID}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "List"
        },
        "Represents a viewing booking slot",
        "**Key properties:**",
        {
          "$ul": [
            "**End**: The end time of the booking",
            "**StaffID**: The unique ID of the staff member this booking is with",
            "**StaffName**: The name of the staff member this booking is with",
            "**Start**: The start time of the booking"
          ]
        },
        {
          "$each": "$.body.*",
          "$as": "item",
          "$block": [
            {
              "$h2": "Item"
            },
            {
              "$lang": "json",
              "$code": {
                "$encode": "json",
                "$indent": true,
                "$content": {
                  "$": "$.item"
                }
              }
            }
          ]
        }
      ]
    }
  }
}
