{
  "name": "messagesReport",
  "description": "Request a CSV report of messages (both incoming and outgoing) that have been sent to/from your account within the last three months. You can request details for a specific timeframe, and filter your messages by tags, recipient number or Virtual Number.\n\nA 201 Created means your report has been queued for generation. Make a note of the reportId returned in the response. You'll need this to check the status of your report and fetch your download link with GET reports/{reportId}. If you supplied a reportCallbackUrl in the request we'll also notify it when your report is ready for download.\n\nOnce your report is generated, it will be available for download for one week. The expiry date is returned in the response.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "Telstra-api-version": {
        "example": "3.1.0",
        "type": "string"
      },
      "Content-Language": {
        "example": "en-au",
        "type": "string"
      },
      "Authorization": {
        "example": "Bearer <access_token>",
        "type": "string"
      },
      "Accept": {
        "example": "application/json",
        "type": "string"
      },
      "Accept-Charset": {
        "example": "utf-8",
        "type": "string"
      },
      "Content-Type": {
        "example": "application/json",
        "type": "string"
      },
      "body": {
        "example": {
          "endDate": "2022-09-25",
          "filter": "tag1",
          "reportCallbackUrl": "https://www.example.com",
          "startDate": "2022-08-24"
        },
        "properties": {
          "endDate": {
            "description": "Type the end date (inclusive) of your reporting period here.\n\nYour endDate must be a date in the past, and less than three months from your startDate. Use ISO format(yyyy-mm-dd).\n",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "type": "string"
          },
          "filter": {
            "description": "Filter your messages report by:\n  * tag - use one of the tags assigned to your message(s)\n  * number - either the Virtual Number used to send the message, or the Recipient Number the message was sent to.\n",
            "type": "string"
          },
          "reportCallbackUrl": {
            "description": "Tell us the callbackUrl you want us to notify when your report is ready for download.\n\nSample callback response:\n\n<pre><code class=\"language-sh\">{\n  \"reportId\":\"1520b774-46b0-4415-a05f-7bcb1c032c59\",\n  \"reportStatus\":\"completed\",\n  \"timestamp\":\"2022-11-10T05:06:42.823Z\"\n}</code></pre>\n",
            "type": "string"
          },
          "startDate": {
            "description": "Set the time period you want to generate a report for by typing the start date (inclusive) here.\n\nNote that we only retain data for three months, so please ensure your startDate is not more than three months old.\n\nUse ISO format(yyyy-mm-dd), e.g. 2019-08-24.\n",
            "format": "date",
            "maxLength": 10,
            "minLength": 10,
            "type": "string"
          }
        },
        "required": [
          "startDate",
          "endDate"
        ],
        "type": "object"
      }
    },
    "required": [
      "Content-Language",
      "Authorization",
      "Accept",
      "Accept-Charset",
      "Content-Type",
      "body"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://products.api.telstra.com/messaging/v3/reports/messages"
    },
    "headers": {
      "Telstra-api-version": {
        "$": "Telstra-api-version"
      },
      "Content-Language": {
        "$": "Content-Language"
      },
      "Authorization": {
        "$": "Authorization"
      },
      "Accept": {
        "$": "Accept"
      },
      "Accept-Charset": {
        "$": "Accept-Charset"
      },
      "Content-Type": {
        "$": "Content-Type"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "201": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**reportCallbackUrl**: If you provided a reportCallbackUrl in your request, it will be returned here.",
            "**reportId**: When your report is ready for download, you can use this UUID to fetch it with the GET /reports/{reportId} endpoint.",
            "**reportStatus**: The status of the report. It will be either: "
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "402": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "405": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "429": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "500": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
