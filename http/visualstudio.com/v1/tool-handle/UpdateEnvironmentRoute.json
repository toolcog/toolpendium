{
  "name": "UpdateEnvironmentRoute",
  "parameters": {
    "type": "object",
    "properties": {
      "environmentId": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/EnvironmentRegistrationCallbackBody"
      }
    },
    "required": [
      "environmentId"
    ],
    "$defs": {
      "EnvironmentRegistrationCallbackBody": {
        "additionalProperties": false,
        "properties": {
          "payload": {
            "$ref": "#/$defs/EnvironmentRegistrationCallbackPayloadBody"
          },
          "type": {
            "type": "string"
          }
        },
        "required": [
          "type"
        ],
        "type": "object"
      },
      "EnvironmentRegistrationCallbackPayloadBody": {
        "additionalProperties": false,
        "properties": {
          "sessionId": {
            "nullable": true,
            "type": "string"
          },
          "sessionPath": {
            "nullable": true,
            "type": "string"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://online.visualstudio.com/api/v1/Environments/{environmentId}/_callback"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**accessToken**",
            "**active**",
            "**autoShutdownDelayMinutes**",
            "**billableOwnerType**",
            [
              "**clientUsage**",
              {
                "$ul": [
                  "**sessionId**",
                  "**usageData**"
                ]
              }
            ],
            [
              "**connection**",
              {
                "$ul": [
                  "**connectionServiceUri**",
                  "**connectionSessionId**",
                  "**connectionSessionPath**",
                  "**hostPublicKeys**",
                  "**relayEndpoint**",
                  "**relaySasToken**",
                  "**sessionToken**",
                  [
                    "**tunnelProperties**",
                    {
                      "$ul": [
                        "**clusterId**",
                        "**connectAccessToken**",
                        "**domain**",
                        "**managePortsAccessToken**",
                        "**serviceUri**",
                        "**tunnelId**",
                        "**tunnelName**"
                      ]
                    }
                  ]
                ]
              }
            ],
            [
              "**container**",
              {
                "$ul": [
                  "**id**",
                  "**schemaVersion**"
                ]
              }
            ],
            "**containerImage**",
            "**createFromPrebuild**",
            "**created**",
            "**displayStorageUtilizationInKb**",
            "**exportedBlobUrl**",
            [
              "**failoverDetails**",
              {
                "$ul": [
                  "**failoverEnabled**",
                  "**failoverRegion**"
                ]
              }
            ],
            "**features**",
            "**friendlyName**",
            [
              "**gitStatus**",
              {
                "$ul": [
                  "**ahead**",
                  "**behind**",
                  "**branch**",
                  "**commit**",
                  "**hasUncommittedChanges**",
                  "**hasUnpushedChanges**",
                  "**noGitRepo**"
                ]
              }
            ],
            "**id**",
            "**lastStateUpdateReason**",
            "**lastUsed**",
            "**location**",
            "**organizationId**",
            "**ownerId**",
            "**planId**",
            "**platform**",
            [
              "**portForwardingConnection**",
              {
                "$ul": [
                  "**connectionServiceUri**",
                  "**connectionSessionId**",
                  "**connectionSessionPath**",
                  "**hostPublicKeys**",
                  "**relayEndpoint**",
                  "**relaySasToken**",
                  "**sessionToken**",
                  [
                    "**tunnelProperties**",
                    {
                      "$ul": [
                        "**clusterId**",
                        "**connectAccessToken**",
                        "**domain**",
                        "**managePortsAccessToken**",
                        "**serviceUri**",
                        "**tunnelId**",
                        "**tunnelName**"
                      ]
                    }
                  ]
                ]
              }
            ],
            "**prebuildType**",
            "**recentFolders**",
            "**resourceTier**",
            [
              "**runtimeConstraints**",
              {
                "$ul": [
                  "**allowedPortPrivacySettings**",
                  "**imageAllowList**"
                ]
              }
            ],
            [
              "**seed**",
              {
                "$ul": [
                  "**cloneUrl**",
                  [
                    "**gitConfig**",
                    {
                      "$ul": [
                        "**userEmail**",
                        "**userName**"
                      ]
                    }
                  ],
                  "**recurseClone**",
                  [
                    "**repository**",
                    {
                      "$ul": [
                        "**branchName**",
                        "**commitId**",
                        "**createType**",
                        "**diskUsage**",
                        "**name**",
                        "**owner**",
                        "**prebuildHash**",
                        "**repoId**",
                        "**url**"
                      ]
                    }
                  ],
                  "**seedMoniker**",
                  "**seedType**"
                ]
              }
            ],
            "**skuDisplayName**",
            "**skuName**",
            "**state**",
            "**storageUtilizationInKb**",
            [
              "**subscriptionData**",
              {
                "$ul": [
                  "**computeQuota**",
                  "**computeUsage**",
                  "**subscriptionId**",
                  "**subscriptionState**"
                ]
              }
            ],
            "**templateStatus**",
            "**type**",
            "**updated**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**detail**",
            "**instance**",
            "**status**",
            "**title**",
            "**type**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**detail**",
            "**instance**",
            "**status**",
            "**title**",
            "**type**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**detail**",
            "**instance**",
            "**status**",
            "**title**",
            "**type**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
