{
  "name": "updatePaymentLink",
  "description": "Update a payment link.",
  "parameters": {
    "type": "object",
    "properties": {
      "linkId": {
        "pattern": "[0N1RWU4X6F8Z9ALBQC3EG5HJKM2PS7TVDY]{32}",
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/LinkCreateRequest"
      }
    },
    "required": [
      "linkId"
    ],
    "$defs": {
      "LinkCreateRequest": {
        "description": "a link create request",
        "properties": {
          "accountId": {
            "description": "identifier for the subaccount",
            "example": "12345",
            "pattern": "[0-9]+",
            "type": "string"
          },
          "active": {
            "default": true,
            "description": "link activation status",
            "example": true,
            "type": "boolean"
          },
          "backgroundImage": {
            "description": "backgroundImage css property",
            "example": "linear-gradient(to bottom right, #ffffff, #3295d6)",
            "format": "css",
            "type": "string"
          },
          "billing": {
            "$ref": "#/$defs/AddressDataDto"
          },
          "currency": {
            "description": "currency code",
            "enum": [
              "ALL",
              "DZD",
              "ARS",
              "AUD",
              "BSD",
              "BHD",
              "BDT",
              "AMD",
              "BBD",
              "BMD",
              "BTN",
              "BOB",
              "BWP",
              "BZD",
              "SBD",
              "BND",
              "MMK",
              "BIF",
              "KHR",
              "CAD",
              "CVE",
              "KYD",
              "LKR",
              "CLP",
              "CNY",
              "COP",
              "KMF",
              "CRC",
              "HRK",
              "CUP",
              "CZK",
              "DKK",
              "DOP",
              "SVC",
              "ETB",
              "ERN",
              "FKP",
              "FJD",
              "DJF",
              "GMD",
              "GIP",
              "GTQ",
              "GNF",
              "GYD",
              "HTG",
              "HNL",
              "HKD",
              "HUF",
              "ISK",
              "INR",
              "IDR",
              "IRR",
              "IQD",
              "ILS",
              "JMD",
              "JPY",
              "KZT",
              "JOD",
              "KES",
              "KPW",
              "KRW",
              "KWD",
              "KGS",
              "LAK",
              "LBP",
              "LSL",
              "LRD",
              "LYD",
              "MOP",
              "MWK",
              "MYR",
              "MVR",
              "MUR",
              "MXN",
              "MNT",
              "MDL",
              "MAD",
              "OMR",
              "NAD",
              "NPR",
              "ANG",
              "AWG",
              "VUV",
              "NZD",
              "NIO",
              "NGN",
              "NOK",
              "PKR",
              "PAB",
              "PGK",
              "PYG",
              "PEN",
              "PHP",
              "QAR",
              "RUB",
              "RWF",
              "SHP",
              "SAR",
              "SCR",
              "SLL",
              "SGD",
              "VND",
              "SOS",
              "ZAR",
              "SSP",
              "SZL",
              "SEK",
              "CHF",
              "SYP",
              "THB",
              "TOP",
              "TTD",
              "AED",
              "TND",
              "UGX",
              "MKD",
              "EGP",
              "GBP",
              "TZS",
              "USD",
              "UYU",
              "UZS",
              "WST",
              "YER",
              "TWD",
              "UYW",
              "VES",
              "MRU",
              "STN",
              "CUC",
              "ZWL",
              "BYN",
              "TMT",
              "GHS",
              "SDG",
              "UYI",
              "RSD",
              "MZN",
              "AZN",
              "RON",
              "CHE",
              "CHW",
              "TRY",
              "XAF",
              "XCD",
              "XOF",
              "XPF",
              "XBA",
              "XBB",
              "XBC",
              "XBD",
              "XAU",
              "XDR",
              "XAG",
              "XPT",
              "XTS",
              "XPD",
              "XUA",
              "ZMW",
              "SRD",
              "MGA",
              "COU",
              "AFN",
              "TJS",
              "AOA",
              "BGN",
              "CDF",
              "BAM",
              "EUR",
              "MXV",
              "UAH",
              "GEL",
              "BOV",
              "PLN",
              "BRL",
              "CLF",
              "XSU",
              "USN"
            ],
            "example": "EUR",
            "maxLength": 3,
            "minLength": 3,
            "type": "string"
          },
          "description": {
            "description": "free format description of the payment",
            "example": "This payment is awesome!!",
            "maxLength": 255,
            "minLength": 0,
            "type": "string"
          },
          "email": {
            "description": "email the invoice should be delivered to",
            "maxLength": 254,
            "minLength": 4,
            "type": "string"
          },
          "errorUrl": {
            "description": "final redirect after a final payment",
            "type": "string"
          },
          "expiration": {
            "description": "link expiration date, the link will only be executable until end of that day",
            "example": "2020-02-20",
            "format": "date",
            "type": "string"
          },
          "intent": {
            "default": "authorization",
            "description": "designates the type of transaction that will be created",
            "enum": [
              "authorization",
              "preauthorization"
            ],
            "type": "string"
          },
          "invoiceInformation": {
            "$ref": "#/$defs/InvoiceInformationDto"
          },
          "language": {
            "description": "link ISO language code",
            "enum": [
              "de_DE",
              "en_US"
            ],
            "example": "en_US",
            "type": "string"
          },
          "logo": {
            "description": "logo url",
            "example": "https://www.payone.com/wp-content/uploads/2018/12/Payone-Logo-2020.jpg",
            "format": "url",
            "type": "string"
          },
          "merchantId": {
            "description": "identifier for the merchant",
            "example": "12345",
            "pattern": "[0-9]+",
            "type": "string"
          },
          "mode": {
            "description": "execution mode",
            "enum": [
              "live",
              "test"
            ],
            "example": "live",
            "type": "string"
          },
          "notifyUrl": {
            "description": "Url where the notification will be send after link was executed",
            "type": "string"
          },
          "paymentMethods": {
            "description": "list of available payment methods",
            "example": [
              "visa",
              "mastercard"
            ],
            "items": {
              "description": "available payment methods",
              "enum": [
                "visa",
                "mastercard",
                "amex",
                "paypal",
                "sofort",
                "paydirekt",
                "postfinance-e",
                "postfinance-card",
                "bancontact",
                "przelewy24",
                "alipay",
                "ideal",
                "eps",
                "giropay",
                "sepa"
              ],
              "example": "visa",
              "type": "string"
            },
            "type": "array"
          },
          "portalId": {
            "description": "identifier for the portal",
            "example": "1234567",
            "pattern": "[0-9]+",
            "type": "string"
          },
          "reference": {
            "description": "payment reference number, has to be unique per merchant and mode",
            "example": "payment_1",
            "pattern": "[0-9a-zA-Z.\\\\-_/]{1,20}",
            "type": "string"
          },
          "shipping": {
            "$ref": "#/$defs/AddressDataDto"
          },
          "shoppingCart": {
            "items": {
              "$ref": "#/$defs/CartItemDto"
            },
            "maxItems": 400,
            "minItems": 1,
            "type": "array"
          },
          "successUrl": {
            "description": "final redirect after a successful payment",
            "type": "string"
          },
          "userId": {
            "description": "identifier for the user",
            "example": "12345678",
            "pattern": "[0-9]+",
            "type": "string"
          }
        },
        "required": [
          "accountId",
          "currency",
          "merchantId",
          "mode",
          "portalId",
          "reference",
          "shoppingCart"
        ],
        "type": "object"
      },
      "AddressDataDto": {
        "properties": {
          "addressAddition": {
            "description": "customer additional address line",
            "example": "7th floor",
            "maxLength": 50,
            "minLength": 1,
            "type": "string"
          },
          "city": {
            "description": "customer city",
            "example": "Kiel",
            "maxLength": 50,
            "minLength": 1,
            "pattern": "^[^\\u0000\\\\!=<>?+;\"*\\d]+$",
            "type": "string"
          },
          "company": {
            "description": "customer company name",
            "example": "PAYONE GmbH",
            "maxLength": 50,
            "minLength": 2,
            "type": "string"
          },
          "country": {
            "description": "customer country code (2 letter ISO-3166 code)",
            "example": "DE",
            "maxLength": 2,
            "minLength": 2,
            "pattern": "[A-Z]{2}",
            "type": "string"
          },
          "firstName": {
            "description": "customer first name",
            "example": "John",
            "maxLength": 50,
            "minLength": 1,
            "type": "string"
          },
          "lastName": {
            "description": "customer last name",
            "example": "Doe",
            "maxLength": 50,
            "minLength": 2,
            "type": "string"
          },
          "state": {
            "description": "customer state code",
            "maxLength": 2,
            "minLength": 2,
            "pattern": "[A-Z]{2}",
            "type": "string"
          },
          "street": {
            "description": "customer street name",
            "example": "Fraunhoferstr. 2-4",
            "maxLength": 50,
            "minLength": 2,
            "type": "string"
          },
          "zip": {
            "description": "customer postcode",
            "example": "24118",
            "maxLength": 10,
            "minLength": 2,
            "pattern": "[0-9A-Za-z_.\\-/]{2,10}",
            "type": "string"
          }
        },
        "type": "object"
      },
      "InvoiceInformationDto": {
        "description": "relevant information for the invoice module",
        "properties": {
          "invoiceId": {
            "description": "id that should be put on the invoice",
            "maxLength": 20,
            "minLength": 0,
            "type": "string"
          },
          "invoiceText": {
            "description": "short text that should be put after the invoice",
            "maxLength": 255,
            "minLength": 0,
            "type": "string"
          }
        },
        "type": "object"
      },
      "CartItemDto": {
        "properties": {
          "deliveryDateEnd": {
            "description": "delivery period end date",
            "example": "2021-01-01",
            "format": "date",
            "type": "string"
          },
          "deliveryDateStart": {
            "description": "delivery date",
            "example": "2021-01-01",
            "format": "date",
            "type": "string"
          },
          "description": {
            "description": "item description",
            "example": "Potatoes",
            "maxLength": 255,
            "minLength": 1,
            "type": "string"
          },
          "number": {
            "description": "item number",
            "example": "73883HFJ",
            "maxLength": 32,
            "minLength": 1,
            "pattern": "[0-9A-Za-z(){} +\\-_#/:\\[\\]]{1,32}",
            "type": "string"
          },
          "price": {
            "description": "gross price of single item",
            "example": 1999,
            "format": "int64",
            "maximum": 1999999999,
            "minimum": -1999999999,
            "type": "integer"
          },
          "quantity": {
            "description": "total number of ordered items",
            "example": 1,
            "format": "int64",
            "maximum": 999999,
            "minimum": 1,
            "type": "integer"
          },
          "type": {
            "description": "item type",
            "enum": [
              "goods",
              "shipment",
              "handling",
              "voucher"
            ],
            "example": "goods",
            "type": "string"
          },
          "vatRate": {
            "description": "vat rate (<100 in %, >=100 in bp)",
            "example": 20,
            "format": "int64",
            "maximum": 9999,
            "minimum": 0,
            "type": "integer"
          }
        },
        "required": [
          "number",
          "price",
          "quantity",
          "type"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "https://onelink.pay1.de/api/v1/payment-links/{linkId}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**accountId**: identifier for the subaccount",
            "**active**: link activation status (default: true)",
            "**amount**: total amount of all shopping cart items in lowest denomination",
            "**backgroundImage**: backgroundImage css property",
            [
              "**billing**",
              {
                "$ul": [
                  "**addressAddition**: customer additional address line",
                  "**city**: customer city",
                  "**company**: customer company name",
                  "**country**: customer country code (2 letter ISO-3166 code)",
                  "**firstName**: customer first name",
                  "**lastName**: customer last name",
                  "**state**: customer state code",
                  "**street**: customer street name",
                  "**zip**: customer postcode"
                ]
              }
            ],
            "**created**: created time in ISO 8601 format",
            "**currency**: currency code",
            "**description**: free format description of the payment",
            "**email**: customer email for invoices or payment notification",
            "**errorUrl**: final redirect after a failed payment",
            "**expiration**: link expiration date, the link will only be executable until end of that day",
            "**hash**: hash for the client API",
            "**id**: link id",
            "**intent**: designates the type of transaction that will be created (default: authorization)",
            [
              "**invoiceInformation**: relevant information for the invoice module",
              {
                "$ul": [
                  "**invoiceId**: id that should be put on the invoice",
                  "**invoiceText**: short text that should be put after the invoice"
                ]
              }
            ],
            "**language**: link ISO language code",
            "**link**: customer payment link",
            "**logo**: logo url",
            "**merchantId**: identifier for the merchant",
            "**mode**: execution mode",
            "**modified**: last modified time in ISO 8601 format",
            "**notifyUrl**: notify url. If unset no notification will be send",
            "**paymentMethod**: available payment methods",
            "**paymentMethods**: list of available payment methods",
            "**paymentProcess**: identifier of the created payment process.",
            "**portalId**: identifier for the portal",
            "**redirectUrl**: redirect url. empty if the payment process does not require a redirect.",
            "**reference**: payment reference number, has to be unique per merchant and mode",
            [
              "**shipping**",
              {
                "$ul": [
                  "**addressAddition**: customer additional address line",
                  "**city**: customer city",
                  "**company**: customer company name",
                  "**country**: customer country code (2 letter ISO-3166 code)",
                  "**firstName**: customer first name",
                  "**lastName**: customer last name",
                  "**state**: customer state code",
                  "**street**: customer street name",
                  "**zip**: customer postcode"
                ]
              }
            ],
            "**shoppingCart**",
            "**status**: link status",
            "**successUrl**: final redirect after a successful payment",
            "**userId**: identifier of the created user."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
