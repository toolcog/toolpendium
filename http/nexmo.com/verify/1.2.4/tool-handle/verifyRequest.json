{
  "name": "verifyRequest",
  "description": "Use Verify request to generate and send a PIN to your user:\n\n1. Create a request to send a verification code to your user.\n\n2. Check the `status` field in the response to ensure that your request was successful (zero is success).\n\n3. Use the `request_id` field in the response for the Verify check.\n\n*Note that this endpoint is available by `GET` request as well as `POST`.*",
  "parameters": {
    "type": "object",
    "properties": {
      "format": {
        "enum": [
          "json",
          "xml"
        ],
        "type": "string",
        "description": "The response format."
      },
      "body": {
        "$ref": "#/$defs/verifyRequest"
      }
    },
    "required": [
      "format",
      "body"
    ],
    "$defs": {
      "verifyRequest": {
        "properties": {
          "api_key": {
            "$ref": "#/$defs/api_key"
          },
          "api_secret": {
            "$ref": "#/$defs/api_secret"
          },
          "brand": {
            "description": "An 18-character alphanumeric string you can use to personalize the verification request SMS body, to help users identify your company or application name. For example: \"Your `Acme Inc` PIN is ...\"",
            "example": "Acme Inc",
            "maxLength": 18,
            "type": "string"
          },
          "code_length": {
            "default": 4,
            "description": "The length of the verification code.",
            "enum": [
              4,
              6
            ],
            "example": 6,
            "type": "integer"
          },
          "country": {
            "description": "If you do not provide `number` in international format or you are not sure if `number` is correctly formatted, specify the two-character country code in `country`. Verify will then format the number for you.",
            "example": "GB",
            "type": "string"
          },
          "lg": {
            "default": "en-us",
            "description": "By default, the SMS or text-to-speech (TTS) message is generated in the locale that matches the `number`. For example, the text message or TTS message for a `33*` number is sent in French. Use this parameter to explicitly control the language used for the Verify request. A list of languages is available: <https://developer.nexmo.com/verify/guides/verify-languages>",
            "enum": [
              "ar-xa",
              "cs-cz",
              "cy-cy",
              "cy-gb",
              "da-dk",
              "de-de",
              "el-gr",
              "en-au",
              "en-gb",
              "en-in",
              "en-us",
              "es-es",
              "es-mx",
              "es-us",
              "fi-fi",
              "fil-ph",
              "fr-ca",
              "fr-fr",
              "hi-in",
              "hu-hu",
              "id-id",
              "is-is",
              "it-it",
              "ja-jp",
              "ko-kr",
              "nb-no",
              "nl-nl",
              "pl-pl",
              "pt-br",
              "pt-pt",
              "ro-ro",
              "ru-ru",
              "sv-se",
              "th-th",
              "tr-tr",
              "vi-vn",
              "yue-cn",
              "zh-cn",
              "zh-tw"
            ],
            "example": "en-us",
            "type": "string"
          },
          "next_event_wait": {
            "default": 300,
            "description": "Specifies the wait time in seconds between attempts to deliver the verification code.",
            "example": 120,
            "maximum": 900,
            "minimum": 60,
            "type": "integer"
          },
          "number": {
            "description": "The mobile or landline phone number to verify. Unless you are setting `country` explicitly, this number must be in [E.164](https://en.wikipedia.org/wiki/E.164) format.",
            "example": "447700900000",
            "type": "string"
          },
          "pin_code": {
            "description": "A custom PIN to send to the user. If a PIN is not provided, Verify will generate a random PIN for you. <b>This feature is not enabled by default</b> - please discuss with your Account Manager if you would like it enabled. If this feature is not enabled on your account, error status `20` will be returned.",
            "example": "AKFG-3424",
            "maximum": 10,
            "minimum": 4,
            "type": "string"
          },
          "pin_expiry": {
            "default": 300,
            "description": "How long the generated verification code is valid for, in seconds. When you specify both `pin_expiry` and `next_event_wait` then `pin_expiry` must be an integer multiple of `next_event_wait` otherwise `pin_expiry` is defaulted to equal next_event_wait. See [changing the event timings](https://developer.nexmo.com/verify/guides/changing-default-timings).",
            "example": 240,
            "maximum": 3600,
            "minimum": 60,
            "type": "integer"
          },
          "sender_id": {
            "default": "VERIFY",
            "description": "An 11-character alphanumeric string that represents the [identity of the sender](https://developer.nexmo.com/messaging/sms/guides/custom-sender-id) of the verification request. Depending on the destination of the phone number you are sending the verification SMS to, restrictions might apply.",
            "example": "ACME",
            "maxLength": 11,
            "type": "string"
          },
          "workflow_id": {
            "default": 1,
            "description": "Selects the predefined sequence of SMS and TTS (Text To Speech) actions to use in order to convey the PIN to your user. For example, an id of 1 identifies the workflow SMS - TTS - TTS. For a list of all workflows and their associated ids, please visit the [developer portal](https://developer.nexmo.com/verify/guides/workflows-and-events).",
            "enum": [
              1,
              2,
              3,
              4,
              5,
              6,
              7
            ],
            "example": 4,
            "type": "integer"
          }
        },
        "required": [
          "api_key",
          "api_secret",
          "number",
          "brand"
        ],
        "type": "object"
      },
      "api_key": {
        "description": "You can find your API key in your [account dashboard](https://dashboard.nexmo.com)",
        "example": "abcd1234",
        "type": "string"
      },
      "api_secret": {
        "description": "You can find your API secret in your [account dashboard](https://dashboard.nexmo.com)",
        "example": "Sup3rS3cr3t!!",
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.nexmo.com/verify/{format}"
    },
    "body": {
      "$": "body",
      "encode": "urlencoded"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
