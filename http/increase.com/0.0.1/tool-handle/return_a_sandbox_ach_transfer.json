{
  "name": "return_a_sandbox_ach_transfer",
  "description": "Simulates the return of an [ACH Transfer](#ach-transfers) by the Federal Reserve due to an error condition. This will also create a Transaction to account for the returned funds. This transfer must first have a `status` of `submitted`.",
  "parameters": {
    "type": "object",
    "properties": {
      "ach_transfer_id": {
        "description": "The identifier of the ACH Transfer you wish to return.",
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/return_a_sandbox_ach_transfer_parameters"
      }
    },
    "required": [
      "ach_transfer_id",
      "body"
    ],
    "$defs": {
      "return_a_sandbox_ach_transfer_parameters": {
        "example": {},
        "properties": {
          "reason": {
            "description": "The reason why the Federal Reserve or destination bank returned this transfer. Defaults to `no_account`.",
            "enum": [
              "insufficient_fund",
              "no_account",
              "account_closed",
              "invalid_account_number_structure",
              "account_frozen_entry_returned_per_ofac_instruction",
              "credit_entry_refused_by_receiver",
              "unauthorized_debit_to_consumer_account_using_corporate_sec_code",
              "corporate_customer_advised_not_authorized",
              "payment_stopped",
              "non_transaction_account",
              "uncollected_funds",
              "routing_number_check_digit_error",
              "customer_advised_unauthorized_improper_ineligible_or_incomplete",
              "amount_field_error",
              "authorization_revoked_by_customer",
              "invalid_ach_routing_number",
              "file_record_edit_criteria",
              "enr_invalid_individual_name",
              "returned_per_odfi_request",
              "addenda_error",
              "limited_participation_dfi",
              "incorrectly_coded_outbound_international_payment",
              "other"
            ],
            "type": "string",
            "x-enum-descriptions": [
              "Insufficient funds in the source account.",
              "The account does not exist or the receiving bank was unable to locate it.",
              "The account is closed.",
              "The account number is invalid at the receiving bank.",
              "The account was frozen per the Office of Foreign Assets Control.",
              "The receiving bank account refused a credit transfer.",
              "The receiving bank rejected because of an incorrect Standard Entry Class code.",
              "The corporate customer reversed the transfer.",
              "The receiving bank stopped payment on this transfer.",
              "The receiving bank account does not perform transfers.",
              "The receiving bank account does not have enough available balance for the transfer.",
              "The routing number is incorrect.",
              "The customer reversed the transfer.",
              "The amount field is incorrect or too large.",
              "The customer who initiated the transfer revoked authorization.",
              "The routing number is invalid.",
              "The receiving bank is unable to process a field in the transfer.",
              "The individual name field was invalid.",
              "The originating financial institution reversed the transfer.",
              "The addenda record is incorrect or missing.",
              "The receiving bank's regulatory supervisor has limited their participation.",
              "The outbound international ACH transfer was incorrect.",
              "Any other ACH return reason."
            ]
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.increase.com/simulations/ach_transfers/{ach_transfer_id}/return"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "ACH Transfer"
        },
        "ACH transfers move funds between your Increase account and any other account accessible by the Automated Clearing House (ACH).",
        "**Key properties:**",
        {
          "$ul": [
            "**account_id**: The Account to which the transfer belongs.",
            "**account_number**: The destination account number.",
            "**addendum**: Additional information that will be sent to the recipient.",
            "**amount**: The transfer amount in USD cents. A positive amount indicates a credit transfer pushing funds to the receiving account. A negative amount indicates a debit transfer pulling funds from the receiving account.",
            [
              "**approval**: If your account requires approvals for transfers and the transfer was approved, this will contain details of the approval.",
              {
                "$ul": [
                  "**approved_at**: The [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) date and time at which the transfer was approved.",
                  "**approved_by**: If the Transfer was approved by a user in the dashboard, the email address of that user."
                ]
              }
            ],
            [
              "**cancellation**: If your account requires approvals for transfers and the transfer was not approved, this will contain details of the cancellation.",
              {
                "$ul": [
                  "**canceled_at**: The [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) date and time at which the Transfer was canceled.",
                  "**canceled_by**: If the Transfer was canceled by a user in the dashboard, the email address of that user."
                ]
              }
            ],
            "**company_descriptive_date**: The description of the date of the transfer.",
            "**company_discretionary_data**: The data you chose to associate with the transfer.",
            "**company_entry_description**: The description of the transfer you set to be shown to the recipient.",
            "**company_name**: The name by which the recipient knows you.",
            "**created_at**: The [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) date and time at which the transfer was created.",
            "**currency**: The [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) code for the transfer's currency. For ACH transfers this is always equal to `usd`.",
            "**effective_date**: The transfer effective date in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format.",
            "**external_account_id**: The identifier of the External Account the transfer was made to, if any.",
            "**funding**: The type of the account to which the transfer will be sent.",
            "**id**: The ACH transfer's identifier.",
            "**individual_id**: Your identifer for the transfer recipient.",
            "**individual_name**: The name of the transfer recipient. This value is information and not verified by the recipient's bank.",
            "**network**: The transfer's network.",
            "**notifications_of_change**: If the receiving bank accepts the transfer but notifies that future transfers should use different details, this will contain those details.",
            [
              "**return**: If your transfer is returned, this will contain details of the return.",
              {
                "$ul": [
                  "**created_at**: The [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) date and time at which the transfer was created.",
                  "**return_reason_code**: Why the ACH Transfer was returned.",
                  "**transaction_id**: The identifier of the Tranasaction associated with this return.",
                  "**transfer_id**: The identifier of the ACH Transfer associated with this return."
                ]
              }
            ],
            "**routing_number**: The American Bankers' Association (ABA) Routing Transit Number (RTN).",
            "**standard_entry_class_code**: The Standard Entry Class (SEC) code to use for the transfer.",
            "**statement_descriptor**: The descriptor that will show on the recipient's bank statement.",
            "**status**: The lifecycle status of the transfer.",
            [
              "**submission**: After the transfer is submitted to FedACH, this will contain supplemental details.",
              {
                "$ul": [
                  "**submitted_at**: When the ACH transfer was sent to FedACH.",
                  "**trace_number**: The trace number for the submission."
                ]
              }
            ],
            "**transaction_id**: The ID for the transaction funding the transfer.",
            "**type**: A constant representing the object's type. For this resource it will always be `ach_transfer`."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$lang": "json",
      "$code": {
        "$encode": "json",
        "$indent": true,
        "$content": {
          "$": "$.body"
        }
      }
    }
  }
}
