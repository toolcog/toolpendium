{
  "name": "dialogflow_projects_locations_conversationProfiles_setSuggestionFeatureConfig",
  "description": "Adds or updates a suggestion feature in a conversation profile. If the conversation profile contains the type of suggestion feature for the participant role, it will update it. Otherwise it will insert the suggestion feature. This method is a [long-running operation](https://cloud.google.com/dialogflow/es/docs/how/long-running-operations). The returned `Operation` type has the following method-specific fields: - `metadata`: SetSuggestionFeatureConfigOperationMetadata - `response`: ConversationProfile If a long running operation to add or update suggestion feature config for the same conversation profile, participant role and suggestion feature type exists, please cancel the existing long running operation before sending such request, otherwise the request will be rejected.",
  "parameters": {
    "type": "object",
    "properties": {
      "conversationProfile": {
        "type": "string",
        "description": "Required. The Conversation Profile to add or update the suggestion feature config. Format: `projects//locations//conversationProfiles/`."
      },
      "$.xgafv": {
        "enum": [
          "1",
          "2"
        ],
        "type": "string",
        "description": "V1 error format."
      },
      "access_token": {
        "type": "string",
        "description": "OAuth access token."
      },
      "alt": {
        "enum": [
          "json",
          "media",
          "proto"
        ],
        "type": "string",
        "description": "Data format for response."
      },
      "callback": {
        "type": "string",
        "description": "JSONP"
      },
      "fields": {
        "type": "string",
        "description": "Selector specifying which fields to include in a partial response."
      },
      "key": {
        "type": "string",
        "description": "API key. Your API key identifies your project and provides you with API access, quota, and reports. Required unless you provide an OAuth 2.0 token."
      },
      "oauth_token": {
        "type": "string",
        "description": "OAuth 2.0 token for the current user."
      },
      "prettyPrint": {
        "type": "boolean",
        "description": "Returns response with indentations and line breaks."
      },
      "quotaUser": {
        "type": "string",
        "description": "Available to use for quota purposes for server-side applications. Can be any arbitrary string assigned to a user, but should not exceed 40 characters."
      },
      "upload_protocol": {
        "type": "string",
        "description": "Upload protocol for media (e.g. \"raw\", \"multipart\")."
      },
      "uploadType": {
        "type": "string",
        "description": "Legacy upload protocol for media (e.g. \"media\", \"multipart\")."
      },
      "body": {
        "$ref": "#/$defs/GoogleCloudDialogflowV2SetSuggestionFeatureConfigRequest"
      }
    },
    "required": [
      "conversationProfile"
    ],
    "$defs": {
      "GoogleCloudDialogflowV2SetSuggestionFeatureConfigRequest": {
        "description": "The request message for ConversationProfiles.SetSuggestionFeature.",
        "properties": {
          "participantRole": {
            "description": "Required. The participant role to add or update the suggestion feature config. Only HUMAN_AGENT or END_USER can be used.",
            "enum": [
              "ROLE_UNSPECIFIED",
              "HUMAN_AGENT",
              "AUTOMATED_AGENT",
              "END_USER"
            ],
            "type": "string"
          },
          "suggestionFeatureConfig": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionFeatureConfig"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionFeatureConfig": {
        "description": "Config for suggestion features.",
        "properties": {
          "conversationModelConfig": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigConversationModelConfig"
          },
          "conversationProcessConfig": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigConversationProcessConfig"
          },
          "disableAgentQueryLogging": {
            "description": "Optional. Disable the logging of search queries sent by human agents. It can prevent those queries from being stored at answer records. Supported features: KNOWLEDGE_SEARCH.",
            "type": "boolean"
          },
          "enableConversationAugmentedQuery": {
            "description": "Optional. Enable including conversation context during query answer generation. Supported features: KNOWLEDGE_SEARCH.",
            "type": "boolean"
          },
          "enableEventBasedSuggestion": {
            "description": "Automatically iterates all participants and tries to compile suggestions. Supported features: ARTICLE_SUGGESTION, FAQ, DIALOGFLOW_ASSIST, KNOWLEDGE_ASSIST.",
            "type": "boolean"
          },
          "queryConfig": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfig"
          },
          "suggestionFeature": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2SuggestionFeature"
          },
          "suggestionTriggerSettings": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionTriggerSettings"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigConversationModelConfig": {
        "description": "Custom conversation models used in agent assist feature. Supported feature: ARTICLE_SUGGESTION, SMART_COMPOSE, SMART_REPLY, CONVERSATION_SUMMARIZATION.",
        "properties": {
          "baselineModelVersion": {
            "description": "Version of current baseline model. It will be ignored if model is set. Valid versions are: Article Suggestion baseline model: - 0.9 - 1.0 (default) Summarization baseline model: - 1.0",
            "type": "string"
          },
          "model": {
            "description": "Conversation model resource name. Format: `projects//conversationModels/`.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigConversationProcessConfig": {
        "description": "Config to process conversation.",
        "properties": {
          "recentSentencesCount": {
            "description": "Number of recent non-small-talk sentences to use as context for article and FAQ suggestion",
            "format": "int32",
            "type": "integer"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfig": {
        "description": "Config for suggestion query.",
        "properties": {
          "confidenceThreshold": {
            "description": "Confidence threshold of query result. Agent Assist gives each suggestion a score in the range [0.0, 1.0], based on the relevance between the suggestion and the current conversation context. A score of 0.0 has no relevance, while a score of 1.0 has high relevance. Only suggestions with a score greater than or equal to the value of this field are included in the results. For a baseline model (the default), the recommended value is in the range [0.05, 0.1]. For a custom model, there is no recommended value. Tune this value by starting from a very low value and slowly increasing until you have desired results. If this field is not set, it defaults to 0.0, which means that all suggestions are returned. Supported features: ARTICLE_SUGGESTION, FAQ, SMART_REPLY, SMART_COMPOSE, KNOWLEDGE_SEARCH, KNOWLEDGE_ASSIST, ENTITY_EXTRACTION.",
            "format": "float",
            "type": "number"
          },
          "contextFilterSettings": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigContextFilterSettings"
          },
          "dialogflowQuerySource": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigDialogflowQuerySource"
          },
          "documentQuerySource": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigDocumentQuerySource"
          },
          "knowledgeBaseQuerySource": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigKnowledgeBaseQuerySource"
          },
          "maxResults": {
            "description": "Maximum number of results to return. Currently, if unset, defaults to 10. And the max number is 20.",
            "format": "int32",
            "type": "integer"
          },
          "sections": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigSections"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigContextFilterSettings": {
        "description": "Settings that determine how to filter recent conversation context when generating suggestions.",
        "properties": {
          "dropHandoffMessages": {
            "description": "If set to true, the last message from virtual agent (hand off message) and the message before it (trigger message of hand off) are dropped.",
            "type": "boolean"
          },
          "dropIvrMessages": {
            "description": "If set to true, all messages from ivr stage are dropped.",
            "type": "boolean"
          },
          "dropVirtualAgentMessages": {
            "description": "If set to true, all messages from virtual agent are dropped.",
            "type": "boolean"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigDialogflowQuerySource": {
        "description": "Dialogflow source setting. Supported feature: DIALOGFLOW_ASSIST.",
        "properties": {
          "agent": {
            "description": "Required. The name of a Dialogflow virtual agent used for end user side intent detection and suggestion. Format: `projects//locations//agent`. When multiple agents are allowed in the same Dialogflow project.",
            "type": "string"
          },
          "humanAgentSideConfig": {
            "$ref": "#/$defs/GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigDialogflowQuerySourceHumanAgentSideConfig"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigDialogflowQuerySourceHumanAgentSideConfig": {
        "description": "The configuration used for human agent side Dialogflow assist suggestion.",
        "properties": {
          "agent": {
            "description": "Optional. The name of a dialogflow virtual agent used for intent detection and suggestion triggered by human agent. Format: `projects//locations//agent`.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigDocumentQuerySource": {
        "description": "Document source settings. Supported features: SMART_REPLY, SMART_COMPOSE.",
        "properties": {
          "documents": {
            "description": "Required. Knowledge documents to query from. Format: `projects//locations//knowledgeBases//documents/`. Currently, at most 5 documents are supported.",
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigKnowledgeBaseQuerySource": {
        "description": "Knowledge base source settings. Supported features: ARTICLE_SUGGESTION, FAQ.",
        "properties": {
          "knowledgeBases": {
            "description": "Required. Knowledge bases to query. Format: `projects//locations//knowledgeBases/`. Currently, at most 5 knowledge bases are supported.",
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionQueryConfigSections": {
        "description": "Custom sections to return when requesting a summary of a conversation. This is only supported when `baseline_model_version` == '2.0'. Supported features: CONVERSATION_SUMMARIZATION, CONVERSATION_SUMMARIZATION_VOICE.",
        "properties": {
          "sectionTypes": {
            "description": "The selected sections chosen to return when requesting a summary of a conversation. A duplicate selected section will be treated as a single selected section. If section types are not provided, the default will be {SITUATION, ACTION, RESULT}.",
            "items": {
              "enum": [
                "SECTION_TYPE_UNSPECIFIED",
                "SITUATION",
                "ACTION",
                "RESOLUTION",
                "REASON_FOR_CANCELLATION",
                "CUSTOMER_SATISFACTION",
                "ENTITIES"
              ],
              "type": "string"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2SuggestionFeature": {
        "description": "The type of Human Agent Assistant API suggestion to perform, and the maximum number of results to return for that type. Multiple `Feature` objects can be specified in the `features` list.",
        "properties": {
          "type": {
            "description": "Type of Human Agent Assistant API feature to request.",
            "enum": [
              "TYPE_UNSPECIFIED",
              "ARTICLE_SUGGESTION",
              "FAQ",
              "SMART_REPLY",
              "KNOWLEDGE_SEARCH"
            ],
            "type": "string"
          }
        },
        "type": "object"
      },
      "GoogleCloudDialogflowV2HumanAgentAssistantConfigSuggestionTriggerSettings": {
        "description": "Settings of suggestion trigger.",
        "properties": {
          "noSmalltalk": {
            "description": "Do not trigger if last utterance is small talk.",
            "type": "boolean"
          },
          "onlyEndUser": {
            "description": "Only trigger suggestion if participant role of last utterance is END_USER.",
            "type": "boolean"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://dialogflow.googleapis.com//v2/{conversationProfile}:setSuggestionFeatureConfig{?$.xgafv,access_token,alt,callback,fields,key,oauth_token,prettyPrint,quotaUser,upload_protocol,uploadType}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "This resource represents a long-running operation that is the result of a network API call.",
        "**Key properties:**",
        {
          "$ul": [
            "**done**: If the value is `false`, it means the operation is still in progress. If `true`, the operation is completed, and either `error` or `response` is available.",
            [
              "**error**: The `Status` type defines a logical error model that is suitable for different programming environments, including REST APIs and RPC APIs. It is used by [gRPC](https://github.com/grpc). Each `Status` message contains three pieces of data: error code, error message, and error details. You can find out more about this error model and how to work with it in the [API Design Guide](https://cloud.google.com/apis/design/errors).",
              {
                "$ul": [
                  "**code**: The status code, which should be an enum value of google.rpc.Code.",
                  "**details**: A list of messages that carry the error details. There is a common set of message types for APIs to use.",
                  "**message**: A developer-facing error message, which should be in English. Any user-facing error message should be localized and sent in the google.rpc.Status.details field, or localized by the client."
                ]
              }
            ],
            "**metadata**: Service-specific metadata associated with the operation. It typically contains progress information and common metadata such as create time. Some services might not provide such metadata. Any method that returns a long-running operation should document the metadata type, if any.",
            "**name**: The server-assigned name, which is only unique within the same service that originally returns it. If you use the default HTTP mapping, the `name` should be a resource name ending with `operations/{unique_id}`.",
            "**response**: The normal, successful response of the operation. If the original method returns no data on success, such as `Delete`, the response is `google.protobuf.Empty`. If the original method is standard `Get`/`Create`/`Update`, the response should be the resource. For other methods, the response should have the type `XxxResponse`, where `Xxx` is the original method name. For example, if the original method name is `TakeSnapshot()`, the inferred response type is `TakeSnapshotResponse`."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
