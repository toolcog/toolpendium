{
  "name": "androidpublisher_purchases_subscriptionsv2_get",
  "description": "Get metadata about a subscription",
  "parameters": {
    "type": "object",
    "properties": {
      "packageName": {
        "type": "string",
        "description": "The package of the application for which this subscription was purchased (for example, 'com.some.thing')."
      },
      "token": {
        "type": "string",
        "description": "Required. The token provided to the user's device when the subscription was purchased."
      },
      "$.xgafv": {
        "enum": [
          "1",
          "2"
        ],
        "type": "string",
        "description": "V1 error format."
      },
      "access_token": {
        "type": "string",
        "description": "OAuth access token."
      },
      "alt": {
        "enum": [
          "json",
          "media",
          "proto"
        ],
        "type": "string",
        "description": "Data format for response."
      },
      "callback": {
        "type": "string",
        "description": "JSONP"
      },
      "fields": {
        "type": "string",
        "description": "Selector specifying which fields to include in a partial response."
      },
      "key": {
        "type": "string",
        "description": "API key. Your API key identifies your project and provides you with API access, quota, and reports. Required unless you provide an OAuth 2.0 token."
      },
      "oauth_token": {
        "type": "string",
        "description": "OAuth 2.0 token for the current user."
      },
      "prettyPrint": {
        "type": "boolean",
        "description": "Returns response with indentations and line breaks."
      },
      "quotaUser": {
        "type": "string",
        "description": "Available to use for quota purposes for server-side applications. Can be any arbitrary string assigned to a user, but should not exceed 40 characters."
      },
      "upload_protocol": {
        "type": "string",
        "description": "Upload protocol for media (e.g. \"raw\", \"multipart\")."
      },
      "uploadType": {
        "type": "string",
        "description": "Legacy upload protocol for media (e.g. \"media\", \"multipart\")."
      }
    },
    "required": [
      "packageName",
      "token"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://androidpublisher.googleapis.com//androidpublisher/v3/applications/{packageName}/purchases/subscriptionsv2/tokens/{token}{?$.xgafv,access_token,alt,callback,fields,key,oauth_token,prettyPrint,quotaUser,upload_protocol,uploadType}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Indicates the status of a user's subscription purchase.",
        "**Key properties:**",
        {
          "$ul": [
            "**acknowledgementState**: The acknowledgement state of the subscription.",
            [
              "**canceledStateContext**: Information specific to a subscription in canceled state.",
              {
                "$ul": [
                  "**developerInitiatedCancellation**: Information specific to cancellations initiated by developers.",
                  "**replacementCancellation**: Information specific to cancellations caused by subscription replacement.",
                  "**systemInitiatedCancellation**: Information specific to cancellations initiated by Google system.",
                  [
                    "**userInitiatedCancellation**: Information specific to cancellations initiated by users.",
                    {
                      "$ul": [
                        [
                          "**cancelSurveyResult**: Result of the cancel survey when the subscription was canceled by the user.",
                          {
                            "$ul": [
                              "**reason**: The reason the user selected in the cancel survey.",
                              "**reasonUserInput**: Only set for CANCEL_SURVEY_REASON_OTHERS. This is the user's freeform response to the survey."
                            ]
                          }
                        ],
                        "**cancelTime**: The time at which the subscription was canceled by the user. The user might still have access to the subscription after this time. Use line_items.expiry_time to determine if a user still has access."
                      ]
                    }
                  ]
                ]
              }
            ],
            [
              "**externalAccountIdentifiers**: User account identifier in the third-party service.",
              {
                "$ul": [
                  "**externalAccountId**: User account identifier in the third-party service. Only present if account linking happened as part of the subscription purchase flow.",
                  "**obfuscatedExternalAccountId**: An obfuscated version of the id that is uniquely associated with the user's account in your app. Present for the following purchases: * If account linking happened as part of the subscription purchase flow. * It was specified using https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.Builder#setobfuscatedaccountid when the purchase was made.",
                  "**obfuscatedExternalProfileId**: An obfuscated version of the id that is uniquely associated with the user's profile in your app. Only present if specified using https://developer.android.com/reference/com/android/billingclient/api/BillingFlowParams.Builder#setobfuscatedprofileid when the purchase was made."
                ]
              }
            ],
            "**kind**: This kind represents a SubscriptionPurchaseV2 object in the androidpublisher service.",
            "**latestOrderId**: The order id of the latest order associated with the purchase of the subscription. For autoRenewing subscription, this is the order id of signup order if it is not renewed yet, or the last recurring order id (success, pending, or declined order). For prepaid subscription, this is the order id associated with the queried purchase token.",
            "**lineItems**: Item-level info for a subscription purchase. The items in the same purchase should be either all with AutoRenewingPlan or all with PrepaidPlan.",
            "**linkedPurchaseToken**: The purchase token of the old subscription if this subscription is one of the following: * Re-signup of a canceled but non-lapsed subscription * Upgrade/downgrade from a previous subscription. * Convert from prepaid to auto renewing subscription. * Convert from an auto renewing subscription to prepaid. * Topup a prepaid subscription.",
            [
              "**pausedStateContext**: Information specific to a subscription in paused state.",
              {
                "$ul": [
                  "**autoResumeTime**: Time at which the subscription will be automatically resumed."
                ]
              }
            ],
            "**regionCode**: ISO 3166-1 alpha-2 billing country/region code of the user at the time the subscription was granted.",
            "**startTime**: Time at which the subscription was granted. Not set for pending subscriptions (subscription was created but awaiting payment during signup).",
            [
              "**subscribeWithGoogleInfo**: Information associated with purchases made with 'Subscribe with Google'.",
              {
                "$ul": [
                  "**emailAddress**: The email address of the user when the subscription was purchased.",
                  "**familyName**: The family name of the user when the subscription was purchased.",
                  "**givenName**: The given name of the user when the subscription was purchased.",
                  "**profileId**: The Google profile id of the user when the subscription was purchased.",
                  "**profileName**: The profile name of the user when the subscription was purchased."
                ]
              }
            ],
            "**subscriptionState**: The current state of the subscription.",
            "**testPurchase**: Whether this subscription purchase is a test purchase."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
