{
  "name": "apigee_organizations_hostQueries_create",
  "description": "Submit a query at host level to be processed in the background. If the submission of the query succeeds, the API returns a 201 status and an ID that refer to the query. In addition to the HTTP status 201, the `state` of \"enqueued\" means that the request succeeded.",
  "parameters": {
    "type": "object",
    "properties": {
      "parent": {
        "type": "string",
        "description": "Required. The parent resource name. Must be of the form `organizations/{org}`."
      },
      "$.xgafv": {
        "enum": [
          "1",
          "2"
        ],
        "type": "string",
        "description": "V1 error format."
      },
      "access_token": {
        "type": "string",
        "description": "OAuth access token."
      },
      "alt": {
        "enum": [
          "json",
          "media",
          "proto"
        ],
        "type": "string",
        "description": "Data format for response."
      },
      "callback": {
        "type": "string",
        "description": "JSONP"
      },
      "fields": {
        "type": "string",
        "description": "Selector specifying which fields to include in a partial response."
      },
      "key": {
        "type": "string",
        "description": "API key. Your API key identifies your project and provides you with API access, quota, and reports. Required unless you provide an OAuth 2.0 token."
      },
      "oauth_token": {
        "type": "string",
        "description": "OAuth 2.0 token for the current user."
      },
      "prettyPrint": {
        "type": "boolean",
        "description": "Returns response with indentations and line breaks."
      },
      "quotaUser": {
        "type": "string",
        "description": "Available to use for quota purposes for server-side applications. Can be any arbitrary string assigned to a user, but should not exceed 40 characters."
      },
      "upload_protocol": {
        "type": "string",
        "description": "Upload protocol for media (e.g. \"raw\", \"multipart\")."
      },
      "uploadType": {
        "type": "string",
        "description": "Legacy upload protocol for media (e.g. \"media\", \"multipart\")."
      },
      "body": {
        "$ref": "#/$defs/GoogleCloudApigeeV1Query"
      }
    },
    "required": [
      "parent"
    ],
    "$defs": {
      "GoogleCloudApigeeV1Query": {
        "properties": {
          "csvDelimiter": {
            "description": "Delimiter used in the CSV file, if `outputFormat` is set to `csv`. Defaults to the `,` (comma) character. Supported delimiter characters include comma (`,`), pipe (`|`), and tab (`\\t`).",
            "type": "string"
          },
          "dimensions": {
            "description": "A list of dimensions. https://docs.apigee.com/api-platform/analytics/analytics-reference#dimensions",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "envgroupHostname": {
            "description": "Hostname needs to be specified if query intends to run at host level. This field is only allowed when query is submitted by CreateHostAsyncQuery where analytics data will be grouped by organization and hostname.",
            "type": "string"
          },
          "filter": {
            "description": "Boolean expression that can be used to filter data. Filter expressions can be combined using AND/OR terms and should be fully parenthesized to avoid ambiguity. See Analytics metrics, dimensions, and filters reference https://docs.apigee.com/api-platform/analytics/analytics-reference for more information on the fields available to filter on. For more information on the tokens that you use to build filter expressions, see Filter expression syntax. https://docs.apigee.com/api-platform/analytics/asynch-reports-api#filter-expression-syntax",
            "type": "string"
          },
          "groupByTimeUnit": {
            "description": "Time unit used to group the result set. Valid values include: second, minute, hour, day, week, or month. If a query includes groupByTimeUnit, then the result is an aggregation based on the specified time unit and the resultant timestamp does not include milliseconds precision. If a query omits groupByTimeUnit, then the resultant timestamp includes milliseconds precision.",
            "type": "string"
          },
          "limit": {
            "description": "Maximum number of rows that can be returned in the result.",
            "format": "int32",
            "type": "integer"
          },
          "metrics": {
            "description": "A list of Metrics.",
            "items": {
              "$ref": "#/$defs/GoogleCloudApigeeV1QueryMetric"
            },
            "type": "array"
          },
          "name": {
            "description": "Asynchronous Query Name.",
            "type": "string"
          },
          "outputFormat": {
            "description": "Valid values include: `csv` or `json`. Defaults to `json`. Note: Configure the delimiter for CSV output using the csvDelimiter property.",
            "type": "string"
          },
          "reportDefinitionId": {
            "description": "Asynchronous Report ID.",
            "type": "string"
          },
          "timeRange": {
            "description": "Required. Time range for the query. Can use the following predefined strings to specify the time range: `last60minutes` `last24hours` `last7days` Or, specify the timeRange as a structure describing start and end timestamps in the ISO format: yyyy-mm-ddThh:mm:ssZ. Example: \"timeRange\": { \"start\": \"2018-07-29T00:13:00Z\", \"end\": \"2018-08-01T00:18:00Z\" }"
          }
        },
        "type": "object"
      },
      "GoogleCloudApigeeV1QueryMetric": {
        "description": "More info about Metric: https://docs.apigee.com/api-platform/analytics/analytics-reference#metrics",
        "properties": {
          "alias": {
            "description": "Alias for the metric. Alias will be used to replace metric name in query results.",
            "type": "string"
          },
          "function": {
            "description": "Aggregation function: avg, min, max, or sum.",
            "type": "string"
          },
          "name": {
            "description": "Required. Metric name.",
            "type": "string"
          },
          "operator": {
            "description": "One of `+`, `-`, `/`, `%`, `*`.",
            "type": "string"
          },
          "value": {
            "description": "Operand value should be provided when operator is set.",
            "type": "string"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://apigee.googleapis.com//v1/{parent}/hostQueries{?$.xgafv,access_token,alt,callback,fields,key,oauth_token,prettyPrint,quotaUser,upload_protocol,uploadType}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**created**: Creation time of the query.",
            "**envgroupHostname**: Hostname is available only when query is executed at host level.",
            "**error**: Error is set when query fails.",
            "**executionTime**: ExecutionTime is available only after the query is completed.",
            "**name**: Asynchronous Query Name.",
            [
              "**queryParams**",
              {
                "$ul": [
                  "**dimensions**: Dimensions of the AsyncQuery.",
                  "**endTimestamp**: End timestamp of the query range.",
                  "**metrics**: Metrics of the AsyncQuery. Example: [\"name:message_count,func:sum,alias:sum_message_count\"]",
                  "**outputFormat**: Output format.",
                  "**startTimestamp**: Start timestamp of the query range.",
                  "**timeUnit**: Query GroupBy time unit."
                ]
              }
            ],
            "**reportDefinitionId**: Asynchronous Report ID.",
            [
              "**result**",
              {
                "$ul": [
                  "**expires**: Query result will be unaccessable after this time.",
                  "**self**: Self link of the query results. Example: `/organizations/myorg/environments/myenv/queries/9cfc0d85-0f30-46d6-ae6f-318d0cb961bd/result` or following format if query is running at host level: `/organizations/myorg/hostQueries/9cfc0d85-0f30-46d6-ae6f-318d0cb961bd/result`"
                ]
              }
            ],
            "**resultFileSize**: ResultFileSize is available only after the query is completed.",
            "**resultRows**: ResultRows is available only after the query is completed.",
            "**self**: Self link of the query. Example: `/organizations/myorg/environments/myenv/queries/9cfc0d85-0f30-46d6-ae6f-318d0cb961bd` or following format if query is running at host level: `/organizations/myorg/hostQueries/9cfc0d85-0f30-46d6-ae6f-318d0cb961bd`",
            "**state**: Query state could be \"enqueued\", \"running\", \"completed\", \"failed\".",
            "**updated**: Last updated timestamp for the query."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
