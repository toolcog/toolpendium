{
  "name": "addComment",
  "description": "Adds a comment to an issue.\n\nThis operation can be accessed anonymously.\n\n**[Permissions](#permissions) required:**\n\n *  *Browse projects* and *Add comments* [ project permission](https://confluence.atlassian.com/x/yodKLg) for the project that the issue containing the comment is in.\n *  If [issue-level security](https://confluence.atlassian.com/x/J4lKLg) is configured, issue-level security permission to view the issue.",
  "parameters": {
    "type": "object",
    "properties": {
      "issueIdOrKey": {
        "type": "string",
        "description": "The ID or key of the issue."
      },
      "expand": {
        "type": "string",
        "description": "Use [expand](#expansion) to include additional information about comments in the response. This parameter accepts `renderedBody`, which returns the comment body rendered in HTML."
      },
      "body": {
        "$ref": "#/$defs/Comment"
      }
    },
    "required": [
      "issueIdOrKey",
      "body"
    ],
    "$defs": {
      "Comment": {
        "additionalProperties": true,
        "description": "A comment.",
        "properties": {
          "author": {
            "allOf": [
              {
                "$ref": "#/$defs/UserDetails"
              }
            ],
            "description": "The ID of the user who created the comment.",
            "readOnly": true
          },
          "body": {
            "description": "The comment text in [Atlassian Document Format](https://developer.atlassian.com/cloud/jira/platform/apis/document/structure/)."
          },
          "created": {
            "description": "The date and time at which the comment was created.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          },
          "id": {
            "description": "The ID of the comment.",
            "readOnly": true,
            "type": "string"
          },
          "jsdAuthorCanSeeRequest": {
            "description": "Whether the comment was added from an email sent by a person who is not part of the issue. See [Allow external emails to be added as comments on issues](https://support.atlassian.com/jira-service-management-cloud/docs/allow-external-emails-to-be-added-as-comments-on-issues/)for information on setting up this feature.",
            "readOnly": true,
            "type": "boolean"
          },
          "jsdPublic": {
            "description": "Whether the comment is visible in Jira Service Desk. Defaults to true when comments are created in the Jira Cloud Platform. This includes when the site doesn't use Jira Service Desk or the project isn't a Jira Service Desk project and, therefore, there is no Jira Service Desk for the issue to be visible on. To create a comment with its visibility in Jira Service Desk set to false, use the Jira Service Desk REST API [Create request comment](https://developer.atlassian.com/cloud/jira/service-desk/rest/#api-rest-servicedeskapi-request-issueIdOrKey-comment-post) operation.",
            "readOnly": true,
            "type": "boolean"
          },
          "properties": {
            "description": "A list of comment properties. Optional on create and update.",
            "items": {
              "$ref": "#/$defs/EntityProperty"
            },
            "type": "array"
          },
          "renderedBody": {
            "description": "The rendered version of the comment.",
            "readOnly": true,
            "type": "string"
          },
          "self": {
            "description": "The URL of the comment.",
            "readOnly": true,
            "type": "string"
          },
          "updateAuthor": {
            "allOf": [
              {
                "$ref": "#/$defs/UserDetails"
              }
            ],
            "description": "The ID of the user who updated the comment last.",
            "readOnly": true
          },
          "updated": {
            "description": "The date and time at which the comment was updated last.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          },
          "visibility": {
            "allOf": [
              {
                "$ref": "#/$defs/Visibility"
              }
            ],
            "description": "The group or role to which this comment is visible. Optional on create and update."
          }
        },
        "type": "object"
      },
      "UserDetails": {
        "additionalProperties": false,
        "description": "User details permitted by the user's Atlassian Account privacy settings. However, be aware of these exceptions:\n\n *  User record deleted from Atlassian: This occurs as the result of a right to be forgotten request. In this case, `displayName` provides an indication and other parameters have default values or are blank (for example, email is blank).\n *  User record corrupted: This occurs as a results of events such as a server import and can only happen to deleted users. In this case, `accountId` returns *unknown* and all other parameters have fallback values.\n *  User record unavailable: This usually occurs due to an internal service outage. In this case, all parameters have fallback values.",
        "properties": {
          "accountId": {
            "description": "The account ID of the user, which uniquely identifies the user across all Atlassian products. For example, *5b10ac8d82e05b22cc7d4ef5*.",
            "maxLength": 128,
            "type": "string"
          },
          "accountType": {
            "description": "The type of account represented by this user. This will be one of 'atlassian' (normal users), 'app' (application user) or 'customer' (Jira Service Desk customer user)",
            "readOnly": true,
            "type": "string"
          },
          "active": {
            "description": "Whether the user is active.",
            "readOnly": true,
            "type": "boolean"
          },
          "avatarUrls": {
            "allOf": [
              {
                "$ref": "#/$defs/AvatarUrlsBean"
              }
            ],
            "description": "The avatars of the user.",
            "readOnly": true
          },
          "displayName": {
            "description": "The display name of the user. Depending on the user’s privacy settings, this may return an alternative value.",
            "readOnly": true,
            "type": "string"
          },
          "emailAddress": {
            "description": "The email address of the user. Depending on the user’s privacy settings, this may be returned as null.",
            "readOnly": true,
            "type": "string"
          },
          "key": {
            "description": "This property is no longer available and will be removed from the documentation soon. See the [deprecation notice](https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/) for details.",
            "readOnly": true,
            "type": "string"
          },
          "name": {
            "description": "This property is no longer available and will be removed from the documentation soon. See the [deprecation notice](https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/) for details.",
            "readOnly": true,
            "type": "string"
          },
          "self": {
            "description": "The URL of the user.",
            "readOnly": true,
            "type": "string"
          },
          "timeZone": {
            "description": "The time zone specified in the user's profile. Depending on the user’s privacy settings, this may be returned as null.",
            "readOnly": true,
            "type": "string"
          }
        },
        "type": "object"
      },
      "AvatarUrlsBean": {
        "additionalProperties": false,
        "properties": {
          "16x16": {
            "description": "The URL of the item's 16x16 pixel avatar.",
            "format": "uri",
            "type": "string"
          },
          "24x24": {
            "description": "The URL of the item's 24x24 pixel avatar.",
            "format": "uri",
            "type": "string"
          },
          "32x32": {
            "description": "The URL of the item's 32x32 pixel avatar.",
            "format": "uri",
            "type": "string"
          },
          "48x48": {
            "description": "The URL of the item's 48x48 pixel avatar.",
            "format": "uri",
            "type": "string"
          }
        },
        "type": "object"
      },
      "EntityProperty": {
        "additionalProperties": false,
        "description": "An entity property, for more information see [Entity properties](https://developer.atlassian.com/cloud/jira/platform/jira-entity-properties/).",
        "properties": {
          "key": {
            "description": "The key of the property. Required on create and update.",
            "type": "string"
          },
          "value": {
            "description": "The value of the property. Required on create and update."
          }
        },
        "type": "object"
      },
      "Visibility": {
        "additionalProperties": true,
        "description": "The group or role to which this item is visible.",
        "properties": {
          "identifier": {
            "description": "The ID of the group or the name of the role that visibility of this item is restricted to.",
            "nullable": true,
            "type": "string"
          },
          "type": {
            "description": "Whether visibility of this item is restricted to a group or role.",
            "enum": [
              "group",
              "role"
            ],
            "type": "string"
          },
          "value": {
            "description": "The name of the group or role that visibility of this item is restricted to. Please note that the name of a group is mutable, to reliably identify a group use `identifier`.",
            "type": "string"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://your-domain.atlassian.net/rest/api/3/issue/{issueIdOrKey}/comment{?expand}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "201": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "A comment.",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**author**: User details permitted by the user's Atlassian Account privacy settings. However, be aware of these exceptions:",
              {
                "$ul": [
                  "**accountId**: The account ID of the user, which uniquely identifies the user across all Atlassian products. For example, *5b10ac8d82e05b22cc7d4ef5*.",
                  "**accountType**: The type of account represented by this user. This will be one of 'atlassian' (normal users), 'app' (application user) or 'customer' (Jira Service Desk customer user)",
                  "**active**: Whether the user is active.",
                  [
                    "**avatarUrls**",
                    {
                      "$ul": [
                        "**16x16**: The URL of the item's 16x16 pixel avatar.",
                        "**24x24**: The URL of the item's 24x24 pixel avatar.",
                        "**32x32**: The URL of the item's 32x32 pixel avatar.",
                        "**48x48**: The URL of the item's 48x48 pixel avatar."
                      ]
                    }
                  ],
                  "**displayName**: The display name of the user. Depending on the user’s privacy settings, this may return an alternative value.",
                  "**emailAddress**: The email address of the user. Depending on the user’s privacy settings, this may be returned as null.",
                  "**key**: This property is no longer available and will be removed from the documentation soon. See the [deprecation notice](https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/) for details.",
                  "**name**: This property is no longer available and will be removed from the documentation soon. See the [deprecation notice](https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/) for details.",
                  "**self**: The URL of the user.",
                  "**timeZone**: The time zone specified in the user's profile. Depending on the user’s privacy settings, this may be returned as null."
                ]
              }
            ],
            "**body**: The comment text in [Atlassian Document Format](https://developer.atlassian.com/cloud/jira/platform/apis/document/structure/).",
            "**created**: The date and time at which the comment was created.",
            "**id**: The ID of the comment.",
            "**jsdAuthorCanSeeRequest**: Whether the comment was added from an email sent by a person who is not part of the issue. See [Allow external emails to be added as comments on issues](https://support.atlassian.com/jira-service-management-cloud/docs/allow-external-emails-to-be-added-as-comments-on-issues/)for information on setting up this feature.",
            "**jsdPublic**: Whether the comment is visible in Jira Service Desk. Defaults to true when comments are created in the Jira Cloud Platform. This includes when the site doesn't use Jira Service Desk or the project isn't a Jira Service Desk project and, therefore, there is no Jira Service Desk for the issue to be visible on. To create a comment with its visibility in Jira Service Desk set to false, use the Jira Service Desk REST API [Create request comment](https://developer.atlassian.com/cloud/jira/service-desk/rest/#api-rest-servicedeskapi-request-issueIdOrKey-comment-post) operation.",
            "**properties**: A list of comment properties. Optional on create and update.",
            "**renderedBody**: The rendered version of the comment.",
            "**self**: The URL of the comment.",
            [
              "**updateAuthor**: User details permitted by the user's Atlassian Account privacy settings. However, be aware of these exceptions:",
              {
                "$ul": [
                  "**accountId**: The account ID of the user, which uniquely identifies the user across all Atlassian products. For example, *5b10ac8d82e05b22cc7d4ef5*.",
                  "**accountType**: The type of account represented by this user. This will be one of 'atlassian' (normal users), 'app' (application user) or 'customer' (Jira Service Desk customer user)",
                  "**active**: Whether the user is active.",
                  [
                    "**avatarUrls**",
                    {
                      "$ul": [
                        "**16x16**: The URL of the item's 16x16 pixel avatar.",
                        "**24x24**: The URL of the item's 24x24 pixel avatar.",
                        "**32x32**: The URL of the item's 32x32 pixel avatar.",
                        "**48x48**: The URL of the item's 48x48 pixel avatar."
                      ]
                    }
                  ],
                  "**displayName**: The display name of the user. Depending on the user’s privacy settings, this may return an alternative value.",
                  "**emailAddress**: The email address of the user. Depending on the user’s privacy settings, this may be returned as null.",
                  "**key**: This property is no longer available and will be removed from the documentation soon. See the [deprecation notice](https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/) for details.",
                  "**name**: This property is no longer available and will be removed from the documentation soon. See the [deprecation notice](https://developer.atlassian.com/cloud/jira/platform/deprecation-notice-user-privacy-api-migration-guide/) for details.",
                  "**self**: The URL of the user.",
                  "**timeZone**: The time zone specified in the user's profile. Depending on the user’s privacy settings, this may be returned as null."
                ]
              }
            ],
            "**updated**: The date and time at which the comment was updated last.",
            [
              "**visibility**: The group or role to which this item is visible.",
              {
                "$ul": [
                  "**identifier**: The ID of the group or the name of the role that visibility of this item is restricted to.",
                  "**type**: Whether visibility of this item is restricted to a group or role.",
                  "**value**: The name of the group or role that visibility of this item is restricted to. Please note that the name of a group is mutable, to reliably identify a group use `identifier`."
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
