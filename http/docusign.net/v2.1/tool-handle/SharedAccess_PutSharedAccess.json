{
  "name": "SharedAccess_PutSharedAccess",
  "description": "This sets the shared access status for one or more users or templates.\n\nWhen setting user shared access, only users with account administration privileges can set shared access status for envelopes.\n\nWhen setting template shared access, only users who own a template and have sharing permission or with account administration privileges can set shared access for templates.\n\nChanges to the shared items status are not additive. The change always replaces the current status.\n\nTo change template shared access, add the query parameter `item_type` = `templates` to the request. When this is set, the user and envelopes properties are not required.\n\n**Note:** This functionality is a newer version of the [Update Group Share](/docs/esign-rest-api/reference/templates/templates/updategroupshare/) functionality.\n\n",
  "parameters": {
    "type": "object",
    "properties": {
      "accountId": {
        "type": "string",
        "description": "The external account number (int) or account ID GUID."
      },
      "item_type": {
        "type": "string",
        "description": "Specifies the type of shared item being set:\n- `envelopes`: Set envelope sharing between users.\n- `templates`: Set information about template sharing among users and groups.\n- `folders`: Get information about folder sharing among users and groups.\n"
      },
      "preserve_existing_shared_access": {
        "type": "string",
        "description": "When **true,** preserve the existing shared access settings."
      },
      "user_ids": {
        "type": "string",
        "description": "A comma-separated list of IDs for users whose shared item access is being set."
      },
      "body": {
        "$ref": "#/$defs/accountSharedAccess"
      }
    },
    "required": [
      "accountId"
    ],
    "$defs": {
      "accountSharedAccess": {
        "description": "Contains shared access information.",
        "properties": {
          "accountId": {
            "description": "The account ID associated with the envelope.",
            "type": "string"
          },
          "endPosition": {
            "description": "The last index position in the result set. ",
            "type": "string"
          },
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "nextUri": {
            "description": "The URI for the next chunk of records based on the search request. It is `null` if this is the last set of results for the search. ",
            "type": "string"
          },
          "previousUri": {
            "description": "The URI for the prior chunk of records based on the search request. It is `null` if this is the first set of results for the search. ",
            "type": "string"
          },
          "resultSetSize": {
            "description": "The number of results in this response. Because you can filter which entries are included in the response, this value is always less than or equal to the `totalSetSize`.",
            "type": "string"
          },
          "sharedAccess": {
            "description": "A list of shared access information of envelope and templates for the users specified in the request.",
            "items": {
              "$ref": "#/$defs/memberSharedItems"
            },
            "type": "array"
          },
          "startPosition": {
            "description": "The starting index position of the current result set.",
            "type": "string"
          },
          "totalSetSize": {
            "description": "The total number of items in the result set. This value is always greater than or equal to the value of `resultSetSize`.",
            "type": "string"
          }
        },
        "type": "object",
        "x-ds-definition-name": "accountSharedAccess",
        "x-ms-summary": "Contains shared access information."
      },
      "errorDetails": {
        "description": "This object describes errors that occur. It is only valid for responses and ignored in requests.",
        "properties": {
          "errorCode": {
            "description": "The code associated with the error condition.",
            "type": "string"
          },
          "message": {
            "description": "A brief message describing the error condition.",
            "type": "string"
          }
        },
        "type": "object",
        "x-ds-definition-name": "errorDetails",
        "x-ms-summary": "This object describes errors that occur. It is only valid for responses and ignored in requests."
      },
      "memberSharedItems": {
        "description": "Information about shared items.",
        "properties": {
          "envelopes": {
            "description": "List of information about shared envelopes.",
            "items": {
              "$ref": "#/$defs/sharedItem"
            },
            "type": "array"
          },
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "folders": {
            "description": "List of information about shared folders.",
            "items": {
              "$ref": "#/$defs/folderSharedItem"
            },
            "type": "array"
          },
          "templates": {
            "description": "List of information about shared templates.",
            "items": {
              "$ref": "#/$defs/templateSharedItem"
            },
            "type": "array"
          },
          "user": {
            "$ref": "#/$defs/userInfo"
          }
        },
        "type": "object",
        "x-ds-definition-name": "memberSharedItems",
        "x-ms-summary": "Information about shared items."
      },
      "sharedItem": {
        "description": "Information about the shared item.",
        "properties": {
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "shared": {
            "description": "How the item is shared. One of:\n\n- `not_shared`\n- `shared_to`\n- `shared_from`\n- `shared_to_and_from`",
            "type": "string"
          },
          "user": {
            "$ref": "#/$defs/userInfo"
          }
        },
        "type": "object",
        "x-ds-definition-name": "sharedItem",
        "x-ms-summary": "Information about the shared item."
      },
      "userInfo": {
        "description": "",
        "properties": {
          "accountId": {
            "description": "The account ID associated with the envelope.",
            "type": "string"
          },
          "accountName": {
            "description": "The name on the account.",
            "type": "string"
          },
          "activationAccessCode": {
            "description": "Access code provided to the user to activate the account.",
            "type": "string"
          },
          "email": {
            "description": "The user's email address.",
            "type": "string"
          },
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "ipAddress": {
            "description": "",
            "type": "string"
          },
          "loginStatus": {
            "description": "When **true,** indicates that the user is logged in. This is a read-only property.",
            "type": "string"
          },
          "membershipId": {
            "description": "The user's membership ID.",
            "type": "string"
          },
          "sendActivationEmail": {
            "description": "This field is no longer supported for most accounts. To create an eSignature user without sending an activation email, use the Admin API by following [these steps](/docs/admin-api/how-to/create-active-user/).",
            "type": "string"
          },
          "uri": {
            "description": "A URI containing the user ID.",
            "type": "string"
          },
          "userId": {
            "description": "The ID of the user to access.",
            "type": "string"
          },
          "userName": {
            "description": "The name of the user.",
            "type": "string"
          },
          "userStatus": {
            "description": "Status of the user's account. One of:\n\n- `ActivationRequired`\n- `ActivationSent`\n- `Active`\n- `Closed`\n- `Disabled`\n",
            "type": "string"
          },
          "userType": {
            "description": "The type of user, for example `CompanyUser`.",
            "type": "string"
          }
        },
        "type": "object",
        "x-ds-definition-name": "userInfo",
        "x-ms-summary": ""
      },
      "folderSharedItem": {
        "description": "",
        "properties": {
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "folderId": {
            "description": "The ID of the folder.",
            "type": "string"
          },
          "name": {
            "description": "The name of the folder.",
            "type": "string"
          },
          "owner": {
            "$ref": "#/$defs/userInfo"
          },
          "parentFolderId": {
            "description": "The ID of the parent folder.",
            "type": "string"
          },
          "parentFolderUri": {
            "description": "The URI for the parent folder.",
            "type": "string"
          },
          "shared": {
            "description": "Indicates how the folder is shared. Valid values are:\n\n- `not_shared`\n- `shared_to`",
            "type": "string"
          },
          "sharedGroups": {
            "description": "A list of groups that share the folder.",
            "items": {
              "$ref": "#/$defs/memberGroupSharedItem"
            },
            "type": "array"
          },
          "sharedUsers": {
            "description": "A list of users that share the folder.",
            "items": {
              "$ref": "#/$defs/userSharedItem"
            },
            "type": "array"
          },
          "uri": {
            "description": "A URI containing the user ID.",
            "type": "string"
          },
          "user": {
            "$ref": "#/$defs/userInfo"
          }
        },
        "type": "object",
        "x-ds-definition-name": "folderSharedItem",
        "x-ms-summary": ""
      },
      "memberGroupSharedItem": {
        "description": "Information about items shared among groups.",
        "properties": {
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "group": {
            "$ref": "#/$defs/group"
          },
          "shared": {
            "description": "How the item is shared. One of:\n\n\n- `not_shared`: The item is not shared.\n\n- `shared_to`: The item is shared.",
            "type": "string"
          }
        },
        "type": "object",
        "x-ds-definition-name": "memberGroupSharedItem",
        "x-ms-summary": "Information about items shared among groups."
      },
      "group": {
        "description": "This object contains information about a group.",
        "properties": {
          "dsGroupId": {
            "description": "",
            "type": "string"
          },
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "groupId": {
            "description": "The DocuSign group ID for the group.",
            "type": "string"
          },
          "groupName": {
            "description": "The name of the group.",
            "type": "string"
          },
          "groupType": {
            "description": "The group type.",
            "type": "string"
          },
          "permissionProfileId": {
            "description": "The ID of the permission profile associated with the group. Possible values include:\n\n- `2301416` (for the `DocuSign Viewer` profile)\n- `2301415` (for the `DocuSign Sender` profile)\n- `2301414` (for the `Account Administrator` profile)",
            "type": "string"
          },
          "users": {
            "description": "A list of the users in the group.",
            "items": {
              "$ref": "#/$defs/userInfo"
            },
            "type": "array"
          },
          "usersCount": {
            "description": "The total number of users in the group.",
            "type": "string"
          }
        },
        "type": "object",
        "x-ds-definition-name": "group",
        "x-ms-summary": "This object contains information about a group."
      },
      "userSharedItem": {
        "description": "Information about a shared item.",
        "properties": {
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "shared": {
            "description": "How the item is shared. One of:\n\n- `not_shared`\n- `shared_to`\n- `shared_from`\n- `shared_to_and_from`\n",
            "type": "string"
          },
          "user": {
            "$ref": "#/$defs/userInfo"
          }
        },
        "type": "object",
        "x-ds-definition-name": "userSharedItem",
        "x-ms-summary": "Information about a shared item."
      },
      "templateSharedItem": {
        "description": "Information about shared templates.",
        "properties": {
          "errorDetails": {
            "$ref": "#/$defs/errorDetails"
          },
          "owner": {
            "$ref": "#/$defs/userInfo"
          },
          "password": {
            "description": "The user's encrypted password hash.",
            "type": "string"
          },
          "shared": {
            "description": "How the template is shared. One of:\n\n- `not_shared`\n- `shared_to`\n",
            "type": "string"
          },
          "sharedGroups": {
            "description": "List of groups that share the template.",
            "items": {
              "$ref": "#/$defs/memberGroupSharedItem"
            },
            "type": "array"
          },
          "sharedUsers": {
            "description": "List of users that share the template.",
            "items": {
              "$ref": "#/$defs/userSharedItem"
            },
            "type": "array"
          },
          "templateId": {
            "description": "The unique identifier of the template. If this is not provided, DocuSign will generate a value. ",
            "type": "string"
          },
          "templateName": {
            "description": "The name of the shared template.",
            "type": "string"
          }
        },
        "type": "object",
        "x-ds-definition-name": "templateSharedItem",
        "x-ms-summary": "Information about shared templates."
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "https://www.docusign.net/restapi/v2.1/accounts/{accountId}/shared_access{?item_type,preserve_existing_shared_access,user_ids}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Contains shared access information.",
        "**Key properties:**",
        {
          "$ul": [
            "**accountId**: The account ID associated with the envelope.",
            "**endPosition**: The last index position in the result set. ",
            [
              "**errorDetails**: This object describes errors that occur. It is only valid for responses and ignored in requests.",
              {
                "$ul": [
                  "**errorCode**: The code associated with the error condition.",
                  "**message**: A brief message describing the error condition."
                ]
              }
            ],
            "**nextUri**: The URI for the next chunk of records based on the search request. It is `null` if this is the last set of results for the search. ",
            "**previousUri**: The URI for the prior chunk of records based on the search request. It is `null` if this is the first set of results for the search. ",
            "**resultSetSize**: The number of results in this response. Because you can filter which entries are included in the response, this value is always less than or equal to the `totalSetSize`.",
            "**sharedAccess**: A list of shared access information of envelope and templates for the users specified in the request.",
            "**startPosition**: The starting index position of the current result set.",
            "**totalSetSize**: The total number of items in the result set. This value is always greater than or equal to the value of `resultSetSize`."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "This object describes errors that occur. It is only valid for responses and ignored in requests.",
        "**Key properties:**",
        {
          "$ul": [
            "**errorCode**: The code associated with the error condition.",
            "**message**: A brief message describing the error condition."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
