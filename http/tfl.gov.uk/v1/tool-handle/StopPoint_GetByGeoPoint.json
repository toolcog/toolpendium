{
  "name": "StopPoint_GetByGeoPoint",
  "description": "Gets a list of StopPoints within {radius} by the specified criteria",
  "parameters": {
    "type": "object",
    "properties": {
      "stopTypes": {
        "items": {
          "type": "string"
        },
        "type": "array",
        "description": "a list of stopTypes that should be returned (a list of valid stop types can be obtained from the StopPoint/meta/stoptypes endpoint)"
      },
      "radius": {
        "format": "int32",
        "type": "integer",
        "description": "the radius of the bounding circle in metres (default : 200)"
      },
      "useStopPointHierarchy": {
        "type": "boolean",
        "description": "Re-arrange the output into a parent/child hierarchy"
      },
      "modes": {
        "items": {
          "type": "string"
        },
        "type": "array",
        "description": "the list of modes to search (comma separated mode names e.g. tube,dlr)"
      },
      "categories": {
        "items": {
          "type": "string"
        },
        "type": "array",
        "description": "an optional list of comma separated property categories to return in the StopPoint's property bag. If null or empty, all categories of property are returned. Pass the keyword \"none\" to return no properties (a valid list of categories can be obtained from the /StopPoint/Meta/categories endpoint)"
      },
      "returnLines": {
        "type": "boolean",
        "description": "true to return the lines that each stop point serves as a nested resource"
      },
      "location.lat": {
        "format": "double",
        "type": "number"
      },
      "location.lon": {
        "format": "double",
        "type": "number"
      }
    },
    "required": [
      "stopTypes",
      "location.lat",
      "location.lon"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://api.digital.tfl.gov.uk/StopPoint{?stopTypes,radius,useStopPointHierarchy,modes,categories,returnLines,location.lat,location.lon}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "A paged response containing StopPoints",
        "**Key properties:**",
        {
          "$ul": [
            "**centrePoint**: The centre latitude/longitude of this list of StopPoints",
            "**page**: The index of this page",
            "**pageSize**: The maximum size of the page in this response i.e. the maximum number of StopPoints",
            "**stopPoints**: Collection of stop points",
            "**total**: The total number of StopPoints available across all pages"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
