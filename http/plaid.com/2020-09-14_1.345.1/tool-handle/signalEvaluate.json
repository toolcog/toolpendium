{
  "name": "signalEvaluate",
  "description": "Use `/signal/evaluate` to evaluate a planned ACH transaction to get a return risk assessment (such as a risk score and risk tier) and additional risk signals.\n\nIn order to obtain a valid score for an ACH transaction, Plaid must have an access token for the account, and the Item must be healthy (receiving product updates) or have recently been in a healthy state. If the transaction does not meet eligibility requirements, an error will be returned corresponding to the underlying cause. If `/signal/evaluate` is called on the same transaction multiple times within a 24-hour period, cached results may be returned. For more information please refer to the error documentation on [Item errors](/docs/errors/item/) and [Link in Update Mode](/docs/link/update-mode/).\n\nNote: This request may take some time to complete if Signal is being added to an existing Item. This is because Plaid must communicate directly with the institution when retrieving the data for the first time.",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/SignalEvaluateRequest"
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "SignalEvaluateRequest": {
        "description": "SignalEvaluateRequest defines the request schema for `/signal/evaluate`",
        "properties": {
          "access_token": {
            "$ref": "#/$defs/AccessToken"
          },
          "account_id": {
            "description": "The Plaid `account_id` of the account that is the funding source for the proposed transaction. The `account_id` is returned in the `/accounts/get` endpoint as well as the [`onSuccess`](/docs/link/ios/#link-ios-onsuccess-linkSuccess-metadata-accounts-id) callback metadata.\n\nThis will return an [`INVALID_ACCOUNT_ID`](/docs/errors/invalid-input/#invalid_account_id) error if the account has been removed at the bank or if the `account_id` is no longer valid.",
            "type": "string"
          },
          "amount": {
            "description": "The transaction amount, in USD (e.g. `102.05`)",
            "format": "double",
            "type": "number"
          },
          "client_id": {
            "$ref": "#/$defs/APIClientID"
          },
          "client_transaction_id": {
            "description": "The unique ID that you would like to use to refer to this transaction. For your convenience mapping your internal data, you could use your internal ID/identifier for this transaction. The max length for this field is 36 characters.",
            "maxLength": 36,
            "minLength": 1,
            "type": "string"
          },
          "client_user_id": {
            "description": "A unique ID that identifies the end user in your system. This ID is used to correlate requests by a user with multiple Items. The max length for this field is 36 characters. Personally identifiable information, such as an email address or phone number, should not be used in the `client_user_id`.",
            "maxLength": 36,
            "type": "string"
          },
          "default_payment_method": {
            "description": "The default ACH or non-ACH payment method to complete the transaction.\n`SAME_DAY_ACH`: Same Day ACH by NACHA. The debit transaction is processed and settled on the same day\n`NEXT_DAY_ACH`: Next Day ACH settlement for debit transactions, offered by some payment processors\n`STANDARD_ACH`: standard ACH by NACHA\n`REAL_TIME_PAYMENTS`: real-time payments such as RTP and FedNow\n`DEBIT_CARD`: if the default payment is over debit card networks\n`MULTIPLE_PAYMENT_METHODS`: if there is no default debit rail or there are multiple payment methods\nPossible values:  `SAME_DAY_ACH`, `NEXT_DAY_ACH`, `STANDARD_ACH`, `REAL_TIME_PAYMENTS`, `DEBIT_CARD`, `MULTIPLE_PAYMENT_METHODS`",
            "nullable": true,
            "type": "string"
          },
          "device": {
            "$ref": "#/$defs/SignalDevice"
          },
          "is_recurring": {
            "description": "`true` if the ACH transaction is a recurring transaction; `false` otherwise ",
            "nullable": true,
            "type": "boolean"
          },
          "secret": {
            "$ref": "#/$defs/APISecret"
          },
          "user": {
            "$ref": "#/$defs/SignalUser"
          },
          "user_present": {
            "description": "`true` if the end user is present while initiating the ACH transfer and the endpoint is being called; `false` otherwise (for example, when the ACH transfer is scheduled and the end user is not present, or you call this endpoint after the ACH transfer but before submitting the Nacha file for ACH processing).",
            "nullable": true,
            "type": "boolean"
          }
        },
        "required": [
          "access_token",
          "account_id",
          "client_transaction_id",
          "amount"
        ],
        "title": "SignalEvaluateRequest",
        "type": "object"
      },
      "AccessToken": {
        "description": "The access token associated with the Item data is being requested for.",
        "title": "AccessToken",
        "type": "string"
      },
      "APIClientID": {
        "description": "Your Plaid API `client_id`. The `client_id` is required and may be provided either in the `PLAID-CLIENT-ID` header or as part of a request body.",
        "title": "ClientID",
        "type": "string"
      },
      "SignalDevice": {
        "description": "Details about the end user's device",
        "properties": {
          "ip_address": {
            "description": "The IP address of the device that initiated the transaction",
            "nullable": true,
            "type": "string"
          },
          "user_agent": {
            "description": "The user agent of the device that initiated the transaction (e.g. \"Mozilla/5.0\")",
            "nullable": true,
            "type": "string"
          }
        },
        "title": "SignalEvaluateDevice",
        "type": "object"
      },
      "APISecret": {
        "description": "Your Plaid API `secret`. The `secret` is required and may be provided either in the `PLAID-SECRET` header or as part of a request body.",
        "title": "APISecret",
        "type": "string"
      },
      "SignalUser": {
        "description": "Details about the end user initiating the transaction (i.e., the account holder).",
        "properties": {
          "address": {
            "$ref": "#/$defs/SignalAddressData"
          },
          "email_address": {
            "description": "The user's email address.",
            "nullable": true,
            "type": "string"
          },
          "name": {
            "$ref": "#/$defs/SignalPersonName"
          },
          "phone_number": {
            "description": "The user's phone number, in E.164 format: +{countrycode}{number}. For example: \"+14151234567\"",
            "nullable": true,
            "type": "string"
          }
        },
        "title": "SignalUser",
        "type": "object"
      },
      "SignalAddressData": {
        "additionalProperties": true,
        "description": "Data about the components comprising an address.",
        "nullable": true,
        "properties": {
          "city": {
            "description": "The full city name",
            "type": "string"
          },
          "country": {
            "description": "The ISO 3166-1 alpha-2 country code",
            "nullable": true,
            "type": "string"
          },
          "postal_code": {
            "description": "The postal code",
            "nullable": true,
            "type": "string"
          },
          "region": {
            "description": "The region or state\nExample: `\"NC\"`",
            "nullable": true,
            "type": "string"
          },
          "street": {
            "description": "The full street address\nExample: `\"564 Main Street, APT 15\"`",
            "type": "string"
          }
        },
        "title": "AddressData",
        "type": "object"
      },
      "SignalPersonName": {
        "description": "The user's legal name",
        "nullable": true,
        "properties": {
          "family_name": {
            "description": "The user's family name / surname",
            "nullable": true,
            "type": "string"
          },
          "given_name": {
            "description": "The user's given name. If the user has a one-word name, it should be provided in this field.",
            "nullable": true,
            "type": "string"
          },
          "middle_name": {
            "description": "The user's middle name",
            "nullable": true,
            "type": "string"
          },
          "prefix": {
            "description": "The user's name prefix (e.g. \"Mr.\")",
            "nullable": true,
            "type": "string"
          },
          "suffix": {
            "description": "The user's name suffix (e.g. \"II\")",
            "nullable": true,
            "type": "string"
          }
        },
        "title": "SignalPersonName",
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://production.plaid.com/signal/evaluate"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "SignalEvaluateResponse"
        },
        "SignalEvaluateResponse defines the response schema for `/signal/income/evaluate`",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**core_attributes**: The core attributes object contains additional data that can be used to assess the ACH return risk. Examples of data include:",
              {
                "$ul": [
                  "**address_change_count_28d**: The number of times the account's addresses on file have changed over the past 28 days",
                  "**address_change_count_90d**: The number of times the account's addresses on file have changed over the past 90 days",
                  "**available_balance**: Available balance, as of the `balance_last_updated` time. The available balance is the current balance less any outstanding holds or debits that have not yet posted to the account.",
                  "**balance_last_updated**: Timestamp in [ISO 8601](https://wikipedia.org/wiki/ISO_8601) format (YYYY-MM-DDTHH:mm:ssZ) indicating the last time that the balance for the given account has been updated.",
                  "**credit_transactions_count_10d**: The total number of credit (inflow) transactions over the past 10 days from the account that will be debited",
                  "**credit_transactions_count_30d**: The total number of credit (inflow) transactions over the past 30 days from the account that will be debited",
                  "**credit_transactions_count_60d**: The total number of credit (inflow) transactions over the past 60 days from the account that will be debited",
                  "**credit_transactions_count_90d**: The total number of credit (inflow) transactions over the past 90 days from the account that will be debited",
                  "**current_balance**: Current balance, as of the `balance_last_updated` time. The current balance is the total amount of funds in the account.",
                  "**days_since_first_plaid_connection**: The number of days since the first time the Item was connected to an application via Plaid",
                  "**days_with_negative_balance_count_90d**: The number of days within the past 90 days when the account that will be debited had a negative end-of-day available balance",
                  "**debit_transactions_count_10d**: The total number of debit (outflow) transactions over the past 10 days from the account that will be debited",
                  "**debit_transactions_count_30d**: The total number of debit (outflow) transactions over the past 30 days from the account that will be debited",
                  "**debit_transactions_count_60d**: The total number of debit (outflow) transactions over the past 60 days from the account that will be debited",
                  "**debit_transactions_count_90d**: The total number of debit (outflow) transactions over the past 90 days from the account that will be debited",
                  "**email_change_count_28d**: The number of times the account's email addresses on file have changed over the past 28 days",
                  "**email_change_count_90d**: The number of times the account's email addresses on file have changed over the past 90 days",
                  "**failed_plaid_non_oauth_authentication_attempts_count_30d**: The number of failed non-OAuth authentication attempts via Plaid for this bank account over the past 30 days",
                  "**failed_plaid_non_oauth_authentication_attempts_count_3d**: The number of failed non-OAuth authentication attempts via Plaid for this bank account over the past 3 days",
                  "**failed_plaid_non_oauth_authentication_attempts_count_7d**: The number of failed non-OAuth authentication attempts via Plaid for this bank account over the past 7 days",
                  "**is_savings_or_money_market_account**: Indicates if the ACH transaction funding account is a savings/money market account",
                  "**nsf_overdraft_transactions_count_30d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to non-sufficient funds/overdrafts over the past 30 days from the account that will be debited.",
                  "**nsf_overdraft_transactions_count_60d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to non-sufficient funds/overdrafts over the past 60 days from the account that will be debited.",
                  "**nsf_overdraft_transactions_count_7d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to non-sufficient funds/overdrafts over the past 7 days from the account that will be debited.",
                  "**nsf_overdraft_transactions_count_90d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to non-sufficient funds/overdrafts over the past 90 days from the account that will be debited.",
                  "**p10_eod_balance_30d**: The 10th percentile of the end-of-day available balance over the past 30 days of the account that will be debited",
                  "**p10_eod_balance_31d_to_60d**: The 10th percentile of the end-of-day available balance between day 31 and day 60 over the past 60 days of the account that will be debited",
                  "**p10_eod_balance_60d**: The 10th percentile of the end-of-day available balance over the past 60 days of the account that will be debited",
                  "**p10_eod_balance_61d_to_90d**: The 10th percentile of the end-of-day available balance between day 61 and day 90 over the past 60 days of the account that will be debited",
                  "**p10_eod_balance_90d**: The 10th percentile of the end-of-day available balance over the past 90 days of the account that will be debited",
                  "**p50_credit_transactions_amount_28d**: The 50th percentile of all credit (inflow) transaction amounts over the past 28 days from the account that will be debited",
                  "**p50_debit_transactions_amount_28d**: The 50th percentile of all debit (outflow) transaction amounts over the past 28 days from the account that will be debited",
                  "**p50_eod_balance_30d**: The 50th percentile of the end-of-day available balance over the past 30 days of the account that will be debited",
                  "**p50_eod_balance_31d_to_60d**: The 50th percentile of the end-of-day available balance between day 31 and day 60 over the past 60 days of the account that will be debited",
                  "**p50_eod_balance_60d**: The 50th percentile of the end-of-day available balance over the past 60 days of the account that will be debited",
                  "**p50_eod_balance_61d_to_90d**: The 50th percentile of the end-of-day available balance between day 61 and day 90 over the past 60 days of the account that will be debited",
                  "**p50_eod_balance_90d**: The 50th percentile of the end-of-day available balance over the past 90 days of the account that will be debited",
                  "**p90_eod_balance_30d**: The 90th percentile of the end-of-day available balance over the past 30 days of the account that will be debited",
                  "**p90_eod_balance_31d_to_60d**: The 90th percentile of the end-of-day available balance between day 31 and day 60 over the past 60 days of the account that will be debited",
                  "**p90_eod_balance_60d**: The 90th percentile of the end-of-day available balance over the past 60 days of the account that will be debited",
                  "**p90_eod_balance_61d_to_90d**: The 90th percentile of the end-of-day available balance between day 61 and day 90 over the past 60 days of the account that will be debited",
                  "**p90_eod_balance_90d**: The 90th percentile of the end-of-day available balance over the past 90 days of the account that will be debited",
                  "**p95_credit_transactions_amount_28d**: The 95th percentile of all credit (inflow) transaction amounts over the past 28 days from the account that will be debited",
                  "**p95_debit_transactions_amount_28d**: The 95th percentile of all debit (outflow) transaction amounts over the past 28 days from the account that will be debited",
                  "**phone_change_count_28d**: The number of times the account's phone numbers on file have changed over the past 28 days",
                  "**phone_change_count_90d**: The number of times the account's phone numbers on file have changed over the past 90 days",
                  "**plaid_connections_count_30d**: The number of times the Item has been connected to applications via Plaid over the past 30 days",
                  "**plaid_connections_count_7d**: The number of times the Item has been connected to applications via Plaid over the past 7 days",
                  "**plaid_non_oauth_authentication_attempts_count_30d**: The number of non-OAuth authentication attempts via Plaid for this bank account over the past 30 days",
                  "**plaid_non_oauth_authentication_attempts_count_3d**: The number of non-OAuth authentication attempts via Plaid for this bank account over the past 3 days",
                  "**plaid_non_oauth_authentication_attempts_count_7d**: The number of non-OAuth authentication attempts via Plaid for this bank account over the past 7 days",
                  "**total_credit_transactions_amount_10d**: The total credit (inflow) transaction amount over the past 10 days from the account that will be debited",
                  "**total_credit_transactions_amount_30d**: The total credit (inflow) transaction amount over the past 30 days from the account that will be debited",
                  "**total_credit_transactions_amount_60d**: The total credit (inflow) transaction amount over the past 60 days from the account that will be debited",
                  "**total_credit_transactions_amount_90d**: The total credit (inflow) transaction amount over the past 90 days from the account that will be debited",
                  "**total_debit_transactions_amount_10d**: The total debit (outflow) transaction amount over the past 10 days from the account that will be debited",
                  "**total_debit_transactions_amount_30d**: The total debit (outflow) transaction amount over the past 30 days from the account that will be debited",
                  "**total_debit_transactions_amount_60d**: The total debit (outflow) transaction amount over the past 60 days from the account that will be debited",
                  "**total_debit_transactions_amount_90d**: The total debit (outflow) transaction amount over the past 90 days from the account that will be debited",
                  "**total_plaid_connections_count**: The total number of times the Item has been connected to applications via Plaid",
                  "**transactions_last_updated**: Timestamp in [ISO 8601](https://wikipedia.org/wiki/ISO_8601) format (YYYY-MM-DDTHH:mm:ssZ) indicating the last time that the transactions for the given account have been updated.",
                  "**unauthorized_transactions_count_30d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to unauthorized transactions over the past 30 days from the account that will be debited.",
                  "**unauthorized_transactions_count_60d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to unauthorized transactions over the past 60 days from the account that will be debited.",
                  "**unauthorized_transactions_count_7d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to unauthorized transactions over the past 7 days from the account that will be debited.",
                  "**unauthorized_transactions_count_90d**: We parse and analyze historical transaction metadata to identify the number of possible past returns due to unauthorized transactions over the past 90 days from the account that will be debited."
                ]
              }
            ],
            "**request_id**: A unique identifier for the request, which can be used for troubleshooting. This identifier, like all Plaid identifiers, is case sensitive.",
            [
              "**scores**: Risk scoring details broken down by risk category.",
              {
                "$ul": [
                  [
                    "**bank_initiated_return_risk**: The object contains a risk score and a risk tier that evaluate the transaction return risk because an account is overdrawn or because an ineligible account is used. Common return codes in this category include: \"R01\", \"R02\", \"R03\", \"R04\", \"R06\", \"R08\",  \"R09\", \"R13\", \"R16\", \"R17\", \"R20\", \"R23\". These returns have a turnaround time of 2 banking days.",
                    {
                      "$ul": [
                        "**risk_tier**: In the `bank_initiated_return_risk` object, there are eight risk tiers corresponding to the scores:",
                        "**score**: A score from 1-99 that indicates the transaction return risk: a higher risk score suggests a higher return likelihood."
                      ]
                    }
                  ],
                  [
                    "**customer_initiated_return_risk**: The object contains a risk score and a risk tier that evaluate the transaction return risk of an unauthorized debit. Common return codes in this category include: \"R05\", \"R07\", \"R10\", \"R11\", \"R29\". These returns typically have a return time frame of up to 60 calendar days. During this period, the customer of financial institutions can dispute a transaction as unauthorized.",
                    {
                      "$ul": [
                        "**risk_tier**: A tier corresponding to the projected likelihood that the transaction, if initiated, will be subject to a return.",
                        "**score**: A score from 1-99 that indicates the transaction return risk: a higher risk score suggests a higher return likelihood."
                      ]
                    }
                  ]
                ]
              }
            ],
            "**warnings**: If bank information was not able to be used as features into the Signal model, this array contains warnings describing why we were missing bank data"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Error"
        },
        "We use standard HTTP response codes for success and failure notifications, and our errors are further classified by `error_type`. In general, 200 HTTP codes correspond to success, 40X codes are for developer- or user-related failures, and 50X codes are for Plaid-related issues. An Item with a non-`null` error object will only be part of an API response when calling `/item/get` to view Item status. Otherwise, error fields will be `null` if no error has occurred; if an error has occurred, an error code will be returned instead.",
        "**Key properties:**",
        {
          "$ul": [
            "**causes**: In the Assets product, a request can pertain to more than one Item. If an error is returned for such a request, `causes` will return an array of errors containing a breakdown of these errors on the individual Item level, if any can be identified.",
            "**display_message**: A user-friendly representation of the error code. `null` if the error is not related to user action.",
            "**documentation_url**: The URL of a Plaid documentation page with more information about the error",
            "**error_code**: The particular error code. Safe for programmatic use.",
            "**error_message**: A developer-friendly representation of the error code. This may change over time and is not safe for programmatic use.",
            "**error_type**: A broad categorization of the error. Safe for programmatic use.",
            "**request_id**: A unique ID identifying the request, to be used for troubleshooting purposes. This field will be omitted in errors provided by webhooks.",
            "**status**: The HTTP status code associated with the error. This will only be returned in the response body when the error information is provided via a webhook.",
            "**suggested_action**: Suggested steps for resolving the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
