{
  "name": "transferAuthorizationCreate",
  "description": "Use the `/transfer/authorization/create` endpoint to determine transfer failure risk.\n\nIn Plaid's Sandbox environment the decisions will be returned as follows:\n\n  - To approve a transfer with null rationale code, make an authorization request with an `amount` less than the available balance in the account.\n\n  - To approve a transfer with the rationale code `MANUALLY_VERIFIED_ITEM`, create an Item in Link through the [Same Day Micro-deposits flow](https://plaid.com/docs/auth/coverage/testing/#testing-same-day-micro-deposits).\n\n  - To approve a transfer with the rationale code `ITEM_LOGIN_REQUIRED`, [reset the login for an Item](https://plaid.com/docs/sandbox/#item_login_required).\n\n  - To decline a transfer with the rationale code `NSF`, the available balance on the account must be less than the authorization `amount`. See [Create Sandbox test data](https://plaid.com/docs/sandbox/user-custom/) for details on how to customize data in Sandbox.\n\n  - To decline a transfer with the rationale code `RISK`, the available balance on the account must be exactly $0. See [Create Sandbox test data](https://plaid.com/docs/sandbox/user-custom/) for details on how to customize data in Sandbox.\n\n`device.ip_address`, `device.user_agent` are required fields.\n\nFor [Guarantee](https://www.plaid.com/docs//transfer/guarantee/), the following fields are required : `idempotency_key`, `user.phone_number` (optional if `email_address` provided), `user.email_address` (optional if `phone_number` provided), `device.ip_address`, `device.user_agent`, and `user_present`.",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/TransferAuthorizationCreateRequest"
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "TransferAuthorizationCreateRequest": {
        "description": "Defines the request schema for `/transfer/authorization/create`",
        "properties": {
          "access_token": {
            "$ref": "#/$defs/TransferAccessToken"
          },
          "account_id": {
            "$ref": "#/$defs/TransferAccountID"
          },
          "ach_class": {
            "$ref": "#/$defs/ACHClass"
          },
          "amount": {
            "$ref": "#/$defs/TransferAmount"
          },
          "beacon_session_id": {
            "description": "The unique identifier returned by Plaid's [beacon](https://plaid.com/docs/transfer/guarantee/#using-a-beacon) when it is run on your webpage. Required for Guarantee customers who are not using [Transfer UI](https://plaid.com/docs/transfer/using-transfer-ui/) and have a web checkout experience.",
            "nullable": true,
            "type": "string"
          },
          "client_id": {
            "$ref": "#/$defs/APIClientID"
          },
          "device": {
            "$ref": "#/$defs/TransferAuthorizationDevice"
          },
          "funding_account_id": {
            "$ref": "#/$defs/TransferFundingAccountIDRequest"
          },
          "idempotency_key": {
            "$ref": "#/$defs/TransferAuthorizationIdempotencyKey"
          },
          "iso_currency_code": {
            "description": "The currency of the transfer amount. The default value is \"USD\".",
            "type": "string"
          },
          "network": {
            "$ref": "#/$defs/TransferNetwork"
          },
          "origination_account_id": {
            "deprecated": true,
            "description": "Plaid's unique identifier for the origination account for this authorization. If not specified, the default account will be used.",
            "type": "string",
            "x-hidden-from-docs": true
          },
          "originator_client_id": {
            "description": "The Plaid client ID that is the originator of this transfer. Only needed if creating transfers on behalf of another client as a third-party sender (TPS).",
            "nullable": true,
            "type": "string"
          },
          "payment_profile_token": {
            "$ref": "#/$defs/TransferPaymentProfileToken"
          },
          "secret": {
            "$ref": "#/$defs/APISecret"
          },
          "type": {
            "$ref": "#/$defs/TransferType"
          },
          "user": {
            "$ref": "#/$defs/TransferAuthorizationUserInRequest"
          },
          "user_present": {
            "description": "Required for Guarantee. If the end user is initiating the specific transfer themselves via an interactive UI, this should be `true`; for automatic recurring payments where the end user is not actually initiating each individual transfer, it should be `false`.",
            "nullable": true,
            "type": "boolean"
          },
          "with_guarantee": {
            "default": true,
            "description": "If set to `false`, Plaid will not offer a `guarantee_decision` for this request(Guarantee customers only).",
            "nullable": true,
            "type": "boolean"
          }
        },
        "required": [
          "type",
          "network",
          "amount",
          "user"
        ],
        "title": "TransferAuthorizationCreateRequest",
        "type": "object"
      },
      "TransferAccessToken": {
        "description": "The Plaid `access_token` for the account that will be debited or credited. Required if not using `payment_profile_token`.",
        "type": "string"
      },
      "TransferAccountID": {
        "description": "The Plaid `account_id` corresponding to the end-user account that will be debited or credited. Returned only if `account_id` was set on intent creation.",
        "type": "string"
      },
      "ACHClass": {
        "description": "Specifies the use case of the transfer. Required for transfers on an ACH network.\n\n`\"ccd\"` - Corporate Credit or Debit - fund transfer between two corporate bank accounts\n\n`\"ppd\"` - Prearranged Payment or Deposit - the transfer is part of a pre-existing relationship with a consumer, eg. bill payment\n\n`\"tel\"` - Telephone-Initiated Entry\n\n`\"web\"` - Internet-Initiated Entry - debits from a consumer’s account where their authorization is obtained over the Internet",
        "enum": [
          "ccd",
          "ppd",
          "tel",
          "web"
        ],
        "title": "ACHClass",
        "type": "string"
      },
      "TransferAmount": {
        "description": "The amount of the transfer (decimal string with two digits of precision e.g. \"10.00\").",
        "title": "TransferAmount",
        "type": "string"
      },
      "APIClientID": {
        "description": "Your Plaid API `client_id`. The `client_id` is required and may be provided either in the `PLAID-CLIENT-ID` header or as part of a request body.",
        "title": "ClientID",
        "type": "string"
      },
      "TransferAuthorizationDevice": {
        "additionalProperties": true,
        "description": "Information about the device being used to initiate the authorization.",
        "properties": {
          "ip_address": {
            "description": "The IP address of the device being used to initiate the authorization. Required for Guarantee.",
            "type": "string"
          },
          "user_agent": {
            "description": "The user agent of the device being used to initiate the authorization. Required for Guarantee.",
            "type": "string"
          }
        },
        "title": "TransferAuthorizationDevice",
        "type": "object"
      },
      "TransferFundingAccountIDRequest": {
        "description": "The id of the funding account to use, available in the Plaid Dashboard. This determines which of your business checking accounts will be credited or debited. Defaults to the account configured during onboarding.",
        "nullable": true,
        "type": "string"
      },
      "TransferAuthorizationIdempotencyKey": {
        "description": "A random key provided by the client, per unique authorization. Maximum of 50 characters.\n\nThe API supports idempotency for safely retrying requests without accidentally performing the same operation twice. For example, if a request to create an authorization fails due to a network connection error, you can retry the request with the same idempotency key to guarantee that only a single authorization is created.\n\nFailure to provide this key may result in duplicate charges.\n\nRequired for guaranteed ACH customers.",
        "maxLength": 50,
        "nullable": true,
        "title": "TransferAuthorizationIdempotencyKey",
        "type": "string"
      },
      "TransferNetwork": {
        "description": "The network or rails used for the transfer.\n\nFor transfers submitted as either `ach` or `same-day-ach` the cutoff for same-day is 9:30 AM Pacific Time and the cutoff for next-day transfers is 5:30 PM Pacific Time. It is recommended to submit a transfer at least 15 minutes before the cutoff time in order to ensure that it will be processed before the cutoff. Any transfer that is indicated as `same-day-ach` and that misses the same-day cutoff, but is submitted in time for the next-day cutoff, will be sent over next-day rails and will not incur same-day charges. Note that both legs of the transfer will be downgraded if applicable.",
        "enum": [
          "ach",
          "same-day-ach",
          "rtp"
        ],
        "title": "TransferNetwork",
        "type": "string"
      },
      "TransferPaymentProfileToken": {
        "description": "The payment profile token associated with the Payment Profile that will be debited or credited. Required if not using `access_token`.",
        "type": "string"
      },
      "APISecret": {
        "description": "Your Plaid API `secret`. The `secret` is required and may be provided either in the `PLAID-SECRET` header or as part of a request body.",
        "title": "APISecret",
        "type": "string"
      },
      "TransferType": {
        "description": "The type of transfer. This will be either `debit` or `credit`.  A `debit` indicates a transfer of money into the origination account; a `credit` indicates a transfer of money out of the origination account.",
        "enum": [
          "debit",
          "credit"
        ],
        "title": "TransferType",
        "type": "string"
      },
      "TransferAuthorizationUserInRequest": {
        "additionalProperties": true,
        "description": "The legal name and other information for the account holder.",
        "properties": {
          "address": {
            "$ref": "#/$defs/TransferUserAddressInRequest"
          },
          "email_address": {
            "description": "The user's email address. In order to qualify for a guaranteed transfer, at least one of `phone_number` or `email_address` must be provided.",
            "type": "string"
          },
          "legal_name": {
            "description": "The user's legal name.",
            "type": "string"
          },
          "phone_number": {
            "description": "The user's phone number. In order to qualify for a guaranteed transfer, at least one of `phone_number` or `email_address` must be provided.",
            "type": "string"
          }
        },
        "required": [
          "legal_name"
        ],
        "title": "TransferAuthorizationUserInRequest",
        "type": "object"
      },
      "TransferUserAddressInRequest": {
        "additionalProperties": true,
        "description": "The address associated with the account holder. Providing this data will improve the likelihood that Plaid will be able to guarantee the transfer, if applicable.",
        "properties": {
          "city": {
            "description": "Ex. \"San Francisco\"",
            "type": "string"
          },
          "country": {
            "description": "A two-letter country code (e.g., \"US\").",
            "type": "string"
          },
          "postal_code": {
            "description": "The postal code (e.g., \"94103\").",
            "type": "string"
          },
          "region": {
            "description": "The state or province (e.g., \"CA\").",
            "type": "string"
          },
          "street": {
            "description": "The street number and name (i.e., \"100 Market St.\").",
            "type": "string"
          }
        },
        "title": "TransferUserAddressInRequest",
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://production.plaid.com/transfer/authorization/create"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "TransferAuthorizationCreateResponse"
        },
        "Defines the response schema for `/transfer/authorization/create`",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**authorization**: Contains the authorization decision for a proposed transfer.",
              {
                "$ul": [
                  "**created**: The datetime representing when the authorization was created, in the format `2006-01-02T15:04:05Z`.",
                  "**decision**: ",
                  [
                    "**decision_rationale**: The rationale for Plaid's decision regarding a proposed transfer. It is always set for `declined` decisions, and may or may not be null for `approved` decisions.",
                    {
                      "$ul": [
                        "**code**: A code representing the rationale for approving or declining the proposed transfer. Possible values are:",
                        "**description**: A human-readable description of the code associated with a transfer approval or transfer decline."
                      ]
                    }
                  ],
                  "**guarantee_decision**: Indicates whether the transfer is guaranteed by Plaid (Guarantee customers only). This field will contain either `GUARANTEED` or `NOT_GUARANTEED` indicating whether Plaid will guarantee the transfer. If the transfer is not guaranteed, additional information will be provided in the `guarantee_decision_rationale` field. Refer to the `code` field in `guarantee_decision_rationale` for details.",
                  [
                    "**guarantee_decision_rationale**: The rationale for Plaid's decision to not guarantee a transfer. Will be `null` unless `guarantee_decision` is `NOT_GUARANTEED`.",
                    {
                      "$ul": [
                        "**code**: A code representing the reason Plaid declined to guarantee this transfer:",
                        "**description**: A human-readable description of why the transfer cannot be guaranteed."
                      ]
                    }
                  ],
                  "**id**: Plaid’s unique identifier for a transfer authorization.",
                  [
                    "**proposed_transfer**: Details regarding the proposed transfer.",
                    {
                      "$ul": [
                        "**account_id**: The Plaid `account_id` for the account that will be debited or credited.",
                        "**ach_class**: Specifies the use case of the transfer. Required for transfers on an ACH network.",
                        "**amount**: The amount of the transfer (decimal string with two digits of precision e.g. \"10.00\").",
                        "**funding_account_id**: The id of the funding account to use, available in the Plaid Dashboard. This determines which of your business checking accounts will be credited or debited.",
                        "**iso_currency_code**: The currency of the transfer amount. The default value is \"USD\".",
                        "**network**: The network or rails used for the transfer.",
                        "**origination_account_id**: Plaid's unique identifier for the origination account that was used for this transfer.",
                        "**originator_client_id**: The Plaid client ID that is the originator of this transfer. Only present if created on behalf of another client as a third-party sender (TPS).",
                        "**type**: The type of transfer. This will be either `debit` or `credit`.  A `debit` indicates a transfer of money into the origination account; a `credit` indicates a transfer of money out of the origination account.",
                        [
                          "**user**: The legal name and other information for the account holder.",
                          {
                            "$ul": [
                              [
                                "**address**: The address associated with the account holder.",
                                {
                                  "$ul": [
                                    "**city**: Ex. \"San Francisco\"",
                                    "**country**: A two-letter country code (e.g., \"US\").",
                                    "**postal_code**: The postal code (e.g., \"94103\").",
                                    "**region**: The state or province (e.g., \"CA\").",
                                    "**street**: The street number and name (i.e., \"100 Market St.\")."
                                  ]
                                }
                              ],
                              "**email_address**: The user's email address.",
                              "**legal_name**: The user's legal name.",
                              "**phone_number**: The user's phone number."
                            ]
                          }
                        ]
                      ]
                    }
                  ]
                ]
              }
            ],
            "**request_id**: A unique identifier for the request, which can be used for troubleshooting. This identifier, like all Plaid identifiers, is case sensitive."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Error"
        },
        "We use standard HTTP response codes for success and failure notifications, and our errors are further classified by `error_type`. In general, 200 HTTP codes correspond to success, 40X codes are for developer- or user-related failures, and 50X codes are for Plaid-related issues. An Item with a non-`null` error object will only be part of an API response when calling `/item/get` to view Item status. Otherwise, error fields will be `null` if no error has occurred; if an error has occurred, an error code will be returned instead.",
        "**Key properties:**",
        {
          "$ul": [
            "**causes**: In the Assets product, a request can pertain to more than one Item. If an error is returned for such a request, `causes` will return an array of errors containing a breakdown of these errors on the individual Item level, if any can be identified.",
            "**display_message**: A user-friendly representation of the error code. `null` if the error is not related to user action.",
            "**documentation_url**: The URL of a Plaid documentation page with more information about the error",
            "**error_code**: The particular error code. Safe for programmatic use.",
            "**error_message**: A developer-friendly representation of the error code. This may change over time and is not safe for programmatic use.",
            "**error_type**: A broad categorization of the error. Safe for programmatic use.",
            "**request_id**: A unique ID identifying the request, to be used for troubleshooting purposes. This field will be omitted in errors provided by webhooks.",
            "**status**: The HTTP status code associated with the error. This will only be returned in the response body when the error information is provided via a webhook.",
            "**suggested_action**: Suggested steps for resolving the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
