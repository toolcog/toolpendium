{
  "name": "exportTransactionsCSVV4",
  "description": "Download a CSV file containing payments in a date range. Uses Transfer-Encoding - chunked to stream to the client. Date range is inclusive of both the start and end dates.",
  "parameters": {
    "type": "object",
    "properties": {
      "payorId": {
        "format": "uuid",
        "type": "string",
        "description": "<p>The Payor ID for whom you wish to run the report.</p>\n<p>For a Payor requesting the report, this could be their exact Payor, or it could be a child/descendant Payor.</p>\n"
      },
      "startDate": {
        "format": "date",
        "type": "string",
        "description": "Start date, inclusive. Format is YYYY-MM-DD"
      },
      "endDate": {
        "format": "date",
        "type": "string",
        "description": "End date, inclusive. Format is YYYY-MM-DD"
      },
      "include": {
        "enum": [
          "payorOnly",
          "payorAndDescendants"
        ],
        "type": "string",
        "description": "<p>Mode to determine whether to include other Payor's data in the results.</p>\n<p>May only be used if payorId is specified.</p>\n<p>Can be omitted or set to 'payorOnly' or 'payorAndDescendants'.</p>\n<p>payorOnly: Only include results for the specified Payor. This is the default if 'include' is omitted.</p>\n<p>payorAndDescendants: Aggregate results for all descendant Payors of the specified Payor. Should only be used if the Payor with the specified payorId has at least one child Payor.</p>\n<p>Note when a Payor requests the report and include=payorAndDescendants is used, the following additional columns are included in the CSV: Payor Name, Payor Id</p>\n"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://api.sandbox.velopayments.com//v4/paymentaudit/transactions{?payorId,startDate,endDate,include}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**credit**",
            "**creditCurrency**: ISO 4217 3 character currency code",
            "**dateFundingRequested**",
            "**debit**",
            "**debitCurrency**: ISO 4217 3 character currency code",
            "**fundingType**",
            "**fxApplied**",
            "**payeeEmail**",
            "**payeeName**",
            "**payeeType**",
            "**paymentAmount**",
            "**paymentCurrency**: ISO 4217 3 character currency code",
            "**paymentMemo**",
            "**paymentRails**",
            "**paymentStatus**",
            "**payorPaymentId**",
            "**rejectReason**",
            "**remoteId**: Remote ID of the Payee, set by Payor",
            "**reportTransactionType**",
            "**returnCode**",
            "**returnDescription**",
            "**returnFee**",
            "**returnFeeCurrency**: ISO 4217 3 character currency code",
            "**returnFeeDescription**",
            "**sourceAccount**",
            "**transactionDate**",
            "**transactionTime**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
