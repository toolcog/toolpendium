{
  "name": "getPaymentDetailsV4",
  "description": "Get the payment with the given id. This contains the payment history.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "paymentId": {
        "format": "uuid",
        "type": "string",
        "description": "Payment Id"
      },
      "sensitive": {
        "type": "boolean",
        "description": "Optional. If omitted or set to false, any Personal Identifiable Information (PII) values are returned masked.\nIf set to true, and you have permission, the PII values will be returned as their original unmasked values.\n"
      }
    },
    "required": [
      "paymentId"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://api.sandbox.velopayments.com//v4/paymentaudit/payments/{paymentId}{?sensitive}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**accountName**",
            "**accountNumber**: The account number for the account which will receive the payment.",
            "**autoWithdrawnReasonCode**: Populated with rejection reason code if the payment was withdrawn automatically at instruct time",
            "**countryCode**: The country code of the payment channel.",
            "**events**",
            "**filenameReference**: ACH file payment was submitted in, if applicable",
            "**fundingStatus**: Current funding status of the payment. One of the following values: FUNDED, INSTRUCTED, UNFUNDED",
            "**iban**: The iban for the payment.",
            "**individualIdentificationNumber**: Individual Identification Number assigned to the payment in the ACH file, if applicable",
            "**invertedRate**: The inverted FX rate for the payment, if FX was involved. **Note** that (depending on the role of the caller) this information may not be displayed",
            "**isPaymentCcyBaseCcy**",
            "**payeeAddressCountryCode**: The country code of the payee's address.",
            "**payeeId**: The id of the paymeee",
            "**paymentAmount**: The amount which the payee will receive",
            "**paymentChannelId**",
            "**paymentChannelName**",
            "**paymentCurrency**: ISO-4217 3 character currency code",
            "**paymentId**: The id of the payment",
            "**paymentMemo**: The payment memo set by the payor",
            "**paymentMetadata**: Metadata for the payment",
            "**paymentScheme**",
            "**paymentTrackingReference**",
            "**payorId**: The id of the payor",
            "**payorName**: The name of the payor",
            "**payorPaymentId**",
            [
              "**payout**",
              {
                "$ul": [
                  [
                    "**payoutFrom**: Details of payor and principal participating in a payout.",
                    {
                      "$ul": [
                        "**dbaName**: The alternate name of the payor.",
                        "**payorId**: The id of the payor.",
                        "**payorName**: The name of the payor.",
                        "**principal**: Email address if principal is a user or ID if application.",
                        "**principalId**: The id of the principal."
                      ]
                    }
                  ],
                  "**payoutId**",
                  [
                    "**payoutTo**: Details of payor and principal participating in a payout.",
                    {
                      "$ul": [
                        "**dbaName**: The alternate name of the payor.",
                        "**payorId**: The id of the payor.",
                        "**payorName**: The name of the payor.",
                        "**principal**: Email address if principal is a user or ID if application.",
                        "**principalId**: The id of the principal."
                      ]
                    }
                  ]
                ]
              }
            ],
            [
              "**postInstructFxInfo**: FX details relating to a payout that was executed or is still waiting to be executed",
              {
                "$ul": [
                  "**fxMode**: The mode by which the FX rate is to be determined (MANUAL or AUTO)",
                  "**fxStatus**: The state to which the Post-Instruct FX process has reached (INITIATED or COMPLETED)",
                  "**fxStatusUpdatedAt**: The date-time at which the most recent fxStatus was determined.",
                  "**fxTransactionReference**: The reference assigned to the FX funding that will fulfil this payment."
                ]
              }
            ],
            "**quoteId**: The quote Id used for the FX",
            "**railsBatchId**",
            "**railsId**: The rails ID. Default value is RAILS ID UNAVAILABLE when not populated. (default: RAILS ID UNAVAILABLE)",
            "**railsPaymentId**",
            "**rate**: The FX rate for the payment, if FX was involved. **Note** that (depending on the role of the caller) this information may not be displayed",
            "**rejectionReason**",
            "**remoteId**: The remote id by which the payor refers to the payee. Only populated once payment is confirmed",
            "**remoteSystemId**: The velo id of the remote system orchestrating the payment. Not populated for normal Velo payments.",
            "**remoteSystemPaymentId**: The id of the payment in the remote system. Not populated for normal Velo payments.",
            "**returnCost**: The return cost if a returned payment.",
            "**returnReason**",
            "**routingNumber**: The routing number for the payment.",
            [
              "**schedule**: Details relating to a payout that was executed via a schedule or is still waiting to be executed",
              {
                "$ul": [
                  "**notificationsEnabled**",
                  "**scheduleStatus**: Current status of the payout schedule. One of the following values: SCHEDULED, EXECUTED, FAILED",
                  "**scheduledAt**",
                  "**scheduledBy**: Optional display name as a hint for who scheduled the payout. Not populated if payout was scheduled by an application.",
                  "**scheduledByPrincipalId**: ID of the user or application that scheduled the payout",
                  "**scheduledFor**"
                ]
              }
            ],
            "**sourceAccountId**: The id of the source account from which the payment was taken",
            "**sourceAccountName**: The name of the source account from which the payment was taken",
            "**sourceAmount**: The source amount for the payment (amount debited to make the payment)",
            "**sourceCurrency**: ISO-4217 3 character currency code",
            "**status**: Current status of the payment. One of the following values: ACCEPTED, AWAITING_FUNDS, FUNDED, UNFUNDED, BANK_PAYMENT_REQUESTED, REJECTED, ACCEPTED_BY_RAILS, CONFIRMED, RETURNED, WITHDRAWN",
            "**submittedDateTime**",
            "**traceNumber**: Trace Number assigned to the payment in the ACH file, if applicable",
            "**transmissionType**: The transmission type of the payment, e.g. ACH, SAME_DAY_ACH, WIRE, GACHO",
            "**withdrawable**",
            "**withdrawnReason**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**correlationId**: a unique identifier to track a request or related sequence of requests",
            "**errors**: one or more errors",
            "**httpStatusCode**: this will mirror the Status-Code part of the Status-Line http response header and is included for extra clarity"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**correlationId**: a unique identifier to track a request or related sequence of requests",
            "**errors**: one or more errors",
            "**httpStatusCode**: this will mirror the Status-Code part of the Status-Line http response header and is included for extra clarity"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**correlationId**: a unique identifier to track a request or related sequence of requests",
            "**errors**: one or more errors",
            "**httpStatusCode**: this will mirror the Status-Code part of the Status-Line http response header and is included for extra clarity"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**correlationId**: a unique identifier to track a request or related sequence of requests",
            "**errors**: one or more errors",
            "**httpStatusCode**: this will mirror the Status-Code part of the Status-Line http response header and is included for extra clarity"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
