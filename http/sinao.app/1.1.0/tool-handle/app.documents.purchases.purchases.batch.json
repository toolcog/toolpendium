{
  "name": "app_documents_purchases_purchases_batch",
  "description": "Create or update many purchases",
  "parameters": {
    "type": "object",
    "properties": {
      "appId": {
        "type": "integer",
        "description": "The identifier of the Sinao application you are using. Each application corresponds to a company and an accounting. A user can have several Sinao applications. To retrieve the identifiers of its applications, you must call the endpoint `/apps`."
      },
      "data": {
        "items": {
          "$ref": "#/$defs/Purchase"
        },
        "type": "array",
        "description": "List of purchases. With ID for update, without for insert"
      }
    },
    "required": [
      "appId",
      "data"
    ],
    "$defs": {
      "Purchase": {
        "properties": {
          "account": {
            "$ref": "#/$defs/Account"
          },
          "accounted_at": {
            "description": "Date on which the accounting entries were generated",
            "format": "date-time",
            "type": "string"
          },
          "amount": {
            "description": "Amount without taxes in cents",
            "type": "integer"
          },
          "amount_net_foreign_currency": {
            "description": "Amount without taxes in cents",
            "readOnly": true,
            "type": "integer"
          },
          "amount_tax": {
            "description": "Amount of taxes in cents",
            "type": "integer"
          },
          "balance": {
            "$ref": "#/$defs/Balance"
          },
          "billed_at": {
            "description": "Date of invoice",
            "format": "date-time",
            "type": "string"
          },
          "comment": {
            "description": "free field",
            "type": "string"
          },
          "completed_at": {
            "description": "Date on which the account, supplier, amount and billed_at fields were completed",
            "format": "date-time",
            "type": "string"
          },
          "foreign_currency": {
            "description": "Amount of taxes in cents",
            "readOnly": true,
            "type": "string"
          },
          "id": {
            "type": "integer"
          },
          "is_late": {
            "description": "The payment deadline has passed and full payment has not been received",
            "type": "boolean"
          },
          "md5": {
            "description": "Md5 hash of the initial file sent",
            "type": "string"
          },
          "paid_at": {
            "description": "Date on which the invoice was fully paid",
            "format": "date-time",
            "type": "string"
          },
          "payment_account_number": {
            "description": "Payment Account number",
            "type": "string"
          },
          "payment_deadline_at": {
            "description": "Payment deadline",
            "format": "date-time",
            "type": "string"
          },
          "payment_iban": {
            "description": "Payment IBAN",
            "type": "string"
          },
          "payment_routing_number": {
            "description": "Payment Routing number",
            "type": "string"
          },
          "payment_swift": {
            "description": "Payment SWIFT",
            "type": "string"
          },
          "picture": {
            "description": "Purchase picture",
            "type": "string"
          },
          "status": {
            "enum": [
              "new",
              "completed",
              "paid"
            ],
            "type": "string"
          },
          "supplier": {
            "$ref": "#/$defs/ContactOrganization"
          },
          "supplier_name": {
            "type": "string"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "title": {
            "description": "Name visible on the accounting entries of the purchase",
            "type": "string"
          },
          "vat_detail": {
            "description": "VAT breakdown",
            "type": "object"
          },
          "vat_repayment": {
            "description": "In France, depending on the type of purchase (product or service), VAT is not payable at the same time. VAT on products is due on the date of the invoice, while VAT on services is due on the date of payment thereof",
            "enum": [
              "payment",
              "billing"
            ],
            "type": "string"
          },
          "will_be_late_at": {
            "description": "Date the payment will be late. Is `false` if payment has been made",
            "format": "date-time",
            "type": "string"
          }
        }
      },
      "Account": {
        "properties": {
          "accounting_number": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "editable": {
            "type": "boolean"
          },
          "id": {
            "type": "integer"
          },
          "is_associate": {
            "type": "boolean"
          },
          "is_cashflow": {
            "type": "boolean"
          },
          "is_purchase": {
            "type": "boolean"
          },
          "is_sales": {
            "type": "boolean"
          },
          "is_various": {
            "type": "boolean"
          },
          "journalcode": {
            "type": "string"
          },
          "keywords": {
            "description": "keywords comma separated",
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "need_charge": {
            "type": "boolean"
          },
          "need_employee": {
            "type": "boolean"
          },
          "need_invoice": {
            "type": "boolean"
          },
          "technical_name": {
            "type": "string"
          }
        }
      },
      "Balance": {
        "properties": {
          "completed": {
            "type": "boolean"
          },
          "due": {
            "description": "Initial balance total due",
            "type": "integer"
          },
          "meaning": {
            "enum": [
              "completed",
              "remaining",
              "overpaid"
            ],
            "type": "string"
          },
          "paid": {
            "type": "integer"
          },
          "remaining": {
            "type": "integer"
          }
        }
      },
      "ContactOrganization": {
        "allOf": [
          {
            "$ref": "#/$defs/OrganizationIdentity"
          }
        ]
      },
      "OrganizationIdentity": {
        "properties": {
          "billing_name": {
            "description": "Company name for billing",
            "type": "string"
          },
          "capital": {
            "description": "Capital in cents",
            "type": "integer"
          },
          "closeaccounting_period": {
            "type": "string"
          },
          "code_naf": {
            "description": "French NAF Code",
            "pattern": "/^[0-9]{4}[a-z]$/i",
            "type": "string"
          },
          "country_iso2": {
            "format": "ISO 3166-1 alpha-2",
            "type": "string"
          },
          "dissolution_date": {
            "format": "date",
            "type": "string"
          },
          "establishments": {
            "description": "List of contact establishments. Some establishments come from the public database (INSEE), they cannot be edited and have no ID",
            "items": {
              "$ref": "#/$defs/EstablishmentIdentity"
            },
            "type": "array"
          },
          "founding_date": {
            "format": "date",
            "type": "string"
          },
          "founding_location": {
            "type": "string"
          },
          "greffe": {
            "description": "French. Tribunal de commerce",
            "type": "string"
          },
          "id": {
            "type": "integer"
          },
          "legal_form": {
            "type": "string"
          },
          "logo": {
            "format": "uri",
            "type": "string"
          },
          "name": {
            "description": "Company name visible on the app",
            "type": "string"
          },
          "national_id": {
            "description": "Unique National Id, format by country. **In France : [0-9]{9} with last number as security key.**",
            "type": "string"
          },
          "number_of_employees": {
            "type": "string"
          },
          "rcs": {
            "description": "French. Registre du Commerce et des Sociétés",
            "type": "string"
          },
          "slogan": {
            "description": "Free variable",
            "type": "string"
          },
          "tax_id": {
            "description": "International Tax Id",
            "type": "string"
          },
          "vat_id": {
            "description": "European VAT Id. **In France : FR [0-9]{2} [0-9]{9}**",
            "type": "string"
          },
          "vat_system": {
            "type": "string"
          }
        },
        "type": "object"
      },
      "EstablishmentIdentity": {
        "description": "A card for an establishment contact informations",
        "properties": {
          "emails": {
            "items": {
              "format": "email",
              "type": "string"
            },
            "type": "array"
          },
          "id": {
            "description": "The identifier of the establishment can be absent if the data comes from the INSEE database. In this case, it is not editable",
            "nullable": true,
            "type": "integer"
          },
          "name": {
            "description": "Establishment name",
            "type": "string"
          },
          "nic": {
            "description": "Establishment number (french NIC)",
            "nullable": true,
            "pattern": "/^[0-9]{5}$/i",
            "type": "string"
          },
          "phones": {
            "items": {
              "format": "phone",
              "type": "string"
            },
            "type": "array"
          },
          "place": {
            "properties": {
              "administrative_area_level1": {
                "type": "string"
              },
              "administrative_area_level2": {
                "type": "string"
              },
              "administrative_area_level3": {
                "type": "string"
              },
              "country": {
                "type": "string"
              },
              "countryiso2": {
                "type": "string"
              },
              "formatted_address": {
                "description": "When obtaining data, the formatted address is automatically composed from the other properties of the object. When updating data, the formatted address can be used to automatically hydrate the other properties from Google Maps",
                "type": "string"
              },
              "id": {
                "type": "integer"
              },
              "latitude": {
                "type": "integer"
              },
              "locality": {
                "type": "string"
              },
              "longitude": {
                "type": "integer"
              },
              "postal_code": {
                "type": "string"
              },
              "route": {
                "type": "string"
              },
              "route2": {
                "type": "string"
              },
              "street_number": {
                "type": "string"
              },
              "sublocality": {
                "type": "string"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.sinao.app/v1/apps/{appId}/purchases/batch{?data}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**account**",
              {
                "$ul": [
                  "**accounting_number**",
                  "**description**",
                  "**editable**",
                  "**id**",
                  "**is_associate**",
                  "**is_cashflow**",
                  "**is_purchase**",
                  "**is_sales**",
                  "**is_various**",
                  "**journalcode**",
                  "**keywords**: keywords comma separated",
                  "**name**",
                  "**need_charge**",
                  "**need_employee**",
                  "**need_invoice**",
                  "**technical_name**"
                ]
              }
            ],
            "**accounted_at**: Date on which the accounting entries were generated",
            "**amount**: Amount without taxes in cents",
            "**amount_net_foreign_currency**: Amount without taxes in cents",
            "**amount_tax**: Amount of taxes in cents",
            [
              "**balance**",
              {
                "$ul": [
                  "**completed**",
                  "**due**: Initial balance total due",
                  "**meaning**",
                  "**paid**",
                  "**remaining**"
                ]
              }
            ],
            "**billed_at**: Date of invoice",
            "**comment**: free field",
            "**completed_at**: Date on which the account, supplier, amount and billed_at fields were completed",
            "**foreign_currency**: Amount of taxes in cents",
            "**id**",
            "**is_late**: The payment deadline has passed and full payment has not been received",
            "**md5**: Md5 hash of the initial file sent",
            "**paid_at**: Date on which the invoice was fully paid",
            "**payment_account_number**: Payment Account number",
            "**payment_deadline_at**: Payment deadline",
            "**payment_iban**: Payment IBAN",
            "**payment_routing_number**: Payment Routing number",
            "**payment_swift**: Payment SWIFT",
            "**picture**: Purchase picture",
            "**status**",
            [
              "**supplier**",
              {
                "$ul": [
                  "**billing_name**: Company name for billing",
                  "**capital**: Capital in cents",
                  "**closeaccounting_period**",
                  "**code_naf**: French NAF Code",
                  "**country_iso2**",
                  "**dissolution_date**",
                  "**establishments**: List of contact establishments. Some establishments come from the public database (INSEE), they cannot be edited and have no ID",
                  "**founding_date**",
                  "**founding_location**",
                  "**greffe**: French. Tribunal de commerce",
                  "**id**",
                  "**legal_form**",
                  "**logo**",
                  "**name**: Company name visible on the app",
                  "**national_id**: Unique National Id, format by country. **In France : [0-9]{9} with last number as security key.**",
                  "**number_of_employees**",
                  "**rcs**: French. Registre du Commerce et des Sociétés",
                  "**slogan**: Free variable",
                  "**tax_id**: International Tax Id",
                  "**vat_id**: European VAT Id. **In France : FR [0-9]{2} [0-9]{9}**",
                  "**vat_system**"
                ]
              }
            ],
            "**supplier_name**",
            "**tags**",
            "**title**: Name visible on the accounting entries of the purchase",
            "**vat_detail**: VAT breakdown",
            "**vat_repayment**: In France, depending on the type of purchase (product or service), VAT is not payable at the same time. VAT on products is due on the date of the invoice, while VAT on services is due on the date of payment thereof",
            "**will_be_late_at**: Date the payment will be late. Is `false` if payment has been made"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
