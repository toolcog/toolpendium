{
  "name": "completeMultipart",
  "description": "Completes the multipart upload in the external store, and copies the\nfile from its temporary location to its final location in the store.\nAll of the parts must have been uploaded to the external storage provider.\nAn Upload record will be completed in most cases once the file is copied\nto its final location.\n\nYou must have the correct permissions and CORS settings configured in your\nexternal provider. We support AWS S3 as the default. See:\n\nhttps://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.\n\nAn external file store must be set up and `enable_direct_s3_uploads` must\nbe set to true for this endpoint to function.\n\n",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "additionalProperties": false,
        "properties": {
          "parts": {
            "description": "All of the part numbers and their corresponding ETags\nthat have been uploaded must be provided.",
            "examples": [
              [
                {
                  "etag": "0c376dcfcc2606f4335bbc732de93344",
                  "part_number": 1
                },
                {
                  "etag": "09ert8cfcc2606f4335bbc732de91122",
                  "part_number": 2
                }
              ]
            ],
            "type": "array"
          },
          "unique_identifier": {
            "description": "The unique identifier returned in the original /create-multipart\nrequest.",
            "examples": [
              "66e86218-80d9-4bda-b4d5-2b6def968705"
            ],
            "type": "string"
          }
        },
        "required": [
          "unique_identifier",
          "parts"
        ]
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://discourse.local/uploads/complete-multipart.json"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**dominant_color**",
            "**extension**",
            "**filesize**",
            "**height**",
            "**human_filesize**",
            "**id**",
            "**original_filename**",
            "**retain_hours**",
            "**short_path**",
            "**short_url**",
            "**thumbnail_height**",
            "**thumbnail_width**",
            "**url**",
            "**width**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
