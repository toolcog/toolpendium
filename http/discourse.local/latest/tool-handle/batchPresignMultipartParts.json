{
  "name": "batchPresignMultipartParts",
  "description": "Multipart uploads are uploaded in chunks or parts to individual presigned\nURLs, similar to the one generated by /generate-presigned-put. The part\nnumbers provided must be between 1 and 10000. The total number of parts\nwill depend on the chunk size in bytes that you intend to use to upload\neach chunk. For example a 12MB file may have 2 5MB chunks and a final\n2MB chunk, for part numbers 1, 2, and 3.\n\nThis endpoint will return a presigned URL for each part number provided,\nwhich you can then use to send PUT requests for the binary chunk corresponding\nto that part. When the part is uploaded, the provider should return an\nETag for the part, and this should be stored along with the part number,\nbecause this is needed to complete the multipart upload.\n\nYou must have the correct permissions and CORS settings configured in your\nexternal provider. We support AWS S3 as the default. See:\n\nhttps://meta.discourse.org/t/-/210469#s3-multipart-direct-uploads-4.\n\nAn external file store must be set up and `enable_direct_s3_uploads` must\nbe set to true for this endpoint to function.\n\n",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "additionalProperties": false,
        "properties": {
          "part_numbers": {
            "description": "The part numbers to generate the presigned URLs for,\nmust be between 1 and 10000.",
            "examples": [
              [
                1,
                2,
                3
              ]
            ],
            "type": "array"
          },
          "unique_identifier": {
            "description": "The unique identifier returned in the original /create-multipart\nrequest.",
            "examples": [
              "66e86218-80d9-4bda-b4d5-2b6def968705"
            ],
            "type": "string"
          }
        },
        "required": [
          "part_numbers",
          "unique_identifier"
        ]
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://discourse.local/uploads/batch-presign-multipart-parts.json"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**presigned_urls**: The presigned URLs for each part number, which has"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
