{
  "name": "editScore",
  "description": "This API method allows you to change the metadata of a score document (e.g. its `title` or `privacy`), all the properties are optional.\n\nTo edit the file itself, create a new revision using the appropriate method (`POST /v2/scores/{score}/revisions/{revision}`).\n\nWhen editing the `title`, `subtitle`, `composer`, `lyricist`, `arranger` or `licenseText`, the metadatas will be instantly be updated, and a real-time action will be pushed to update the document lazily.\nThis pending document modification will be automatically be saved as a new version by either a connected client or our internal versioning service.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "score": {
        "type": "string",
        "description": "Unique identifier of the score document. This can be a Flat Score unique identifier (i.e. `ScoreDetails.id`) or, if the score is also a Google Drive file, the Drive file unique identifier prefixed with `drive-` (e.g. `drive-0B000000000`).\n"
      },
      "body": {
        "$ref": "#/$defs/ScoreModification"
      }
    },
    "required": [
      "score"
    ],
    "$defs": {
      "ScoreModification": {
        "description": "Edit the score metadata",
        "example": {
          "privacy": "private"
        },
        "properties": {
          "arranger": {
            "description": "The arranger of the score",
            "type": "string"
          },
          "composer": {
            "description": "The composer of the score",
            "type": "string"
          },
          "creationType": {
            "$ref": "#/$defs/ScoreCreationType"
          },
          "description": {
            "description": "Description of the creation",
            "maxLength": 2000,
            "type": "string"
          },
          "license": {
            "$ref": "#/$defs/ScoreLicense"
          },
          "licenseText": {
            "description": "The rights info written on the score",
            "type": "string"
          },
          "lyricist": {
            "description": "The lyricist of the score",
            "type": "string"
          },
          "privacy": {
            "$ref": "#/$defs/ScorePrivacy"
          },
          "sharingKey": {
            "description": "When using the `privacy` mode `privateLink`, this property can be used to set a custom sharing key, otherwise a new key will be generated.",
            "pattern": "^[a-f0-9]{128}$",
            "type": "string"
          },
          "subtitle": {
            "description": "The subtitle of the score",
            "type": "string"
          },
          "tags": {
            "description": "Tags describing the score",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "title": {
            "description": "The title of the score",
            "type": "string"
          }
        },
        "type": "object"
      },
      "ScoreCreationType": {
        "description": "The type of creation (an orginal, an arrangement)",
        "enum": [
          "original",
          "arrangement",
          "other"
        ],
        "type": "string"
      },
      "ScoreLicense": {
        "description": "License of the creation. Read more about the Creative Commons licenses on https://creativecommons.org/licenses/\n",
        "enum": [
          "copyright",
          "cc0",
          "cc-by",
          "cc-by-sa",
          "cc-by-nd",
          "cc-by-nc",
          "cc-by-nc-sa",
          "cc-by-nc-nd"
        ],
        "type": "string"
      },
      "ScorePrivacy": {
        "description": "The score main privacy mode.\n\n- `public`: The score is public on the Internet. This one can be accessible at the url `https://flat.io/score/{score}` and can be modified and administred by specified collaborators users.\n- `private`: The score is private and can be only accessed, modified and administred by specified collaborators users.\n- `privateLink`: The score is private but can be accessed using a private link `htmlUrl` or the private key in the property `sharingKey`.\n- `organizationPublic`: _Available only with [Flat for Education](https://flat.io/edu)._ The score is public in the organization: users of the same organization can access to this one. The score can be modified and administred by specified collaborators users.\n\nThe score can also be individually shared to a set of users or groups using the different collaborators API methods.\n\nWhen a file is synchronized from an external source (e.g. Google Drive) and the sharing options are changed on the source, Flat will chose the best privacy mode for the file.\n\nWhen using a [Flat for Education](https://flat.io/edu) account, some of the modes may not be available if disabled by an administrator of the organization (e.g. by default the `public` mode is not available).\n",
        "enum": [
          "public",
          "private",
          "organizationPublic",
          "privateLink"
        ],
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "https://api.flat.io/v2/scores/{score}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "A summary of the score details",
        "**Key properties:**",
        {
          "$ul": [
            "**htmlUrl**: The url where the score can be viewed in a web browser",
            "**id**: The unique identifier of the score",
            "**privacy**: The score main privacy mode.",
            "**sharingKey**: The private sharing key of the score (available when the `privacy` mode is set to `privateLink`)",
            "**title**: The title of the score",
            [
              "**user**",
              {
                "$ul": [
                  "**firstname**: Firstname of the user (for education users)",
                  "**id**: The user unique identifier",
                  "**isFlatTeam**: Will be 'true' if user is part of the Flat Team",
                  "**isPowerUser**: User license status. 'true' if user is an individual Power user",
                  "**lastname**: Lastname of the user (for education users)",
                  "**name**: A displayable name for the user (for consumer users)",
                  "**picture**: The URL of the picture to display",
                  "**printableName**: The name that can be directly printed (name, firstname & lastname, or username)",
                  "**type**: The type of user account",
                  "**username**: The user name (unique for the organization)",
                  "**classRole**: User's Class Role (for Edu users only)",
                  "**htmlUrl**: Link to user profile (for Indiv. users only)",
                  "**organization**: Organization ID (for Edu users only)",
                  "**organizationRole**: User's Organization Role (for Edu users only)"
                ]
              }
            ],
            "**arranger**: Arranger of the score",
            "**collaborators**: The list of the collaborators of the score",
            "**collections**: The List of parent collections, which includes all the collections this score is included. Please note that you might not have access to all of them.",
            [
              "**comments**: A computed version of the total, unique, weekly and monthly number of",
              {
                "$ul": [
                  "**monthly**: The monthly unique number of comments added to the score",
                  "**total**: The total number of comments added to the score",
                  "**unique**: The unique (1/user) number of comments added to the score",
                  "**weekly**: The weekly unique number of comments added to the score"
                ]
              }
            ],
            "**composer**: Composer of the score",
            "**creationDate**: The date when the score was created",
            "**creationType**: The type of creation (an orginal, an arrangement)",
            "**description**: Description of the creation",
            "**durationTime**: In seconds, an approximative duration of the score",
            "**googleDriveFileId**: If the user uses Google Drive and the score exists on Google Drive, this field will contain the unique identifier of the Flat score on Google Drive. You can access the document using the url: `https://drive.google.com/open?id={googleDriveFileId}`",
            "**instruments**: An array of the instrument identifiers used in the last version of the score. This is mainly used to display a list of the instruments in the Flat's UI or instruments icons. The format of the strings is `{instrument-group}.{instrument-id}`.",
            "**license**: License of the creation. Read more about the Creative Commons licenses on https://creativecommons.org/licenses/",
            "**licenseText**: Additional license text written on the exported/printed score",
            [
              "**likes**: A computed version of the weekly, monthly and total of number of likes",
              {
                "$ul": [
                  "**monthly**: The number of new likes during the last month",
                  "**total**: The total number of likes of the score",
                  "**weekly**: The number of new likes during the last week"
                ]
              }
            ],
            "**lyricist**: Lyricist of the score",
            "**mainTempoQpm**: The main tempo of the score (in QPM)",
            "**modificationDate**: The date of the last revision of the score",
            "**numberMeasures**: The number of measures in the score",
            "**organization**: If the score has been created in an organization, the identifier of this organization. This property is especially used with the score privacy `organizationPublic`.",
            "**parentScore**: If the score has been forked, the unique identifier of the parent score.",
            [
              "**plays**: A computed version of the total, weekly, and monthly number of plays of",
              {
                "$ul": [
                  "**monthly**: The monthly number of plays of the score",
                  "**total**: The total number of plays of the score",
                  "**weekly**: The weekly number of plays of the score"
                ]
              }
            ],
            "**publicationDate**: The date when the score was published on Flat",
            [
              "**rights**: The rights of the current user on a score or collection",
              {
                "$ul": [
                  "**aclAdmin**: `True` if the current user can manage the current document (i.e. share, delete) (default: false)",
                  "**aclRead**: `True` if the current user can read the current document (default: false)",
                  "**aclWrite**: `True` if the current user can modify the current document. (default: false)",
                  "**isCollaborator**: `True` if the current user is a collaborator of the current document (direct or via group). (default: false)"
                ]
              }
            ],
            "**samples**: An array of the audio samples identifiers used the different score parts.",
            "**subtitle**: Subtitle of the score",
            "**tags**: Tags describing the score",
            [
              "**views**: A computed version of the total, weekly, and monthly number of views of",
              {
                "$ul": [
                  "**monthly**: The monthly number of views of the score",
                  "**total**: The total number of views of the score",
                  "**weekly**: The weekly number of views of the score"
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "402": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
