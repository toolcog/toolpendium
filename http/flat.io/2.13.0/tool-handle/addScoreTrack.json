{
  "name": "addScoreTrack",
  "description": "Use this method to add new track to the score. This track can then be played on flat.io or in an embedded score.\nThis API method support medias hosted on SoundCloud, YouTube and Vimeo.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "score": {
        "type": "string",
        "description": "Unique identifier of the score document. This can be a Flat Score unique identifier (i.e. `ScoreDetails.id`) or, if the score is also a Google Drive file, the Drive file unique identifier prefixed with `drive-` (e.g. `drive-0B000000000`).\n"
      },
      "body": {
        "$ref": "#/$defs/ScoreTrackCreation"
      }
    },
    "required": [
      "score",
      "body"
    ],
    "$defs": {
      "ScoreTrackCreation": {
        "description": "Creation of a new track. This one must contain the URL of the track or the corresponding file\n",
        "example": {
          "default": true,
          "state": "draft",
          "synchronizationPoints": [
            {
              "measureUuid": "5132a788-69e6-d0c6-84ec-4bd858658d7c",
              "time": 0,
              "type": "measure"
            },
            {
              "time": 213,
              "type": "end"
            }
          ],
          "title": "Rick Astley - Never Gonna Give You Up",
          "url": "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
        },
        "properties": {
          "default": {
            "description": "True if the track should be used as default audio source",
            "type": "boolean"
          },
          "state": {
            "$ref": "#/$defs/ScoreTrackState"
          },
          "synchronizationPoints": {
            "items": {
              "$ref": "#/$defs/ScoreTrackPoint"
            },
            "type": "array"
          },
          "title": {
            "description": "Title of the track",
            "type": "string"
          },
          "url": {
            "description": "The URL of the track",
            "type": "string"
          }
        },
        "type": "object"
      },
      "ScoreTrackState": {
        "default": "draft",
        "description": "State of the track",
        "enum": [
          "draft",
          "completed",
          "deleted"
        ],
        "type": "string"
      },
      "ScoreTrackPoint": {
        "description": "A track synchronization point",
        "example": {
          "measureUuid": "5132a788-69e6-d0c6-84ec-4bd858658d7c",
          "time": 0,
          "type": "measure"
        },
        "properties": {
          "measureUuid": {
            "description": "The measure unique identifier",
            "format": "uuid",
            "type": "string"
          },
          "time": {
            "description": "The corresponding time in seconds",
            "type": "number"
          },
          "type": {
            "description": "The type of the synchronization point. If the type is `measure`, the measure uuid must be present in `measureUuid`",
            "enum": [
              "measure",
              "end"
            ],
            "type": "string"
          }
        },
        "required": [
          "time",
          "type"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.flat.io/v2/scores/{score}/tracks"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An audio track for a score",
        "**Key properties:**",
        {
          "$ul": [
            "**creationDate**: The creation date of the track",
            "**creator**: The unique identifier of the track creator",
            "**default**: True if the track should be used as default audio source",
            "**id**: The unique identifier of the score track",
            "**mediaId**: The unique identifier of the track when hosted on an external service.",
            "**modificationDate**: The modification date of the track",
            "**score**: The unique identifier of the score",
            "**state**: State of the track (default: draft)",
            "**synchronizationPoints**",
            "**title**: Title of the track",
            "**type**: The type of an audio track",
            "**url**: The URL of the track"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
