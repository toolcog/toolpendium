{
  "name": "createOrganizationInvitation",
  "description": "This method creates and sends invitation for teachers and admins.\n\nInvitations can only be used by new Flat users or users who are not part of the organization yet.\n\nIf the email of the user is already associated to a user of your organization, the API will simply update the role of the existing user and won't send an invitation. In this case, the property `usedBy` will be directly filled with the uniquer identifier of the corresponding user.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/OrganizationInvitationCreation"
      }
    },
    "$defs": {
      "OrganizationInvitationCreation": {
        "description": "The parameters to create an organization invitation",
        "example": {
          "email": "edu@flat.io",
          "organizationRole": "teacher"
        },
        "properties": {
          "email": {
            "description": "The email address you want to send the invitation to",
            "type": "string"
          },
          "organizationRole": {
            "$ref": "#/$defs/OrganizationRoles"
          }
        },
        "type": "object"
      },
      "OrganizationRoles": {
        "description": "User's Organization Role (for Edu users only)",
        "enum": [
          "admin",
          "billing",
          "teacher",
          "user"
        ],
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.flat.io/v2/organizations/invitations"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Details of an invitation to join an organization",
        "**Key properties:**",
        {
          "$ul": [
            "**customCode**: Enrollment code to use when joining this organization",
            "**email**: The email address this invitation was sent to",
            "**id**: The invitation unique identifier",
            "**invitedBy**: The unique identifier of the User who created this invitation",
            "**organization**: The unique identifier of the Organization owning this class",
            "**organizationRole**: User's Organization Role (for Edu users only)",
            "**usedBy**: The unique identifier of the User who used this invitation"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "An API Error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**: A corresponding code for this error",
            "**id**: An unique error identifier generated for the request",
            "**message**: A printable message for this message",
            "**param**: The related parameter that caused the error"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
