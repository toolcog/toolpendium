{
  "name": "create_user",
  "description": "Create a new user",
  "parameters": {
    "type": "object",
    "properties": {
      "accountname": {
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/UserCreationRequest"
      }
    },
    "required": [
      "accountname",
      "body"
    ],
    "$defs": {
      "UserCreationRequest": {
        "description": "A payload for creating a new user, includes the username and password in a single request",
        "properties": {
          "password": {
            "description": "The initial password for the user, must be at least 6 characters, up to 128",
            "pattern": ".{6,128}$",
            "type": "string"
          },
          "username": {
            "description": "The username to create",
            "pattern": "^[a-zA-Z0-9][a-zA-Z0-9@.!#$+-=^_`~;]{1,126}[a-zA-Z0-9]$",
            "type": "string"
          }
        },
        "required": [
          "username",
          "password"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "//accounts/{accountname}/users"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "A username for authenticating with one or more types of credentials. User type defines the expected credentials allowed for the user. Native users have passwords, External users have no credential internally. Internal users are service/system users for inter-service communication.",
        "**Key properties:**",
        {
          "$ul": [
            "**created_at**: The timestampt the user record was created",
            "**last_updated**: The timestamp of the last update to this record",
            "**source**: If the user is external, this is the source that the user was initialized from. All other user types have this set to null",
            "**type**: The user's type",
            "**username**: The username to authenticate with"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
