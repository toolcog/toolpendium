{
  "name": "add_credential",
  "description": "add/replace credential",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/AccessCredential"
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "AccessCredential": {
        "description": "A login credential mapped to a user identity. For password credentials, the username to present for Basic auth is the user's username from the user record",
        "properties": {
          "created_at": {
            "description": "The timestamp of creation of the credential",
            "type": "string"
          },
          "type": {
            "description": "The type of credential",
            "enum": [
              "password"
            ],
            "type": "string"
          },
          "value": {
            "description": "The credential value (e.g. the password)",
            "type": "string"
          }
        },
        "required": [
          "type",
          "value"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "//user/credentials"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "A username for authenticating with one or more types of credentials. User type defines the expected credentials allowed for the user. Native users have passwords, External users have no credential internally. Internal users are service/system users for inter-service communication.",
        "**Key properties:**",
        {
          "$ul": [
            "**created_at**: The timestampt the user record was created",
            "**last_updated**: The timestamp of the last update to this record",
            "**source**: If the user is external, this is the source that the user was initialized from. All other user types have this set to null",
            "**type**: The user's type",
            "**username**: The username to authenticate with"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "500": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Generic HTTP API error response",
        "**Key properties:**",
        {
          "$ul": [
            "**code**",
            "**detail**: Details structure for additional information about the error if available. Content and structure will be error specific.",
            "**error_type**",
            "**message**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
