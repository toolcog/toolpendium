{
  "name": "rebuildLinodeInstance",
  "description": "Rebuilds a Linode you have the `read_write` permission to modify.\nA rebuild will first shut down the Linode, delete all disks and configs on the Linode, and then deploy a new `image` to the Linode with the given attributes. Additionally:\n\n  * Requires an `image` be supplied.\n  * Requires a `root_pass` be supplied to use for the root User's Account.\n  * It is recommended to supply SSH keys for the root User using the\n    `authorized_keys` field.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "linodeId": {
        "type": "integer",
        "description": "ID of the Linode to rebuild."
      },
      "body": {
        "allOf": [
          {
            "$ref": "#/$defs/LinodeRequest"
          }
        ],
        "required": [
          "image",
          "root_pass"
        ],
        "type": "object",
        "description": "The requested state your Linode will be rebuilt into."
      }
    },
    "required": [
      "linodeId",
      "body"
    ],
    "$defs": {
      "LinodeRequest": {
        "description": "Common properties for creating and rebuilding Linodes.",
        "properties": {
          "authorized_keys": {
            "$ref": "#/$defs/authorized_keys"
          },
          "authorized_users": {
            "$ref": "#/$defs/authorized_users"
          },
          "booted": {
            "default": true,
            "description": "This field defaults to `true` if the Linode is created with an Image or from a Backup.\nIf it is deployed from an Image or a Backup and you wish it to remain `offline` after deployment, set this to `false`.\n",
            "type": "boolean",
            "writeOnly": true
          },
          "image": {
            "$ref": "#/$defs/image"
          },
          "root_pass": {
            "$ref": "#/$defs/root_pass"
          },
          "stackscript_data": {
            "$ref": "#/$defs/stackscript_data"
          },
          "stackscript_id": {
            "$ref": "#/$defs/stackscript_id"
          }
        },
        "type": "object"
      },
      "authorized_keys": {
        "description": "A list of public SSH keys that will be automatically appended\nto the root user's `~/.ssh/authorized_keys` file when deploying from an Image.\n",
        "example": [
          "ssh-rsa AAAA_valid_public_ssh_key_123456785== user@their-computer"
        ],
        "items": {
          "type": "string"
        },
        "type": "array",
        "writeOnly": true
      },
      "authorized_users": {
        "description": "A list of usernames. If the usernames have associated SSH keys, the keys will be appended to the root users `~/.ssh/authorized_keys` file automatically when deploying from an Image.\n",
        "example": [
          "myUser",
          "secondaryUser"
        ],
        "items": {
          "type": "string"
        },
        "type": "array",
        "writeOnly": true
      },
      "image": {
        "description": "An Image ID to deploy the Linode Disk from.\n\nAccess the Images List ([GET /images](/docs/api/images/#images-list)) endpoint with authentication to view\nall available Images. Official Linode Images start with `linode/`, while your Account's Images start with `private/`. Creating\na disk from a Private Image requires `read_only` or `read_write` permissions for that Image. Access the User's\nGrant Update ([PUT /account/users/{username}/grants](/docs/api/account/#users-grants-update)) endpoint to\nadjust permissions for an Account Image.\n",
        "example": "linode/debian9",
        "type": "string"
      },
      "root_pass": {
        "description": "This sets the root user's password on a newly-created Linode Disk when deploying from an Image.\n\n* **Required** when creating a Linode Disk from an Image, including when using a StackScript.\n\n* Must meet a password strength score requirement that is calculated internally by the API.\nIf the strength requirement is not met, you will receive a `Password does not meet strength requirement` error.\n",
        "example": "aComplexP@ssword",
        "format": "password",
        "maxLength": 128,
        "minLength": 7,
        "type": "string",
        "writeOnly": true
      },
      "stackscript_data": {
        "description": "This field is required only if the StackScript being deployed requires input data from the User for successful completion. See [User Defined Fields (UDFs)](/docs/guides/writing-scripts-for-use-with-linode-stackscripts-a-tutorial/#user-defined-fields-udfs) for more details.\n\nThis field is required to be valid JSON.\n\nTotal length cannot exceed 65,535 characters.\n",
        "example": {
          "gh_username": "linode"
        },
        "maxLength": 65535,
        "type": "object"
      },
      "stackscript_id": {
        "description": "A StackScript ID that will cause the referenced StackScript to be run during\ndeployment of this Linode. A compatible `image` is required to use a\nStackScript. To get a list of available StackScript and their permitted Images\nsee [/stackscripts](/docs/api/stackscripts/#stackscripts-list).\nThis field cannot be used when deploying from a Backup or a Private Image.\n",
        "example": 10079,
        "type": "integer"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.linode.com/v4/linode/instances/{linodeId}/rebuild"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**alerts**",
              {
                "$ul": [
                  "**cpu**: The percentage of CPU usage required to trigger an alert.",
                  "**io**: The amount of disk IO operation per second required to trigger an alert. If the average disk IO over two hours exceeds this value, we'll send you an alert. If set to `0` (zero), this alert is disabled.",
                  "**network_in**: The amount of incoming traffic, in Mbit/s, required to trigger an alert. If the average incoming traffic over two hours exceeds this value, we'll send you an alert. If this is set to `0` (zero), the alert is disabled.",
                  "**network_out**: The amount of outbound traffic, in Mbit/s, required to trigger an alert. If the average outbound traffic over two hours exceeds this value, we'll send you an alert. If this is set to `0` (zero), the alert is disabled.",
                  "**transfer_quota**: The percentage of network transfer that may be used before an alert is triggered. When this value is exceeded, we'll alert you. If this is set to `0` (zero), the alert is disabled."
                ]
              }
            ],
            [
              "**backups**: Information about this Linode's backups status. For information about available backups, see [/linode/instances/{linodeId}/backups](/docs/api/linode-instances/#backups-list).",
              {
                "$ul": [
                  "**available**: Whether Backups for this Linode are available for restoration.",
                  "**enabled**: If this Linode has the Backup service enabled. To enable backups, see [POST /linode/instances/{linodeId}/backups/enable](/docs/api/linode-instances/#backups-enable).",
                  "**last_successful**: The last successful backup date. 'null' if there was no previous backup.",
                  [
                    "**schedule**",
                    {
                      "$ul": [
                        "**day**: The day of the week that your Linode's weekly Backup is taken.",
                        "**window**: The window in which your backups will be taken, in UTC. A"
                      ]
                    }
                  ]
                ]
              }
            ],
            "**created**: When this Linode was created.",
            "**group**: A deprecated property denoting a group label for this Linode.",
            "**host_uuid**: The Linode's host machine, as a UUID.",
            "**hypervisor**: The virtualization software powering this Linode.",
            "**id**: This Linode's ID which must be provided for all operations impacting this Linode.",
            "**image**",
            "**ipv4**: This Linode's IPv4 Addresses. Each Linode is assigned a single public IPv4 address",
            "**ipv6**: This Linode's IPv6 SLAAC address. This address is specific to a Linode, and may not be shared. If the Linode has not been assigned an IPv6 address, the return value will be `null`.",
            "**label**: The Linode's label is for display purposes only. If no label is provided for a Linode,",
            "**region**: This is the [Region](/docs/api/regions/#regions-list) where the Linode was deployed. A Linode's region can only be changed by initiating a [cross data center migration](/docs/api/linode-instances/#dc-migrationpending-host-migration-initiate).",
            [
              "**specs**: Information about the resources available to this Linode.",
              {
                "$ul": [
                  "**disk**: The amount of storage space, in MB, this Linode has access to. A typical Linode will divide this space between a primary disk with an `image` deployed to it, and a swap disk, usually 512 MB. This is the default configuration created when deploying a Linode with an `image` through [POST /linode/instances](/docs/api/linode-instances/#linode-create). While this configuration is suitable for 99% of use cases, if you need finer control over your Linode's disks, see the [/linode/instances/{linodeId}/disks](/docs/api/linode-instances/#disks-list) endpoints.",
                  "**gpus**: The number of gpus this Linode has access to.",
                  "**memory**: The amount of RAM, in MB, this Linode has access to.",
                  "**transfer**: The amount of network transfer this Linode is allotted each month.",
                  "**vcpus**: The number of vcpus this Linode has access to."
                ]
              }
            ],
            "**status**: A brief description of this Linode's current state. This field may change without direct action from you. For example, when a Linode goes into maintenance mode its status will display \"stopped\".",
            "**tags**: An array of tags applied to this object.  Tags are for organizational purposes only.",
            "**type**: This is the [Linode Type](/docs/api/linode-types/#types-list) that this Linode was deployed with.",
            "**updated**: When this Linode was last updated.",
            "**watchdog_enabled**: The watchdog, named Lassie, is a Shutdown Watchdog that monitors your Linode and will reboot it if it powers off unexpectedly. It works by issuing a boot job when your Linode powers off without a shutdown job being responsible."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
