{
  "name": "postListsId",
  "description": "Batch subscribe or unsubscribe list members.",
  "parameters": {
    "type": "object",
    "properties": {
      "list_id": {
        "type": "string",
        "description": "The unique ID for the list."
      },
      "skip_merge_validation": {
        "type": "boolean",
        "description": "If skip_merge_validation is true, member data will be accepted without merge field values, even if the merge field is usually required. This defaults to false."
      },
      "skip_duplicate_check": {
        "type": "boolean",
        "description": "If skip_duplicate_check is true, we will ignore duplicates sent in the request when using the batch sub/unsub on the lists endpoint. The status of the first appearance in the request will be saved. This defaults to false."
      },
      "body": {
        "description": "Members to subscribe to or unsubscribe from a list.",
        "properties": {
          "members": {
            "description": "An array of objects, each representing an email address and the subscription status for a specific list. Up to 500 members may be added or updated with each API call.",
            "items": {
              "description": "Individuals who are currently or have been previously subscribed to this list, including members who have bounced or unsubscribed.",
              "properties": {
                "email_address": {
                  "description": "Email address for a subscriber.",
                  "title": "Email Address",
                  "type": "string"
                },
                "email_type": {
                  "description": "Type of email this member asked to get ('html' or 'text').",
                  "title": "Email Type",
                  "type": "string"
                },
                "interests": {
                  "additionalProperties": {
                    "description": "Keys are interest IDs, values are booleans that describe whether the list member is in that group or not.",
                    "title": "Interest Value",
                    "type": "boolean"
                  },
                  "description": "The key of this object's properties is the ID of the interest in question.",
                  "title": "Subscriber Interests",
                  "type": "object"
                },
                "ip_opt": {
                  "description": "The IP address the subscriber used to confirm their opt-in status.",
                  "title": "Opt-in IP",
                  "type": "string"
                },
                "ip_signup": {
                  "description": "IP address the subscriber signed up from.",
                  "title": "Signup IP",
                  "type": "string"
                },
                "language": {
                  "description": "If set/detected, the [subscriber's language](https://mailchimp.com/help/view-and-edit-contact-languages/).",
                  "title": "Language",
                  "type": "string"
                },
                "location": {
                  "description": "Subscriber location information.",
                  "properties": {
                    "latitude": {
                      "description": "The location latitude.",
                      "title": "Latitude",
                      "type": "number"
                    },
                    "longitude": {
                      "description": "The location longitude.",
                      "title": "Longitude",
                      "type": "number"
                    }
                  },
                  "title": "Location",
                  "type": "object"
                },
                "merge_fields": {
                  "additionalProperties": {
                    "description": "This object's keys are merge tags (like FNAME). It's values are the values to be added to the merge field."
                  },
                  "description": "A dictionary of merge fields where the keys are the merge tags. See the [Merge Fields documentation](https://mailchimp.com/developer/marketing/docs/merge-fields/#structure) for more about the structure.",
                  "title": "Merge Fields",
                  "type": "object"
                },
                "status": {
                  "description": "Subscriber's current status.",
                  "enum": [
                    "subscribed",
                    "unsubscribed",
                    "cleaned",
                    "pending",
                    "transactional"
                  ],
                  "title": "Status",
                  "type": "string"
                },
                "timestamp_opt": {
                  "description": "The date and time the subscriber confirmed their opt-in status in ISO 8601 format.",
                  "format": "date-time",
                  "title": "Opt-in Timestamp",
                  "type": "string"
                },
                "timestamp_signup": {
                  "description": "The date and time the subscriber signed up for the list in ISO 8601 format.",
                  "format": "date-time",
                  "title": "Signup Timestamp",
                  "type": "string"
                },
                "vip": {
                  "description": "[VIP status](https://mailchimp.com/help/designate-and-send-to-vip-contacts/) for subscriber.",
                  "title": "VIP",
                  "type": "boolean"
                }
              },
              "title": "Add List Members",
              "type": "object"
            },
            "title": "List Members",
            "type": "array"
          },
          "sync_tags": {
            "description": "Whether this batch operation will replace all existing tags with tags in request.",
            "title": "Sync Tags",
            "type": "boolean"
          },
          "update_existing": {
            "description": "Whether this batch operation will change existing members' subscription status.",
            "title": "Update Existing Members",
            "type": "boolean"
          }
        },
        "required": [
          "members"
        ],
        "title": "Members to Subscribe/Unsubscribe to/from a List in batch",
        "type": "object"
      }
    },
    "required": [
      "list_id",
      "body"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://server.api.mailchimp.com/3.0/lists/{list_id}{?skip_merge_validation,skip_duplicate_check}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Batch update List members"
        },
        "Batch update list members.",
        "**Key properties:**",
        {
          "$ul": [
            "**_links**: A list of link types and descriptions for the API schema documents.",
            "**error_count**: The total number of items matching the query, irrespective of pagination.",
            "**errors**: An array of objects, each representing an email address that could not be added to the list or updated and an error message providing more details.",
            "**new_members**: An array of objects, each representing a new member that was added to the list.",
            "**total_created**: The total number of items matching the query, irrespective of pagination.",
            "**total_updated**: The total number of items matching the query, irrespective of pagination.",
            "**updated_members**: An array of objects, each representing an existing list member whose subscription status was updated."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Problem Detail Document"
        },
        "An error generated by the Mailchimp API. Conforms to IETF draft 'draft-nottingham-http-problem-06'.",
        "**Key properties:**",
        {
          "$ul": [
            "**detail**: A human-readable explanation specific to this occurrence of the problem. [Learn more about errors](/developer/guides/get-started-with-mailchimp-api-3/#Errors).",
            "**instance**: A string that identifies this specific occurrence of the problem. Please provide this ID when contacting support.",
            "**status**: The HTTP status code (RFC2616, Section 6) generated by the origin server for this occurrence of the problem.",
            "**title**: A short, human-readable summary of the problem type. It shouldn't change based on the occurrence of the problem, except for purposes of localization.",
            "**type**: An absolute URI that identifies the problem type. When dereferenced, it should provide human-readable documentation for the problem type."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
