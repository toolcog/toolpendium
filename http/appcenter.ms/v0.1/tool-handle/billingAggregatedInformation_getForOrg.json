{
  "name": "billingAggregatedInformation_getForOrg",
  "description": "Aggregated Billing Information for a given Organization.",
  "parameters": {
    "type": "object",
    "properties": {
      "orgName": {
        "format": "string",
        "type": "string",
        "description": "The name of the Organization"
      },
      "service": {
        "enum": [
          "Test",
          "Build"
        ],
        "type": "string",
        "description": "Type of service that should be included in the Billing Information"
      },
      "period": {
        "enum": [
          "Previous",
          "Current",
          "Next"
        ],
        "type": "string",
        "description": "Type of period that should be included in the Billing Information"
      },
      "showOriginalPlans": {
        "type": "boolean",
        "description": "Controls whether the API should show the original plan when Azure Subscription is not enabled"
      }
    },
    "required": [
      "orgName"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://api.appcenter.ms/v0.1/orgs/{orgName}/billing/aggregated{?service,period,showOriginalPlans}"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Aggregated Billing Information for a user or an organization",
        "**Key properties:**",
        {
          "$ul": [
            "**azureSubscriptionId**: Unique identifier for the Azure subscription used for billing",
            "**azureSubscriptionState**: State of the Azure subscription used for billing",
            [
              "**billingPlans**: Billing Plans section in the Billing Information",
              {
                "$ul": [
                  [
                    "**buildService**: Billing Plans for a single service",
                    {
                      "$ul": [
                        "**canSelectTrialPlan**: Can customer select trial plan for that service (if it exists)?",
                        [
                          "**currentBillingPeriod**: Billing plans for a given period",
                          {
                            "$ul": [
                              [
                                "**byAccount**: Selection of a billing plan",
                                {
                                  "$ul": [
                                    "**count**: Number of instances of the billing plan.",
                                    [
                                      "**plan**: Billing Plan",
                                      {
                                        "$ul": [
                                          "**attributes**: Collection of attribute values.",
                                          "**id**: The Billing Plan ID",
                                          "**limits**: A collection of named numeric values",
                                          "**parentId**",
                                          "**paymentSource**: Service that receives payments for this billing plan.",
                                          "**price**: Price of the Billing Plan",
                                          "**service**: Name of the service that the plan applies to.",
                                          "**version**: Version of the Billing Plan schema"
                                        ]
                                      }
                                    ]
                                  ]
                                }
                              ],
                              "**endTime**: Exclusive end of the period.",
                              "**startTime**: Inclusive start of the period"
                            ]
                          }
                        ],
                        "**lastTrialPlanExpirationTime**: Expiration time of the last selected trial plan. Will be null if trial plan was not used."
                      ]
                    }
                  ],
                  [
                    "**testService**: Billing Plans for a single service",
                    {
                      "$ul": [
                        "**canSelectTrialPlan**: Can customer select trial plan for that service (if it exists)?",
                        [
                          "**currentBillingPeriod**: Billing plans for a given period",
                          {
                            "$ul": [
                              [
                                "**byAccount**: Selection of a billing plan",
                                {
                                  "$ul": [
                                    "**count**: Number of instances of the billing plan.",
                                    [
                                      "**plan**: Billing Plan",
                                      {
                                        "$ul": [
                                          "**attributes**: Collection of attribute values.",
                                          "**id**: The Billing Plan ID",
                                          "**limits**: A collection of named numeric values",
                                          "**parentId**",
                                          "**paymentSource**: Service that receives payments for this billing plan.",
                                          "**price**: Price of the Billing Plan",
                                          "**service**: Name of the service that the plan applies to.",
                                          "**version**: Version of the Billing Plan schema"
                                        ]
                                      }
                                    ]
                                  ]
                                }
                              ],
                              "**endTime**: Exclusive end of the period.",
                              "**startTime**: Inclusive start of the period"
                            ]
                          }
                        ],
                        "**lastTrialPlanExpirationTime**: Expiration time of the last selected trial plan. Will be null if trial plan was not used."
                      ]
                    }
                  ]
                ]
              }
            ],
            "**id**: ID of the user or organization",
            "**timestamp**: The ISO 8601 datetime of last modification",
            [
              "**usage**: Usage section in the Billing Information",
              {
                "$ul": [
                  [
                    "**buildService**: Resource usage for a single Mobile Center service",
                    {
                      "$ul": [
                        [
                          "**currentUsagePeriod**: Usage for a single period",
                          {
                            "$ul": [
                              "**byAccount**: A collection of named numeric values",
                              "**byApp**: A collection of  named numeric values grouped by app",
                              "**endTime**: Exclusive end time of the usage period.",
                              "**startTime**: Inclusive start time of the usage period"
                            ]
                          }
                        ]
                      ]
                    }
                  ],
                  [
                    "**testService**: Resource usage for a single Mobile Center service",
                    {
                      "$ul": [
                        [
                          "**currentUsagePeriod**: Usage for a single period",
                          {
                            "$ul": [
                              "**byAccount**: A collection of named numeric values",
                              "**byApp**: A collection of  named numeric values grouped by app",
                              "**endTime**: Exclusive end time of the usage period.",
                              "**startTime**: Inclusive start time of the usage period"
                            ]
                          }
                        ]
                      ]
                    }
                  ]
                ]
              }
            ],
            "**version**: Version of the Billing Information schema"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**error**",
              {
                "$ul": [
                  "**code**: The status code return by the API. It can be 400 or 403 or 500.",
                  "**message**: The reason for the request failed"
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
