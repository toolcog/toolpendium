{
  "name": "sendCalls",
  "description": "Use the /calls API to send individual calls quickly. A verified Caller ID and sufficient credits are required to make a call. CallRecipient represents a single recipient identified by phone number or contact id in CallFire system. You can attach user-defined attributes to a Call action via CallRecipient.attributes property, attributes are available in Call action response",
  "parameters": {
    "type": "object",
    "properties": {
      "fields": {
        "type": "string",
        "description": "Limit fields received in response. E.g. fields: id, name or fields items (id, name), see more at [partial response](https://developers.callfire.com/docs.html#partial-response) page."
      },
      "campaignId": {
        "format": "int64",
        "type": "integer",
        "description": "Specifies a campaignId to send calls quickly on a previously created campaign"
      },
      "defaultLiveMessage": {
        "type": "string",
        "description": "Text to be turned into a sound, this text will be played when the phone is answered. Parameter can be overridden for any particular CallRecipient"
      },
      "defaultMachineMessage": {
        "type": "string",
        "description": "Text to be turned into a sound, this text will be played when answering machine is detected. Parameter can be overridden for any particular CallRecipient"
      },
      "defaultLiveMessageSoundId": {
        "format": "int64",
        "type": "integer",
        "description": "Id of sound file to play if phone is answered. Parameter can be overridden for any particular CallRecipient"
      },
      "defaultMachineMessageSoundId": {
        "format": "int64",
        "type": "integer",
        "description": "An id of a sound file to play if answering machine is detected. Parameter can be overridden for any particular CallRecipient"
      },
      "defaultVoice": {
        "enum": [
          "MALE1",
          "FEMALE1",
          "FEMALE2",
          "SPANISH1",
          "FRENCHCANADIAN1"
        ],
        "type": "string",
        "description": "The voice set by default for all text-to-speech messages defined in CallRecipient objects or as default *Message properties"
      },
      "strictValidation": {
        "type": "boolean",
        "description": "Turns on strict validation for recipients. System will reply with BAD_REQUEST(400) if strictValidation = true and one of numbers didn't pass validation"
      },
      "body": {
        "items": {
          "$ref": "#/$defs/CallRecipient"
        },
        "type": "array",
        "description": "An array of CallRecipient objects. \nLimitations:\n1. Max number of CallRecipient objects is 10\n"
      }
    },
    "$defs": {
      "CallRecipient": {
        "description": "Recipient of a campaign action. Can be a phone number, contact, or contact list with attributes added to action. It is required to specify one of this values",
        "properties": {
          "attributes": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "Map of user-defined string attributes associated with recipient",
            "type": "object"
          },
          "contactId": {
            "description": "An id of existing contact used as recipient",
            "format": "int64",
            "type": "integer"
          },
          "dialplanXml": {
            "description": "An IVR xml document describing dialplan to setup an IVR broadcast. If dialplan is set there is no need to set live, machine and transfer sounds (or vice versa)",
            "type": "string"
          },
          "fromNumber": {
            "description": "~",
            "type": "string"
          },
          "liveMessage": {
            "description": "Text to be turned into a sound, this text will be played when the phone is answered",
            "type": "string"
          },
          "liveMessageSoundId": {
            "description": "An id of a sound file to play if phone is answered",
            "format": "int64",
            "type": "integer"
          },
          "machineMessage": {
            "description": "Text to be used to turn into sound, this text will be played when answering machine is detected",
            "type": "string"
          },
          "machineMessageSoundId": {
            "description": "An id of a sound file to play if answering machine is detected",
            "format": "int64",
            "type": "integer"
          },
          "phoneNumber": {
            "description": "Recipient's phone number in E.164 format (11-digit) or short code. Example: 12132000384",
            "type": "string"
          },
          "transferDigit": {
            "description": "A digit pressed to initiate the transfer",
            "type": "string"
          },
          "transferMessage": {
            "description": "Text to be turned into sound, this text will be played when the transfer digit is played",
            "type": "string"
          },
          "transferMessageSoundId": {
            "description": "An id of a sound file to play if call is transferred",
            "format": "int64",
            "type": "integer"
          },
          "transferNumber": {
            "description": "Phone number in E.164 format (11-digit) to transfer the call to. Example: 12132000384",
            "type": "string"
          },
          "voice": {
            "description": "The voice to be used (MALE1, FEMALE1, FEMALE2, SPANISH1, FRENCHCANADIAN1)",
            "enum": [
              "MALE1",
              "FEMALE1",
              "FEMALE2",
              "SPANISH1",
              "FRENCHCANADIAN1"
            ],
            "type": "string"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.callfire.com/v2/calls{?fields,campaignId,defaultLiveMessage,defaultMachineMessage,defaultLiveMessageSoundId,defaultMachineMessageSoundId,defaultVoice,strictValidation}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "~",
        "**Key properties:**",
        {
          "$ul": [
            "**items**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "500": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
