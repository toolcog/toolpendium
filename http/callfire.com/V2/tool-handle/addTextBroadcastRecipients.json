{
  "name": "addTextBroadcastRecipients",
  "description": "Use this API to add recipients to a text broadcast which is already created. Post a list of Recipient objects to be immediately added to the text broadcast campaign. These contacts will not go through validation process, and will be acted upon as they are added. Recipients may be added as a list of contact ids, or list of numbers",
  "parameters": {
    "type": "object",
    "properties": {
      "id": {
        "format": "int64",
        "type": "integer",
        "description": "An id of a text broadcast"
      },
      "fields": {
        "type": "string",
        "description": "Limit fields received in response. E.g. fields: id, name or fields items (id, name), see more at [partial response](https://developers.callfire.com/docs.html#partial-response) page."
      },
      "strictValidation": {
        "type": "boolean",
        "description": "Turns on strict validation for recipients. System will reply with BAD_REQUEST(400) if strictValidation = true and one of numbers didn't pass validation"
      },
      "body": {
        "items": {
          "$ref": "#/$defs/TextRecipient"
        },
        "type": "array",
        "description": "A list of the TextRecipient objects"
      }
    },
    "required": [
      "id"
    ],
    "$defs": {
      "TextRecipient": {
        "description": "A recipient of a text message. You should provide either phone number or contact id of existing contact",
        "properties": {
          "attributes": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "A map of string attributes associated with a recipient",
            "type": "object"
          },
          "contactId": {
            "description": "An id of existing contact in account",
            "format": "int64",
            "type": "integer"
          },
          "fromNumber": {
            "description": "~",
            "type": "string"
          },
          "media": {
            "description": "A list of media objects' ids associated with a text message",
            "items": {
              "$ref": "#/$defs/Media"
            },
            "type": "array"
          },
          "message": {
            "description": "A text message",
            "type": "string"
          },
          "phoneNumber": {
            "description": "Phone number in E.164 format (11-digit) or short code. Example: 12132000384, 67076",
            "type": "string"
          }
        },
        "type": "object"
      },
      "Media": {
        "description": "Represents a media file which can be added to a text message",
        "properties": {
          "accountId": {
            "description": "~",
            "format": "int64",
            "type": "integer"
          },
          "created": {
            "description": "The time when the given resource was created, formatted in unix time milliseconds (read only). Example: 1473781817000 ",
            "format": "int64",
            "type": "integer"
          },
          "id": {
            "description": "An id of a media file",
            "format": "int64",
            "type": "integer"
          },
          "lengthInBytes": {
            "description": "A size of a media file in bytes",
            "format": "int64",
            "type": "integer"
          },
          "mediaType": {
            "description": "A MIME type of media file, ex: image/jpeg, image/png, video/mp4, audio/mp3, etc",
            "type": "string"
          },
          "name": {
            "description": "A name of a media file",
            "type": "string"
          },
          "publicUrl": {
            "description": "A public URL of a media file",
            "type": "string"
          }
        },
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.callfire.com/v2/texts/broadcasts/{id}/recipients{?fields,strictValidation}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "~",
        "**Key properties:**",
        {
          "$ul": [
            "**items**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "500": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "Error response containing error info",
        "**Key properties:**",
        {
          "$ul": [
            "**developerMessage**: ~",
            "**helpLink**: ~",
            "**httpStatusCode**: ~",
            "**internalCode**: ~",
            "**message**: ~"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
