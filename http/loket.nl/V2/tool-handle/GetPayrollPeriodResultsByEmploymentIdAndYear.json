{
  "name": "GetPayrollPeriodResultsByEmploymentIdAndYear",
  "description": "__Activity name :__ GetPayrollPeriodResultsByEmploymentIdAndYear\n\nDownload the payroll results (conform overzicht strook) of an employment per payroll period for the provided year.\n\n**Please note the following:**  There is a major functional difference between acquiring the payslips per payroll run or acquiring payroll results per payroll period(in this case a year). In Loket, for each (approved) run there will be payroll results for that run. Each employment with any results in that payroll run will have (one or more) payslips, these are the payroll results/ payslips for that run. Often these results relate to the payroll period for which that payroll run is performed, but the results may apply to other payroll periods. __For example:__ the payroll run for March may contain results that apply to the months January and/or February. (this may occur within a specific year)\n\n* Requesting payslips/results per RUN will provide you all payroll results from that specific payrollrun regardless of the period it applies to.\n* Requesting PERIOD results will provide you all (approved) payroll results for that period regardless of the payroll run it comes from.\n\nDe facto the payslips/results per RUN are your actual payslips (loonstrook). The results per period are more useful as an overview per period (overzichtstrook).\n\nOne more remark: the response of this endpoint is dependent on the role of the user. If the user has role 'werknemer' than the results shown are only based on those approved payroll runs where the ESS-date is on or before today. For other users the results will contain data from all approved payroll runs regardless of ESS-date.\n",
  "parameters": {
    "type": "object",
    "properties": {
      "Authorization": {
        "example": "Bearer <TOKEN>",
        "pattern": "^Bearer\\s[\\w-]+$",
        "type": "string",
        "description": "A valid Bearer token for authorizing the request."
      },
      "Accept": {
        "example": "application/json;version=2018-01-01",
        "type": "string",
        "description": "The accept header is used to influence what type of output is returned and in most cases the version of the output"
      },
      "employmentId": {
        "format": "uuid",
        "type": "string",
        "description": "The unique identifier of the employment"
      },
      "year": {
        "example": 2018,
        "format": "int32",
        "maxLength": 4,
        "type": "integer",
        "description": "The payroll year"
      }
    },
    "required": [
      "Authorization",
      "Accept",
      "employmentId",
      "year"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://api.loket.nl/v2/providers/employers/employees/employments/{employmentId}/payrollperiodresults/year/{year}"
    },
    "headers": {
      "Authorization": {
        "$": "Authorization"
      },
      "Accept": {
        "$": "Accept"
      }
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The version of the resource",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**version**",
              {
                "$ul": [
                  "**obsoleteDate**: The date (can be null) on which the `resourceVersion` is no longer supported/available",
                  "**resourceVersion**: The resource version of the object in the response"
                ]
              }
            ],
            "**messages**",
            [
              "**content**",
              {
                "$ul": [
                  "**employmentId**: The unique identifier of an object (GUID/UUID)",
                  "**payrollPeriods**"
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The version of the resource",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**version**",
              {
                "$ul": [
                  "**obsoleteDate**: The date (can be null) on which the `resourceVersion` is no longer supported/available",
                  "**resourceVersion**: The resource version of the object in the response"
                ]
              }
            ],
            "**messages**",
            "**content**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**message**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**message**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
