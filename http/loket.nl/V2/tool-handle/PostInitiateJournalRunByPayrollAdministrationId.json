{
  "name": "PostInitiateJournalRunByPayrollAdministrationId",
  "description": "__Activity name :__ PostInitiateJournalRunByPayrollAdministrationId This is a controller endpoint to perform an action.\n\nIn the older Loket GUI this specific action is referred to as 'journaliseren' If this action is performed succesfully the journal run will be created with status 0 and will be queud for processing. After the initiated run has been picked up and processed by the background process, then the status of the run will be changed accordingly.\n\nThis action may be performed for all payroll periods that are *available for the payroll administration* AND that meet one of the following requirements;\n* The payroll period is less then 7 years in the past\n* There is a journal profile configured for the given payroll period\n* There is an approved payroll run for the given payroll period that has no other journalruns except for failed or removed journalruns\n* All the payroll runs are processed in order so in order to start a journalrun the previous payrollrun (that should have a journalrun) has to have a succesfull journal run in order to start the next one\n\n__Metadata :__  No metadata endpoint available for this controller endpoint.\n\n__Defaults :__ Defaults endpoint is available for this controller endpoint by adding /defaults. Also, an endpoint is available to retrieve initiation values for a specific period.",
  "parameters": {
    "type": "object",
    "properties": {
      "payrollAdministrationId": {
        "format": "uuid",
        "type": "string",
        "description": "The unique identifier of an administration"
      },
      "Authorization": {
        "example": "Bearer <TOKEN>",
        "pattern": "^Bearer\\s[\\w-]+$",
        "type": "string",
        "description": "A valid Bearer token for authorizing the request."
      },
      "Accept": {
        "example": "application/json;version=2018-01-01",
        "type": "string",
        "description": "The accept header is used to influence what type of output is returned and in most cases the version of the output"
      }
    },
    "required": [
      "payrollAdministrationId",
      "Authorization",
      "Accept"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.loket.nl/v2/providers/employers/payrolladministrations/{payrollAdministrationId}/journalruns/initiate"
    },
    "headers": {
      "Authorization": {
        "$": "Authorization"
      },
      "Accept": {
        "$": "Accept"
      }
    }
  },
  "responses": {
    "202": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The version of the resource",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**version**",
              {
                "$ul": [
                  "**obsoleteDate**: The date (can be null) on which the `resourceVersion` is no longer supported/available",
                  "**resourceVersion**: The resource version of the object in the response"
                ]
              }
            ],
            "**messages**",
            [
              "**content**",
              {
                "$ul": [
                  "**id**: The unique identifier of an object (GUID/UUID)",
                  [
                    "**journalRunStatus**",
                    {
                      "$ul": [
                        "**key**: Possible values for the payroll run status are;",
                        "**value**: The value describing the current status of the payroll run."
                      ]
                    }
                  ],
                  [
                    "**methodOfCreation**: Method by which the creation of the journal run was triggered.",
                    {
                      "$ul": [
                        "**key**",
                        "**value**"
                      ]
                    }
                  ],
                  [
                    "**payrollRun**",
                    {
                      "$ul": [
                        [
                          "**payrollPeriod**",
                          {
                            "$ul": [
                              "**periodEndDate**: The last day of the period for which the tax return message was created",
                              "**periodNumber**: The period number of the payroll period the record relates to",
                              "**periodStartDate**: The first day of the period for which the tax return message was created",
                              "**testYear**: Indicates whether the payroll periode is part of a test year.",
                              "**year**: The year of the payroll period the record relates to"
                            ]
                          }
                        ],
                        "**payrollRunId**: The unique identifier of an object (GUID/UUID)",
                        "**sequenceNumberApproved**: Ascending sequence number related to an approved payrol run. A payroll run may have more than one journal run. With this number the journal run may be linked to the specific payroll run. "
                      ]
                    }
                  ],
                  "**processingFinishedTime**: The time at which at which the journal run was finished processing",
                  "**removeTime**: The time at which the journal run was removed.",
                  [
                    "**removedBy**",
                    {
                      "$ul": [
                        "**formattedName**: preformatted user name for displaying. \\<lastname\\>\\\", \\\"\\<initials\\>\\\" \\\"\\<prefix\\>",
                        "**id**: The unique identifier of an object (GUID/UUID)",
                        "**initials**: The initials of the user",
                        "**lastName**: The last name of the user",
                        "**prefix**: The prefix of the user"
                      ]
                    }
                  ],
                  "**requestTime**: The time at which the payroll run was requested by the user",
                  [
                    "**requestedBy**",
                    {
                      "$ul": [
                        "**formattedName**: preformated user name for displaying. \\<lastname\\>\\\", \\\"\\<initials\\>\\\" \\\"\\<prefix\\>",
                        "**id**: The unique identifier of an object (GUID/UUID)",
                        "**initials**: The initials of the user",
                        "**lastName**: The last name of the user",
                        "**prefix**: The prefix of the user"
                      ]
                    }
                  ],
                  "**sequenceNumber**: Ascending sequence number over ALL journal runs for the payroll administration."
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "The version of the resource",
        "**Key properties:**",
        {
          "$ul": [
            [
              "**version**",
              {
                "$ul": [
                  "**obsoleteDate**: The date (can be null) on which the `resourceVersion` is no longer supported/available",
                  "**resourceVersion**: The resource version of the object in the response"
                ]
              }
            ],
            "**messages**",
            "**content**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**message**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**message**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
