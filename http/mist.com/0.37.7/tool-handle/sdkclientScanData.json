{
  "name": "sdkclientScanData",
  "description": "Webhook sample for `sdkclient_scan_data` topic\n\n**Note**: The server host will be your own server FQDN where the Mist Cloud is sending the webhook messages\n",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/webhook_sdkclient-scan-data"
      }
    },
    "$defs": {
      "webhook_sdkclient-scan-data": {
        "description": "",
        "properties": {
          "events": {
            "items": {
              "properties": {
                "connection_ap": {
                  "description": "mac address of the AP the client is connected to",
                  "minLength": 1,
                  "type": "string"
                },
                "connection_band": {
                  "description": "5GHz or 2.4GHz band, of the BSSID the client is connected to",
                  "minLength": 1,
                  "type": "string"
                },
                "connection_bssid": {
                  "description": "BSSID of the AP the client is connected to",
                  "minLength": 1,
                  "type": "string"
                },
                "connection_channel": {
                  "description": "channel of the band the client is connected to",
                  "type": "integer"
                },
                "connection_rssi": {
                  "description": "RSSI of the client’s connection to the AP/BSSID",
                  "type": "number"
                },
                "last_seen": {
                  "description": "time client last seen with scan data",
                  "type": "number"
                },
                "mac": {
                  "description": "the client’s mac",
                  "minLength": 1,
                  "type": "string"
                },
                "scan_data": {
                  "items": {
                    "properties": {
                      "ap": {
                        "description": "mac address of the AP associated with the BSSID scanned",
                        "minLength": 1,
                        "type": "string"
                      },
                      "band": {
                        "description": "5GHz or 2.4GHz band, associated with the BSSID scanned",
                        "enum": [
                          "2.4",
                          "5"
                        ],
                        "minLength": 1,
                        "type": "string"
                      },
                      "bssid": {
                        "description": "BSSID found during client’s background scan for wifi",
                        "minLength": 1,
                        "type": "string"
                      },
                      "channel": {
                        "description": "channel of the band found in the scan",
                        "type": "integer"
                      },
                      "rssi": {
                        "description": "client’s RSSI relative to the BSSID scanned",
                        "type": "number"
                      },
                      "ssid": {
                        "description": "ESSID containing the BSSID scanned",
                        "minLength": 1,
                        "type": "string"
                      },
                      "timestamp": {
                        "description": "time the scan of the particular BSSID occurred",
                        "type": "number"
                      }
                    },
                    "required": [
                      "ap",
                      "bssid",
                      "band",
                      "channel",
                      "rssi",
                      "ssid",
                      "timestamp"
                    ],
                    "type": "object"
                  },
                  "minItems": 1,
                  "type": "array",
                  "uniqueItems": true
                },
                "site_id": {
                  "description": "Site ID",
                  "minLength": 1,
                  "type": "string"
                }
              },
              "required": [
                "connection_ap",
                "connection_band",
                "connection_channel",
                "connection_bssid",
                "mac",
                "connection_rssi",
                "site_id",
                "last_seen"
              ],
              "type": "object"
            },
            "minItems": 1,
            "readOnly": true,
            "type": "array",
            "uniqueItems": true
          },
          "topic": {
            "default": "sdkclient-scan-data",
            "enum": [
              "sdkclient-scan-data"
            ],
            "minLength": 1,
            "type": "string"
          }
        },
        "required": [
          "topic",
          "events"
        ],
        "type": "object",
        "x-examples": {
          "example-1": {
            "events": [
              {
                "connection_ap": "5c5b352f587e",
                "connection_band": "2.4",
                "connection_bssid": "5c5b352b51b4",
                "connection_channel": 11,
                "connection_rssi": -87,
                "last_seen": 1592333828,
                "mac": "70ef0071535f",
                "scan_data": [
                  {
                    "ap": "5c5b352f587e",
                    "band": "2.4",
                    "bssid": "5c5b352b51b4",
                    "channel": 11,
                    "rssi": -87,
                    "ssid": "mist-wifi",
                    "timestamp": 1592333828
                  },
                  {
                    "ap": "5c5b352f587e",
                    "band": "5",
                    "bssid": "5c5b352b51b8",
                    "channel": 36,
                    "rssi": -75,
                    "ssid": "mist-wifi",
                    "timestamp": 1592333828
                  }
                ],
                "site_id": "d761985e-49b1-4506-88e9-e0368a05c301"
              }
            ],
            "topic": "sdkclient-scan-data",
            "value": {
              "events": [
                {
                  "connection_ap": "5c5b352f587e",
                  "connection_band": "2.4",
                  "connection_bssid": "5c5b352b51b4",
                  "connection_channel": 11,
                  "connection_rssi": -87,
                  "last_seen": 1592333828,
                  "mac": "70ef0071535f",
                  "scan_data": [
                    {
                      "ap": "5c5b352f587e",
                      "band": "2.4",
                      "bssid": "5c5b352b51b4",
                      "channel": 11,
                      "rssi": -87,
                      "ssid": "mist-wifi",
                      "timestamp": 1592333828
                    },
                    {
                      "ap": "5c5b352f587e",
                      "band": "5",
                      "bssid": "5c5b352b51b8",
                      "channel": 36,
                      "rssi": -75,
                      "ssid": "mist-wifi",
                      "timestamp": 1592333828
                    }
                  ],
                  "site_id": "d761985e-49b1-4506-88e9-e0368a05c301"
                }
              ],
              "topic": "sdkclient-scan-data"
            }
          }
        },
        "x-stoplight": {
          "id": "595a3fb2a397a"
        }
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.mist.com/webhook_example/_sdkclient_scan_data"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
