{
  "name": "updateSiteEvpnTopology",
  "description": "Update the EVPN Topolgy",
  "parameters": {
    "type": "object",
    "properties": {
      "site_id": {
        "example": "000000ab-00ab-00ab-00ab-0000000000ab",
        "format": "uuid",
        "type": "string"
      },
      "evpn_topology_id": {
        "example": "000000ab-00ab-00ab-00ab-0000000000ab",
        "format": "uuid",
        "type": "string"
      },
      "body": {
        "$ref": "#/$defs/junos_evpn_topology"
      }
    },
    "required": [
      "site_id",
      "evpn_topology_id"
    ],
    "$defs": {
      "junos_evpn_topology": {
        "properties": {
          "id": {
            "readOnly": true,
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "pod_names": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "Property key is the pod number",
            "type": "object"
          },
          "switches": {
            "items": {
              "properties": {
                "deviceprofile_id": {
                  "example": "6a1deab1-96df-4fa2-8455-d5253f943d06",
                  "type": "string"
                },
                "downlink_ips": {
                  "items": {
                    "type": "string"
                  },
                  "readOnly": true,
                  "type": "array"
                },
                "downlinks": {
                  "items": {
                    "type": "string"
                  },
                  "readOnly": true,
                  "type": "array"
                },
                "esilaglinks": {
                  "items": {
                    "type": "string"
                  },
                  "type": "array"
                },
                "evpn_id": {
                  "type": "integer"
                },
                "mac": {
                  "minLength": 1,
                  "type": "string"
                },
                "pod": {
                  "default": 1,
                  "description": "optionally, for distribution / access / esilag-access, they can be placed into different pods.\ne.g. \n* for CLOS, to group dist / access switches into pods\n* for ERB/CRB, to group dist / esilag-access into pods",
                  "maximum": 255,
                  "minimum": 1,
                  "type": "integer"
                },
                "role": {
                  "description": "use `role`==`none` to remove a switch from the topology",
                  "enum": [
                    "core",
                    "distribution",
                    "access",
                    "collapsed-core",
                    "none",
                    "esilag-access"
                  ],
                  "minLength": 1,
                  "type": "string"
                },
                "site_id": {
                  "example": "1916d52a-4a90-11e5-8b45-1258369c38a9",
                  "type": "string"
                },
                "uplinks": {
                  "items": {
                    "type": "string"
                  },
                  "readOnly": true,
                  "type": "array"
                }
              },
              "type": "object"
            },
            "type": "array",
            "uniqueItems": true
          }
        },
        "required": [
          "switches"
        ],
        "title": "junos_evpn_topology",
        "type": "object",
        "x-examples": {
          "example-1": {
            "id": "string",
            "name": "string",
            "pod_names": {
              "property1": "string",
              "property2": "string"
            },
            "switches": [
              {
                "deviceprofile_id": "6a1deab1-96df-4fa2-8455-d5253f943d06",
                "downlink_ips": [
                  "string"
                ],
                "downlinks": [
                  "string"
                ],
                "esilaglinks": [
                  "string"
                ],
                "evpn_id": 0,
                "mac": "string",
                "pod": 1,
                "role": "core",
                "site_id": "1916d52a-4a90-11e5-8b45-1258369c38a9",
                "uplinks": [
                  "string"
                ]
              }
            ]
          }
        }
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "PUT",
    "url": {
      "$uri": "https://api.mist.com/api/v1/sites/{site_id}/evpn_topologies/{evpn_topology_id}"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "junos_evpn_topology"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**id**",
            "**name**",
            "**pod_names**: Property key is the pod number",
            "**switches**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "401": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**detail**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "403": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**detail**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "404": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**detail**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
