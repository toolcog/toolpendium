{
  "name": "fulfillment-simulation-external-marketplace",
  "description": "This endpoint can be triggered by marketplaces to simulate the fulfillment of an item in the cart.\r\n\r\nThe fulfillment information is useful whenever you need to know the availability of fulfilling an order for a specific cart setting, since the API response will let you know the updated price, inventory and shipping data.",
  "parameters": {
    "type": "object",
    "properties": {
      "Content-Type": {
        "default": "application/json",
        "type": "string",
        "description": "Type of the content being sent."
      },
      "Accept": {
        "default": "application/json",
        "type": "string",
        "description": "HTTP Client Negotiation _Accept_ Header. Indicates the types of responses the client can understand."
      },
      "affiliateId": {
        "default": "MNF",
        "type": "string",
        "description": "The affiliate ID code created by the seller."
      },
      "sc": {
        "example": 1,
        "type": "integer",
        "description": "Trade Policy (Sales Channel) identification."
      },
      "body": {
        "properties": {
          "clientProfileData": {
            "description": "Customer's profile information.",
            "properties": {
              "corporateDocument": {
                "description": "Corporate document, if the customer is a legal entity.",
                "nullable": true,
                "type": "string"
              },
              "corporateName": {
                "description": "Company name, if the customer is a legal entity.",
                "nullable": true,
                "type": "string"
              },
              "corporatePhone": {
                "description": "Corporate phone number, if the customer is a legal entity.",
                "nullable": true,
                "type": "string"
              },
              "customerClass": {
                "description": "Customer class.",
                "nullable": true,
                "type": "string"
              },
              "document": {
                "description": "Document informed by the customer.",
                "example": "12345678900",
                "type": "string"
              },
              "documentType": {
                "description": "Type of the document informed by the customer.",
                "example": "cpf",
                "type": "string"
              },
              "email": {
                "description": "Email address.",
                "example": "clark.kent@example.com",
                "type": "string"
              },
              "firstName": {
                "description": "First name.",
                "example": "Clark",
                "type": "string"
              },
              "isCorporate": {
                "description": "Indicates whether the customer is a legal entity.",
                "type": "boolean"
              },
              "lastName": {
                "description": "Last name.",
                "example": "Kent",
                "type": "string"
              },
              "phone": {
                "description": "Phone number.",
                "example": "+552199999999",
                "type": "string"
              },
              "profileCompleteOnLoading": {
                "description": "Indicates whether profile is complete on loading.",
                "type": "boolean"
              },
              "profileErrorOnLoading": {
                "description": "Indicates whether profile presents error on loading.",
                "nullable": true,
                "type": "boolean"
              },
              "stateInscription": {
                "description": "State inscription, if the customer is a legal entity.",
                "nullable": true,
                "type": "string"
              },
              "tradeName": {
                "description": "Trade name, if the customer is a legal entity.",
                "nullable": true,
                "type": "string"
              }
            },
            "type": "object"
          },
          "country": {
            "description": "Three letter ISO code of the country of the shipping address. This value must be sent along with the `postalCode` or `geoCoordinates` values.",
            "example": "BRA",
            "type": "string"
          },
          "geoCoordinates": {
            "default": [
              -47.924747467041016,
              -15.832582473754883
            ],
            "description": "Array containing two floats with geocoordinates, first longitude, then latitude.",
            "items": {
              "example": -47.924747467041016,
              "type": "number"
            },
            "type": "array"
          },
          "isCheckedIn": {
            "default": false,
            "description": "Indicates whether order is checked in.",
            "type": "boolean"
          },
          "items": {
            "description": "Array containing information about the SKUs inside the cart to be simulated.",
            "items": {
              "properties": {
                "id": {
                  "description": "The SKU ID.",
                  "example": "1",
                  "type": "string"
                },
                "quantity": {
                  "description": "The quantity of items of this specific SKU in the cart to be simulated.",
                  "example": 1,
                  "format": "int32",
                  "type": "integer"
                },
                "seller": {
                  "description": "The ID of the seller responsible for this SKU. This ID can be found in your VTEX Admin.",
                  "example": "1",
                  "type": "string"
                }
              },
              "type": "object"
            },
            "type": "array"
          },
          "marketingData": {
            "description": "Object containing promotion data such as coupon tracking information and internal or external UTMs.",
            "properties": {
              "coupon": {
                "default": "free-shipping",
                "description": "Sending an existing coupon code in this field will return the corresponding discount in the purchase. Use the [cart simulation](https://developers.vtex.com/vtex-rest-api/reference/orderform#orderformsimulation) request to check which coupons might apply before placing the order.",
                "type": "string"
              },
              "utmCampaign": {
                "default": "Black friday",
                "description": "UTM campaign",
                "type": "string"
              },
              "utmMedium": {
                "default": "CPC",
                "description": "UTM medium.",
                "type": "string"
              },
              "utmSource": {
                "default": "Facebook",
                "description": "UTM source.",
                "type": "string"
              },
              "utmiCampaign": {
                "default": "utmi_campaign-example",
                "description": "utmi_campaign (internal utm).",
                "type": "string"
              },
              "utmiPage": {
                "default": "utmi_page-example",
                "description": "utmi_page (internal utm).",
                "type": "string"
              },
              "utmiPart": {
                "default": "utmi_part-example",
                "description": "utmi_part (internal utm).",
                "type": "string"
              }
            },
            "type": "object"
          },
          "postalCode": {
            "description": "Postal code.",
            "example": "12345-000",
            "type": "string"
          },
          "selectedSla": {
            "description": "SLA selected by the customer.",
            "example": "Normal",
            "type": "string"
          },
          "storeId": {
            "description": "ID of the store.",
            "nullable": true,
            "type": "string"
          }
        },
        "required": [
          "id",
          "quantity",
          "seller"
        ],
        "type": "object"
      }
    },
    "required": [
      "Content-Type",
      "Accept"
    ]
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://vtex.local/api/checkout/pub/orderForms/simulation{?affiliateId,sc}"
    },
    "headers": {
      "Content-Type": {
        "$": "Content-Type"
      },
      "Accept": {
        "$": "Accept"
      }
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**country**: Three letter ISO code of the country of the shipping address.",
            "**items**: Information on each item in the cart.",
            "**logisticsInfo**: Array with logistics information on each item of the `items` array in the `orderForm`.",
            "**marketingData**: Object containing promotion data such as coupon tracking information and internal or external UTMs.",
            [
              "**paymentData**: Payment data information.",
              {
                "$ul": [
                  "**availableAccounts**: Available accounts.",
                  "**availableAssociations**: Available associations.",
                  "**availableTokens**: Available tokens.",
                  "**giftCardMessages**: Array of gift card messages.",
                  "**giftCards**: Gift card information, if it applies to the order.",
                  [
                    "**installmentOptions**: Installment options information.",
                    {
                      "$ul": [
                        "**bin**: Bin.",
                        [
                          "**installments**: Installments information.",
                          {
                            "$ul": [
                              "**count**: Count information.",
                              "**hasInterestRate**: Indicates whether the payment has interest.",
                              "**interestRate**: Interest rate value.",
                              "**sellerMerchantInstallments**: Seller merchant installments information.",
                              "**total**: Total value of the order without separating cents. For example, $24.99 is represented `2499`.",
                              "**value**: Value of the order without the interest rate. The value is shown without separating cents."
                            ]
                          }
                        ],
                        "**paymentGroupName**: Payment group name.",
                        "**paymentName**: Payment name.",
                        "**paymentSystem**: Payment system identification.",
                        "**value**: Total value assigned to this payment."
                      ]
                    }
                  ],
                  "**paymentSystems**: Information on payment systems.",
                  "**payments**: Information on each payment."
                ]
              }
            ],
            "**postalCode**: Postal Code.",
            [
              "**ratesAndBenefitsData**: Information on rates and benefits that apply to the order.",
              {
                "$ul": [
                  "**rateAndBenefitsIdentifiers**: List with rates and benefits identifiers.",
                  "**teaser**: List with rates and benefits teasers."
                ]
              }
            ],
            "**selectableGifts**: Array containing the data of the item selected as a gift."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
