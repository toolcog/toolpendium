{
  "name": "Userorderdetails",
  "description": "Lists all details from a user's order, through client's perspective. \r\n\r\n> Note that these requests are meant to be made by **Call center operator** profiles. Otherwise, they will return only orders from the same email making the request.",
  "parameters": {
    "type": "object",
    "properties": {
      "clientEmail": {
        "example": "customer@mail.com",
        "type": "string",
        "description": "Customer email."
      },
      "Content-Type": {
        "default": "application/json",
        "type": "string",
        "description": "Type of the content being sent."
      },
      "Accept": {
        "default": "application/json",
        "type": "string",
        "description": "HTTP Client Negotiation Accept Header. Indicates the types of responses the client can understand."
      },
      "orderId": {
        "example": "1172452900788-01",
        "type": "string",
        "description": "Order ID is a unique code that identifies an order."
      }
    },
    "required": [
      "clientEmail",
      "Content-Type",
      "Accept",
      "orderId"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://vtex.local/api/oms/user/orders/{orderId}{?clientEmail}"
    },
    "headers": {
      "Content-Type": {
        "$": "Content-Type"
      },
      "Accept": {
        "$": "Accept"
      }
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Userorderdetails"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**affiliateId**: Corresponds to the three-digit [affiliate](https://help.vtex.com/en/tutorial/configuring-affiliates--tutorials_187) identification code of the seller responsible for the order.",
            "**allowCancellation**: When set as `true`, the order can be canceled, and when set as `false`, it is no longer possible to cancel the order.",
            "**allowEdition**: When set as `true`, the order can be edited, and when set as `false`, it is no longer possible to edit the order.",
            "**authorizedDate**: Authorized order date.",
            "**callCenterOperatorData**: Call center operator responsible for the order.",
            "**cancelReason**: Reason for order cancellation.",
            [
              "**cancellationData**: Information about order cancellation, when it applies.",
              {
                "$ul": [
                  "**CancellationDate**: The date when the order was cancelled.",
                  "**Reason**: The reason why the order was cancelled.",
                  "**RequestedByPaymentNotification**: If the order cancellation was requested by the payment gateway (`true`) or not (`false`).",
                  "**RequestedBySellerNotification**: If the order cancellation was requested by the seller (`true`) or not (`false`).",
                  "**RequestedBySystem**: If the order cancellation was made by the system (`true`) or not (`false`). This type of order cancellation happens in [incomplete orders](https://help.vtex.com/en/tutorial/how-incomplete-orders-work--tutorials_294), for example.",
                  "**RequestedByUser**: If the order cancellation was requested by the costumer (`true`) or not (`false`)."
                ]
              }
            ],
            [
              "**changesAttachment**: Information about changes in the order.",
              {
                "$ul": [
                  "**changesData**: Order change details.",
                  "**id**: Object ID, the expect value is `changeAttachment`."
                ]
              }
            ],
            "**checkedInPickupPointId**: If the field `isCheckedIn` is set as `true`, the `checkedInPickupPointId` will retrieve the ID of the physical store where the order was made.",
            [
              "**clientPreferencesData**: Information about customer's preferences.",
              {
                "$ul": [
                  "**locale**: Customer's prefered language while accessing the store.",
                  "**optinNewsLetter**: When set as `true`, this field indicates customers opted to receive the newsletters, and when set as `false`, it means they did not."
                ]
              }
            ],
            [
              "**clientProfileData**: Object with information on the client's profile.",
              {
                "$ul": [
                  "**corporateDocument**: If the customer is a legal entity, here goes the corporate document.",
                  "**corporateName**: If the customer is a legal entity, here goes the corporate name.",
                  "**corporatePhone**: If the customer is a legal entity, here goes the corpany's phone number.",
                  "**customerClass**: Identification of the class the customer belongs to.",
                  "**document**: Document identification code informed by the customer.",
                  "**documentType**: Type of the document informed by the customer.",
                  "**email**: Customer's email.",
                  "**firstName**: Customer's first name.",
                  "**id**: Object ID, the expected value is `clientProfileData`.",
                  "**isCorporate**: The value is `true` when the customer is a legal entity and `false` when not.",
                  "**lastName**: Customer's last name.",
                  "**phone**: Customers's phone number.",
                  "**stateInscription**: If the customer is a legal entity, here goes the state inscription.",
                  "**tradeName**: If the customer is a legal entity, here goes the trade name.",
                  "**userProfileId**: Customer user profile ID."
                ]
              }
            ],
            "**commercialConditionData**: Information about commercial conditions.",
            "**creationDate**: Order's creation date.",
            "**customData**: Custom information in the order. This field is useful for storing data not included in other fields, for example, a message for a gift or a name to be printed in a shirt.",
            "**followUpEmail**: Email of the store's employee responsible for managing the order.",
            "**giftRegistryData**: Information about gift list, when it applies.",
            "**hostname**: Account Hostname registered in License Manager.",
            "**invoiceData**: Information pertinent to the order's invoice.",
            "**invoicedDate**: Order's invoice date.",
            "**isCheckedIn**: This field is set `true` when the order was made via inStore and `false` when it was not.",
            "**isCompleted**: When set as `true`, the order's payment has been settled, and when set as `false`, it has not been settled yet.",
            [
              "**itemMetadata**: Metadata information about the order's items.",
              {
                "$ul": [
                  "**Items**: Metadata items."
                ]
              }
            ],
            "**items**: Information about order's items.",
            "**lastChange**: Order's last change date.",
            "**lastMessage**: Last sent transactional message.",
            [
              "**marketingData**: Information about promotions and marketing. For example, coupon tracking information and internal or external UTMs.",
              {
                "$ul": [
                  "**coupon**: Coupon's code information.",
                  "**id**: Object ID which expected value is `marketingData`.",
                  "**marketingTags**: Marketing tags information. This field can be used to register campaign data or informative tags regarding promotions.",
                  "**utmCampaign**: Value of the `utm_campaign` parameter of the URL that led to the request.",
                  "**utmMedium**: Value of the `utm_medium` parameter of the URL that led to the request.",
                  "**utmPartner**: UTM Source Parameters.",
                  "**utmSource**: Value of the `utm_source` parameter of the URL that led to the request.",
                  "**utmiCampaign**: Internal UTM value `utmi_cp`.",
                  "**utmiPart**: Internal UTM value `utmi_pc`.",
                  "**utmipage**: Internal UTM value `utmi_p`."
                ]
              }
            ],
            [
              "**marketplace**: Details about the marketplace related to the order.",
              {
                "$ul": [
                  "**baseURL**: Marketplace base URL.",
                  "**isCertified**: If is a certified marketplace.",
                  "**name**: Name of the marketplace."
                ]
              }
            ],
            "**marketplaceItems**: Marketplace details object.",
            "**marketplaceOrderId**: Marketplace order ID.",
            "**marketplaceServicesEndpoint**: Marketplace services endpoint.",
            "**merchantName**: Name of the merchant.",
            "**openTextField**: Optional field with order's additional information. This field must be filled in using the following format: ",
            "**orderFormId**: [Order form](https://developers.vtex.com/docs/guides/orderform-fields) ID. ",
            "**orderGroup**: Order's group ID.",
            "**orderId**: Order ID is a unique code that identifies an order.",
            "**origin**: Order Origin, if `Marketplace` or `Fulfillment`.",
            [
              "**packageAttachment**: Package object populated after order invoiced.",
              {
                "$ul": [
                  "**packages**: Packages details."
                ]
              }
            ],
            [
              "**paymentData**: Object with information about the payment.",
              {
                "$ul": [
                  "**giftCards**: Array with information about Gift Cards.",
                  "**transactions**: Information about financial transactions."
                ]
              }
            ],
            [
              "**ratesAndBenefitsData**: Information on promotions and taxes that apply to the order.",
              {
                "$ul": [
                  "**id**: ID of the rate or benefit.",
                  "**rateAndBenefitsIdentifiers**: Information about order's promotions and taxes identifiers."
                ]
              }
            ],
            "**roundingError**: Rounding error total amount, if it applies. For example, in orders with a discount over non-integer multiplier items, the rounding price is performed per item, not after the sum of all items. That can cause a difference in the total discount amount, which is informed in this field.",
            "**salesChannel**: Sales channel (or [trade policy](https://help.vtex.com/tutorial/how-trade-policies-work--6Xef8PZiFm40kg2STrMkMV)) ID related to the order.",
            "**sellerOrderId**: ID of the seller related to the order. It can be a VTEX seller or an external seller.",
            "**sellers**: List of all sellers associated with the order.",
            "**sequence**: Sequence is a six-digit string that follows the order ID. For example, in order `1268540501456-01 (501456)`, the sequence is `501456`.",
            [
              "**shippingData**: Object containing shipping data.",
              {
                "$ul": [
                  [
                    "**address**: Shipping address details.",
                    {
                      "$ul": [
                        "**addressId**: Shipping address ID.",
                        "**addressType**: Type of address. For example, `Residential` or `Pickup`, among others.",
                        "**city**: City of the shipping address.",
                        "**complement**: Complement to the shipping address when it applies.",
                        "**country**: Three letters ISO code of the country of the shipping address (ISO 3166 ALPHA-3).",
                        "**entityId**: Shipping address entity ID.",
                        "**geoCoordinates**: Array with two numbers with geocoordinates, first longitude then latitude.",
                        "**neighborhood**: Neighborhood of the shipping address.",
                        "**number**: Number of the building, house or apartment in the shipping address.",
                        "**postalCode**: Postal code of the shipping address.",
                        "**receiverName**: Name of the person who is going to receive the order.",
                        "**reference**: Complement to help locate the shipping address, in case of delivery.",
                        "**state**: State of the shipping address.",
                        "**street**: Street of the shipping address.",
                        "**versionId**: Shipping address version ID."
                      ]
                    }
                  ],
                  "**id**: Object ID, the expected value is `shippingData`.",
                  "**logisticsInfo**: Array of objects containing item's logistics information.",
                  "**selectedAddresses**: Information about selected adresses.",
                  "**trackingHints**"
                ]
              }
            ],
            "**status**: Order [status](https://help.vtex.com/en/tutorial/order-flow-and-status--tutorials_196).",
            "**statusDescription**: `Deprecated`. Status description which is displayed on the Admin panel. This field is obsolete and may not return any value.",
            [
              "**storePreferencesData**: Object with data from the store's configuration - stored in VTEX's License Manager.",
              {
                "$ul": [
                  "**countryCode**: Three letters ISO code of the country (ISO 3166 ALPHA-3).",
                  "**currencyCode**: Currency code in ISO 4217. For example, `BRL`.",
                  [
                    "**currencyFormatInfo**: Object with currency format details.",
                    {
                      "$ul": [
                        "**CurrencyDecimalDigits**: Quantity of currency decimal digits.",
                        "**CurrencyDecimalSeparator**: Defines what currency decimal separator will be applied.",
                        "**CurrencyGroupSeparator**: Defines what currency group separator will be applied.",
                        "**CurrencyGroupSize**: Defines how many characters will be grouped.",
                        "**StartsWithCurrencySymbol**: Defines if all prices will be initiated with the currency symbol (`true`) or not (`false`)."
                      ]
                    }
                  ],
                  "**currencyLocale**: Currency Locale Code in LCID in decimal.",
                  "**currencySymbol**: Currency symbol.",
                  "**timeZone**: Time zone from where the order was made."
                ]
              }
            ],
            [
              "**subscriptionData**: Information about [subscriptions](https://help.vtex.com/tutorial/how-subscriptions-work--frequentlyAskedQuestions_4453).",
              {
                "$ul": [
                  "**SubscriptionGroupId**: ID of the subscription's group. If this field returns `null` and the `executionCount` is `0`, the order is the first one with subscriptions.",
                  "**Subscriptions**: List with subscriptions and their details."
                ]
              }
            ],
            [
              "**taxData**: Order's tax information.",
              {
                "$ul": [
                  "**areTaxesDesignatedByMarketplace**: If the taxes were designated by the marketplace (`true`), or not (`false`).",
                  "**taxInfoCollection**: Array with taxes' details."
                ]
              }
            ],
            "**totals**: List with details about orders' totals.",
            "**value**: Order's total amount."
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
