{
  "name": "POST_contactdb-recipients-search",
  "description": "<p>\n  Search using segment conditions without actually creating a segment.\n  Body contains a JSON object with <code>conditions</code>, a list of conditions as described below, and an optional <code>list_id</code>, which is a valid list ID for a list to limit the search on.\n</p>\n\n<p>\n  Valid operators for create and update depend on the type of the field for which you are searching.\n</p>\n\n<ul>\n  <li>Dates:\n    <ul>\n      <li>\"eq\", \"ne\", \"lt\" (before), \"gt\" (after)\n        <ul>\n          <li>You may use MM/DD/YYYY for day granularity or an epoch for second granularity.</li>\n        </ul>\n      </li>\n      <li>\"empty\", \"not_empty\"</li>\n      <li>\"is within\"\n        <ul>\n          <li>You may use an <a href=\"https://en.wikipedia.org/wiki/ISO_8601\">ISO 8601 date format</a> or the # of days.</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n  <li>Text: \"contains\", \"eq\" (is - matches the full field), \"ne\" (is not - matches any field where the entire field is not the condition value), \"empty\", \"not_empty\"</li>\n  <li>Numbers: \"eq\", \"lt\", \"gt\", \"empty\", \"not_empty\"</li>\n  <li>Email Clicks and Opens: \"eq\" (opened), \"ne\" (not opened)</li>\n</ul>\n\n<p>\n  Field values must all be a string.\n</p>\n\n<p>\n  Search conditions using \"eq\" or \"ne\" for email clicks and opens should provide a \"field\" of either <code>clicks.campaign_identifier</code> or <code>opens.campaign_identifier</code>.\n  The condition value should be a string containing the id of a completed campaign.\n</p>\n\n<p>\n  Search conditions list may contain multiple conditions, joined by an \"and\" or \"or\" in the \"and_or\" field.\n  The first condition in the conditions list must have an empty \"and_or\", and subsequent conditions must all specify an \"and_or\".\n</p>",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "example": {
          "conditions": [
            {
              "and_or": "",
              "field": "birthday",
              "operator": "eq",
              "value": "01/12/1985"
            },
            {
              "and_or": "",
              "field": "birthday",
              "operator": "eq",
              "value": "01/12/1985"
            },
            {
              "and_or": "",
              "field": "birthday",
              "operator": "eq",
              "value": "01/12/1985"
            },
            {
              "and_or": "",
              "field": "birthday",
              "operator": "eq",
              "value": "01/12/1985"
            }
          ],
          "list_id": -27497588
        },
        "properties": {
          "conditions": {
            "items": {
              "x-and_or": "",
              "x-field": "birthday",
              "x-operator": "eq",
              "x-value": "01/12/1985"
            },
            "type": "array"
          },
          "list_id": {
            "format": "int32",
            "type": "integer"
          }
        },
        "required": [
          "list_id",
          "conditions"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://api.sendgrid.com/v3/contactdb/recipients/search"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**recipient_count**",
            "**recipients**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
