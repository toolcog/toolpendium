{
  "name": "GET-messages",
  "description": "This is **BETA** functionality. You may not have access, and we reserve the right to change functionality without notice.\n\nFilter all messages to search your Email Activity. All queries need to be [URL encoded](https://meyerweb.com/eric/tools/dencoder/), and have this format:\n\n`query={query_type}=\"{query_content}\"`\n\nencoded, this would look like this:\n\n`query=type%3D%22query_content%22`\n\nfor example:\n\nFilter by a specific email - `query=to_email%3D%22example%40example.com%22`\n\nFilter by subject line - `query=subject%3d%22A%20Great%20Subject%22`\n\n**Full list of basic query types and examples:**\n\n\n| **Filter query**    | **Unencoded Example** (put this one into the try it out query - it'll automatically encode it for you) | **Encoded Example** (use this one in your code)                        |\n|-----------------|----------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n| msg_id          | msg_id=“filter0307p1las1-16816-5A023E36-1.0”                                                                               | msg_id%3D%22filter0307p1las1-16816-5A023E36-1.0%22           |\n| from_email      | from_email=“testing@sendgrid.net”                                                                                          | from_email%3D%22testing%40sendgrid.net%22                    |\n| subject         | subject=\"This is a subject test\"                                                                                      | subject%22This%20is%20a%20subject%20test%22                  |\n| to_email        | to_email=\"example@example.com\"                                                                                       | to_email%3D%22example%40example.com%22                       |\n| status          |                                                                                                                            | status%22processed%22                                        |\n| template_id     |                                                                                                                            |                                                                    |\n| asm_group_id    |                                                                                                                            |                                                                    |\n| api_key_id      |                                                                                                                            |                                                                    |\n| events          | status=\"processed\"                                                                                                   | status%3D%22processed%22                                     |\n| originating_ip  |                                                                                                                            |                                                                    |\n| categories      |                                                                                                                            |                                                                    |\n| unique_args     |                                                                                                                            |                                                                    |\n| outbound_ip     |                                                                                                                            |                                                                    |\n| last_event_time | last_event_time=“2017-11-07T23:13:58Z”                                                                               | last_event_time%3D%E2%80%9C2017-11-07T23%3A13%3A58Z%E2%80%9D |\n| clicks          | clicks=\"0\"                                                                                                           | clicks%3D%220%22                                             |\n\nFor information about building compound queries, and for the full query language functionality, see the [query language reference](https://docs.google.com/a/sendgrid.com/document/d/1fWoKTFNfg5UUsB6t9KuIcSo9CetKF_T0bGfWJ_gdPCs/edit?usp=sharing).\n\nComing soon, example compound queries: limit + to email + date",
  "parameters": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "Use the query syntax  to filter your email activity."
      },
      "limit": {
        "default": 10,
        "maximum": 1000,
        "minimum": 1,
        "type": "number",
        "description": "The number of messages returned. This parameter must be greater than 0 and less than or equal to 1000"
      },
      "X-Query-Id": {
        "type": "string"
      },
      "X-Cursor": {
        "type": "string"
      },
      "Authorization": {
        "default": "Bearer <<YOUR_API_KEY_HERE>>",
        "type": "string"
      }
    },
    "required": [
      "query",
      "Authorization"
    ]
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "http://api.sendgrid.com/v3/messages{?query,limit}"
    },
    "headers": {
      "X-Query-Id": {
        "$": "X-Query-Id"
      },
      "X-Cursor": {
        "$": "X-Cursor"
      },
      "Authorization": {
        "$": "Authorization"
      }
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**messages**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "429": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
