{
  "name": "POST_marketing-test-send_email",
  "description": "**This endpoint allows you to send a test marketing email to a list of email addresses**.\n\nBefore sending a marketing message, you can test it using this endpoint. You may specify up to **10 contacts** in the `emails` request body field. You must also specify a `template_id` and include either a `from_address` or `sender_id`. You can manage your templates with the [Twilio SendGrid App](https://mc.sendgrid.com/dynamic-templates) or the [Transactional Templates API](https://sendgrid.api-docs.io/v3.0/transactional-templates).\n\n> Please note that this endpoint works with Dynamic Transactional Templates only. Legacy Transactional Templates will not be delivered.\n\nFor more information about managing Dynamic Transactional Templates, see [How to Send Email with Dynamic Transactional Templates](https://sendgrid.com/docs/ui/sending-email/how-to-send-an-email-with-dynamic-transactional-templates/).\n\nYou can also test your Single Sends in the [Twilio SendGrid Marketing Campaigns UI](https://mc.sendgrid.com/single-sends).",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "example": {
          "custom_unsubscribe_url": "https://example.com/unsubscribe",
          "emails": [
            "janedoe@example.com",
            "tiramisu@example.com",
            "bundt@example.com"
          ],
          "sender_id": 6060664,
          "suppression_group_id": 21865513,
          "template_id": "f8f77db8-b9fa-4b3c-9ee8-de3d582016b8",
          "version_id_override": "7734f757-8eb8-4d22-b7f0-779a72f32986"
        },
        "properties": {
          "custom_unsubscribe_url": {
            "description": "A custom unsubscribe URL.",
            "type": "string"
          },
          "emails": {
            "description": "An array of email addresses you want to send the test message to.",
            "items": {
              "format": "email",
              "type": "string"
            },
            "maxItems": 10,
            "minItems": 1,
            "type": "array",
            "uniqueItems": true
          },
          "from_address": {
            "description": "You can either specify this address or specify a verified sender ID.",
            "format": "email",
            "type": "string"
          },
          "sender_id": {
            "description": "This ID must belong to a verified sender. Alternatively, you may supply a `from_address` email.",
            "type": "integer"
          },
          "suppression_group_id": {
            "type": "integer"
          },
          "template_id": {
            "description": "The ID of the template that you would like to use. If you use a template that contains a subject and content (either text or HTML), then those values specified at the personalizations or message level will not be used.",
            "format": "uuid",
            "type": "string"
          },
          "version_id_override": {
            "description": " You can override the active template with an alternative template version by passing the version ID in this field. If this field is blank, the active template version will be used.",
            "format": "uuid",
            "type": "string"
          }
        },
        "required": [
          "template_id",
          "emails"
        ],
        "type": "object"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "http://api.sendgrid.com/v3/marketing/test/send_email"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "202": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "400": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Global Error Response Schema"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**",
            "**id**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
