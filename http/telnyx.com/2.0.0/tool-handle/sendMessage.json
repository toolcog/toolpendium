{
  "name": "sendMessage",
  "description": "Send text messages, media/documents, and message templates to your customers.",
  "parameters": {
    "type": "object",
    "properties": {
      "body": {
        "$ref": "#/$defs/CreateWhatsAppMessageRequest"
      }
    },
    "required": [
      "body"
    ],
    "$defs": {
      "CreateWhatsAppMessageRequest": {
        "example": {
          "preview_url": true,
          "text": {
            "body": "Check out this site: http://www.telnyx.com"
          },
          "to": "15125557878",
          "type": "text"
        },
        "properties": {
          "audio": {
            "$ref": "#/$defs/Audio"
          },
          "contacts": {
            "description": "",
            "items": {
              "$ref": "#/$defs/Contact"
            },
            "type": "array"
          },
          "document": {
            "$ref": "#/$defs/Document"
          },
          "hsm": {
            "$ref": "#/$defs/Hsm"
          },
          "image": {
            "$ref": "#/$defs/Image"
          },
          "location": {
            "$ref": "#/$defs/Location"
          },
          "preview_url": {
            "description": "Specifying preview_url in the request is optional when not including a URL in your message.\nTo include a URL preview, set preview_url to true in the message body and make sure the URL begins with http:// or https://.",
            "type": "boolean"
          },
          "template": {
            "$ref": "#/$defs/Template"
          },
          "text": {
            "$ref": "#/$defs/Text"
          },
          "to": {
            "description": "The WhatsApp ID (phone number) returned from contacts endpoint.",
            "type": "string"
          },
          "type": {
            "$ref": "#/$defs/MessageType"
          },
          "video": {
            "$ref": "#/$defs/Video"
          },
          "whatsapp_user_id": {
            "description": "The sender's WhatsApp ID.",
            "type": "string"
          }
        },
        "required": [
          "to",
          "whatsapp_user_id"
        ],
        "title": "Send Message Request Body",
        "type": "object"
      },
      "Audio": {
        "description": "The media object containing audio details.",
        "example": {
          "id": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68"
        },
        "properties": {
          "id": {
            "description": "The media object ID returned when the media is successfully uploaded to the media endpoint.",
            "example": "your-media-id",
            "type": "string"
          },
          "link": {
            "description": "The protocol and URL of the media to be sent. Use only with HTTP/HTTPS URLs. Either id or link must be provided, not both.",
            "example": "http://www.example.com/file",
            "type": "string"
          }
        },
        "title": "Audio",
        "type": "object"
      },
      "Contact": {
        "example": {
          "addresses": [
            {
              "city": "Menlo Park",
              "country": "United States",
              "country_code": "us",
              "state": "CA",
              "street": "1 Hacker Way",
              "type": "HOME",
              "zip": "94025"
            },
            {
              "city": "Menlo Park",
              "country": "United States",
              "country_code": "us",
              "state": "CA",
              "street": "200 Jefferson Dr",
              "type": "WORK",
              "zip": "94025"
            }
          ],
          "birthday": "2012-08-18",
          "emails": [
            {
              "email": "test@fb.com",
              "type": "WORK"
            },
            {
              "email": "test@whatsapp.com",
              "type": "WORK"
            }
          ],
          "name": {
            "first_name": "John",
            "formatted_name": "John Smith",
            "last_name": "Smith"
          },
          "org": {
            "company": "WhatsApp",
            "department": "Design",
            "title": "Manager"
          },
          "phones": [
            {
              "phone": "+1 (940) 555-1234",
              "type": "HOME"
            },
            {
              "id": "16505551234",
              "phone": "+1 (650) 555-1234",
              "type": "WORK"
            }
          ],
          "urls": [
            {
              "type": "WORK",
              "url": "https://www.facebook.com"
            }
          ]
        },
        "properties": {
          "addresses": {
            "description": "Full contact address(es)",
            "items": {
              "$ref": "#/$defs/WhatsAppContactAddress"
            },
            "type": "array"
          },
          "birthday": {
            "description": "YYYY-MM-DD formatted string",
            "type": "string"
          },
          "emails": {
            "description": "Contact email address(es)",
            "items": {
              "$ref": "#/$defs/Email"
            },
            "type": "array"
          },
          "ims": {
            "description": "",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "name": {
            "$ref": "#/$defs/Name"
          },
          "org": {
            "$ref": "#/$defs/Organization"
          },
          "phones": {
            "description": "Contact phone number(s)",
            "items": {
              "$ref": "#/$defs/Phone"
            },
            "type": "array"
          },
          "urls": {
            "description": "Contact URL(s)",
            "items": {
              "$ref": "#/$defs/Url"
            },
            "type": "array"
          }
        },
        "title": "Contact",
        "type": "object"
      },
      "WhatsAppContactAddress": {
        "example": {
          "city": "Menlo Park",
          "country": "United States",
          "country_code": "us",
          "state": "CA",
          "street": "1 Hacker Way",
          "type": "HOME",
          "zip": "94025"
        },
        "properties": {
          "city": {
            "description": "City name",
            "type": "string"
          },
          "country": {
            "description": "Full country name",
            "type": "string"
          },
          "country_code": {
            "description": "Two-letter country abbreviation",
            "type": "string"
          },
          "state": {
            "description": "State abbreviation",
            "type": "string"
          },
          "street": {
            "description": "Street number and name",
            "type": "string"
          },
          "type": {
            "description": "Standard Values: HOME, WORK",
            "type": "string"
          },
          "zip": {
            "description": "ZIP code",
            "type": "string"
          }
        },
        "required": [
          "city",
          "country",
          "country_code",
          "state",
          "street",
          "type",
          "zip"
        ],
        "title": "Address",
        "type": "object"
      },
      "Email": {
        "example": {
          "email": "<Contact's Email>",
          "type": "<Contact's Email Type>"
        },
        "properties": {
          "email": {
            "type": "string"
          },
          "type": {
            "type": "string"
          }
        },
        "required": [
          "email",
          "type"
        ],
        "title": "Email",
        "type": "object"
      },
      "Name": {
        "description": "Full contact name",
        "example": {
          "first_name": "John",
          "formatted_name": "John Smith",
          "last_name": "Smith"
        },
        "properties": {
          "first_name": {
            "description": "First name",
            "type": "string"
          },
          "formatted_name": {
            "description": "Full name as it normally appears",
            "type": "string"
          },
          "last_name": {
            "description": "Last name",
            "type": "string"
          },
          "prefix": {
            "description": "Name preffix",
            "type": "string"
          },
          "suffix": {
            "description": "Name suffix",
            "type": "string"
          }
        },
        "required": [
          "formatted_name"
        ],
        "title": "Name",
        "type": "object"
      },
      "Organization": {
        "description": "Contact organization information",
        "example": {
          "company": "WhatsApp",
          "department": "Design",
          "title": "Manager"
        },
        "properties": {
          "company": {
            "description": "Name of the contact's company",
            "type": "string"
          },
          "department": {
            "description": "Name of the contact's department",
            "type": "string"
          },
          "title": {
            "description": "Contact's business title",
            "type": "string"
          }
        },
        "required": [
          "company"
        ],
        "title": "Organization",
        "type": "object"
      },
      "Phone": {
        "example": {
          "id": "16505551234",
          "phone": "+1 (650) 555-1234",
          "type": "WORK"
        },
        "properties": {
          "id": {
            "description": "WhatsApp ID",
            "type": "string"
          },
          "phone": {
            "type": "string"
          },
          "type": {
            "description": "Standard Values: CELL, MAIN, IPHONE, HOME, WORK",
            "type": "string"
          }
        },
        "title": "Phone Number",
        "type": "object"
      },
      "Url": {
        "description": "Standard Values: HOME, WORK",
        "example": {
          "type": "WORK",
          "url": "https://www.facebook.com"
        },
        "properties": {
          "type": {
            "description": "Standard Values: HOME, WORK",
            "type": "string"
          },
          "url": {
            "description": "URL",
            "type": "string"
          }
        },
        "title": "Root Type for Url",
        "type": "object"
      },
      "Document": {
        "description": "The media object containing a document reference",
        "example": {
          "caption": "Very important document",
          "filename": "example.pdf",
          "id": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68"
        },
        "properties": {
          "caption": {
            "description": "Describes the specified media.",
            "example": "My cool media!",
            "type": "string"
          },
          "filename": {
            "description": "Describes the filename for the specific document.",
            "example": "example.pdf",
            "type": "string"
          },
          "id": {
            "description": "The media object ID returned when the media is successfully uploaded to the media endpoint.",
            "example": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68",
            "type": "string"
          },
          "link": {
            "description": "The protocol and URL of the media to be sent. Use only with HTTP/HTTPS URLs. Either id or link must be provided, not both.",
            "example": "http://www.example.com/file",
            "type": "string"
          }
        },
        "title": "Document",
        "type": "object"
      },
      "Hsm": {
        "description": "The containing element for the message content — Indicates that the message is highly structured. Parameters contained within provide the structure.",
        "example": {
          "element_name": "hello_world",
          "language": {
            "code": "en",
            "policy": "deterministic"
          },
          "localizable_params": [
            {
              "default": "1234"
            }
          ],
          "namespace": "business_a_namespace"
        },
        "properties": {
          "element_name": {
            "description": "The element name that indicates which template to use within the namespace",
            "type": "string"
          },
          "language": {
            "$ref": "#/$defs/Language"
          },
          "localizable_params": {
            "description": "This field is an array of values to apply to variables in the template",
            "items": {
              "$ref": "#/$defs/LocalizableParam"
            },
            "type": "array"
          },
          "namespace": {
            "description": "The namespace that will be used",
            "type": "string"
          }
        },
        "required": [
          "namespace",
          "element_name",
          "language",
          "localizable_params"
        ],
        "title": "Hsm",
        "type": "object"
      },
      "Language": {
        "example": {
          "code": "en",
          "policy": "deterministic"
        },
        "properties": {
          "code": {
            "description": "The code of the language or locale to use — Accepts both language and language_locale formats (e.g., en and en_US).",
            "type": "string"
          },
          "policy": {
            "description": "The language policy the message should follow",
            "enum": [
              "fallback",
              "deterministic"
            ],
            "type": "string"
          }
        },
        "required": [
          "policy",
          "code"
        ],
        "title": "Language",
        "type": "object"
      },
      "LocalizableParam": {
        "example": {
          "default": "<param value>"
        },
        "properties": {
          "currency": {
            "$ref": "#/$defs/Currency"
          },
          "date_time": {
            "$ref": "#/$defs/DateTimeObject"
          },
          "default": {
            "description": "Default text if localization fails",
            "type": "string"
          }
        },
        "required": [
          "default"
        ],
        "title": "LocalizableParam",
        "type": "object"
      },
      "Currency": {
        "description": "",
        "example": {
          "amount_1000": 100990,
          "currency_code": "USD"
        },
        "properties": {
          "amount_1000": {
            "format": "int32",
            "type": "integer"
          },
          "currency_code": {
            "type": "string"
          },
          "fallback_value": {
            "type": "string"
          }
        },
        "required": [
          "amount_1000",
          "currency_code"
        ],
        "title": "Currency",
        "type": "object"
      },
      "DateTimeObject": {
        "description": "The Whatsapp Business API Client will attempt to format the date/time based on a specified localization.",
        "example": {
          "component": {
            "day_of_month": 25,
            "day_of_week": 5,
            "hour": 15,
            "minute": 33,
            "month": 2,
            "year": 1977
          }
        },
        "properties": {
          "component": {
            "$ref": "#/$defs/DateTimeComponent"
          },
          "unix_epoch": {
            "$ref": "#/$defs/DateTimeUnixEpoch"
          }
        },
        "title": "Date Time Object",
        "type": "object"
      },
      "DateTimeComponent": {
        "description": "Date/time by component",
        "example": {
          "day_of_month": 25,
          "day_of_week": 5,
          "hour": 15,
          "minute": 33,
          "month": 2,
          "year": 1977
        },
        "properties": {
          "day_of_month": {
            "description": "The day of month",
            "format": "int32",
            "type": "integer"
          },
          "day_of_week": {
            "description": "Both strings and numbers are accepted. If different from the value derived from the date (if specified), use the derived value.",
            "enum": [
              1,
              2,
              3,
              4,
              5,
              6,
              7
            ],
            "format": "int32",
            "type": "integer",
            "x-enum-descriptions": [
              "Monday",
              "Tuesday",
              "Wednesday",
              "Thursday",
              "Friday",
              "Saturday",
              "Sunday"
            ],
            "x-enum-varnames": [
              "MONDAY",
              "TUESDAY",
              "WEDNESDAY",
              "THURSDAY",
              "FRIDAY",
              "SATURDAY",
              "SUNDAY"
            ]
          },
          "hour": {
            "description": "The hour",
            "format": "int32",
            "type": "integer"
          },
          "minute": {
            "description": "The minute",
            "format": "int32",
            "type": "integer"
          },
          "month": {
            "description": "The month",
            "format": "int32",
            "type": "integer"
          },
          "year": {
            "description": "The year",
            "format": "int32",
            "type": "integer"
          }
        },
        "title": "Date Time by Component",
        "type": "object"
      },
      "DateTimeUnixEpoch": {
        "description": "Date/time by Unix epoch",
        "example": {
          "timestamp": 123456789
        },
        "properties": {
          "timestamp": {
            "description": "Epoch timestamp in seconds",
            "format": "int32",
            "type": "integer"
          }
        },
        "title": "Date Time by Unix Epoch",
        "type": "object"
      },
      "Image": {
        "description": "The media object containing an image",
        "example": {
          "caption": "My cool media!",
          "id": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68"
        },
        "properties": {
          "caption": {
            "description": "Describes the specified media.",
            "example": "My cool media!",
            "type": "string"
          },
          "id": {
            "description": "The media object ID returned when the media is successfully uploaded to the media endpoint.",
            "example": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68",
            "type": "string"
          },
          "link": {
            "description": "The protocol and URL of the media to be sent. Use only with HTTP/HTTPS URLs. Either id or link must be provided, not both.",
            "example": "http://www.example.com/file",
            "type": "string"
          }
        },
        "title": "Image",
        "type": "object"
      },
      "Location": {
        "example": {
          "address": "<Location's Address>",
          "latitude": "<Latitude>",
          "longitude": "<Longitude>",
          "name": "<Location Name>"
        },
        "properties": {
          "address": {
            "description": "Address of the location. Only displayed if name is present.",
            "type": "string"
          },
          "latitude": {
            "description": "Latitude of the location",
            "type": "string"
          },
          "longitude": {
            "description": "Longitude of the location",
            "type": "string"
          },
          "name": {
            "description": "Name of the location",
            "type": "string"
          }
        },
        "required": [
          "longitude",
          "latitude",
          "name",
          "address"
        ],
        "title": "Location",
        "type": "object"
      },
      "Template": {
        "properties": {
          "components": {
            "$ref": "#/$defs/TemplateComponents"
          },
          "language": {
            "$ref": "#/$defs/Language"
          },
          "name": {
            "description": "Name of the template.",
            "type": "string"
          },
          "namespace": {
            "description": "Namespace of the template. This must be the namespace associated with the WhatsApp business account that owns the phone number associated with the current WhatsApp Business API client or the message fails to send.",
            "type": "string"
          }
        },
        "required": [
          "namespace",
          "name",
          "language"
        ],
        "title": "Template",
        "type": "object"
      },
      "TemplateComponents": {
        "items": {
          "description": "",
          "properties": {
            "parameters": {
              "$ref": "#/$defs/TemplateParameters"
            },
            "type": {
              "description": "Describes the component type.",
              "enum": [
                "header",
                "body",
                "footer"
              ],
              "type": "string"
            }
          },
          "required": [
            "type"
          ],
          "title": "Template Components",
          "type": "object"
        },
        "title": "Template Components",
        "type": "array"
      },
      "TemplateParameters": {
        "items": {
          "description": "Array containing the content of the message.",
          "properties": {
            "currency": {
              "$ref": "#/$defs/Currency"
            },
            "date_time": {
              "$ref": "#/$defs/DateTimeObject"
            },
            "document": {
              "$ref": "#/$defs/Document"
            },
            "image": {
              "$ref": "#/$defs/Image"
            },
            "text": {
              "type": "string"
            },
            "type": {
              "description": "Describes the parameter type.",
              "enum": [
                "text",
                "currency",
                "date_time",
                "image",
                "document",
                "video"
              ],
              "type": "string"
            },
            "video": {
              "$ref": "#/$defs/Video"
            }
          },
          "required": [
            "type"
          ],
          "title": "Template Parameters",
          "type": "object"
        },
        "title": "Template Component Parameters",
        "type": "array"
      },
      "Video": {
        "description": "The media object containing a video",
        "example": {
          "caption": "My cool media!",
          "id": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68"
        },
        "properties": {
          "caption": {
            "description": "Describes the specified media.",
            "example": "My cool media!",
            "type": "string"
          },
          "id": {
            "description": "The media object ID returned when the media is successfully uploaded to the media endpoint.",
            "example": "f043afd0-f0ae-4b9c-ab3d-696fb4c8cd68",
            "type": "string"
          },
          "link": {
            "description": "The protocol and URL of the media to be sent. Use only with HTTP/HTTPS URLs. Either id or link must be provided, not both.",
            "example": "http://www.example.com/file",
            "type": "string"
          }
        },
        "title": "Video",
        "type": "object"
      },
      "Text": {
        "example": {
          "body": "<Message Text>"
        },
        "properties": {
          "body": {
            "type": "string"
          }
        },
        "required": [
          "body"
        ],
        "title": "Text",
        "type": "object"
      },
      "MessageType": {
        "default": "text",
        "description": "type of the message",
        "enum": [
          "audio",
          "contacts",
          "document",
          "hsm",
          "image",
          "location",
          "template",
          "text",
          "video",
          "voice",
          "unknown"
        ],
        "title": "Message Type",
        "type": "string"
      }
    }
  },
  "handler": "http",
  "request": {
    "method": "POST",
    "url": {
      "$uri": "https://api.telnyx.com/v2/whatsapp_messages"
    },
    "body": {
      "$": "body",
      "encode": "json"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Successful response with details about the WhatsApp message sent."
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**data**: ",
              {
                "$ul": [
                  "**id**",
                  "**record_type**: Identifies the type of the resource."
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    },
    "default": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            "**errors**"
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
