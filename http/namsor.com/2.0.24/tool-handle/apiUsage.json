{
  "name": "apiUsage",
  "description": "Print current API usage.",
  "parameters": {
    "type": "object"
  },
  "handler": "http",
  "request": {
    "method": "GET",
    "url": {
      "$uri": "https://v2.namsor.com/NamSorAPIv2/api2/json/apiUsage"
    }
  },
  "responses": {
    "200": {
      "$encode": "markdown",
      "$block": [
        {
          "$h1": "Object"
        },
        "**Key properties:**",
        {
          "$ul": [
            [
              "**billingPeriod**: The current billing period.",
              {
                "$ul": [
                  "**apiKey**: User API Key.",
                  "**billingStatus**: Current period billing status ex OPEN.",
                  "**hardLimit**: Current period hard limit (reaching the limit sends an email notification and blocks the API Key).",
                  "**periodEnded**: Datetime when the the plan's current period endend.",
                  "**periodStarted**: Datetime when the the plan's current period started.",
                  "**softLimit**: Current period soft limit (reaching the limit sends an email notification).",
                  "**stripeCurrentPeriodEnd**: Datetime when the the plan's current period endend (in Stripe). Internal and Stripe periodicity should ~coincide.",
                  "**stripeCurrentPeriodStart**: Datetime when the the plan's current period started (in Stripe). Internal and Stripe periodicity should ~coincide.",
                  "**subscriptionStarted**: Datetime when the user subscribed to the plan.",
                  "**usage**: Current period usage in units (NB some API endpoints use more than one unit)."
                ]
              }
            ],
            "**overageCurrency**: Currency of the overage amount.",
            "**overageExclTax**: Overage amount including any tax.",
            "**overageInclTax**: Overage amount including tax (if applicable).",
            "**overageQuantity**: Quantity above monthly quota of the current subscritpion, in units.",
            [
              "**subscription**: The API Plan governing the subscription.",
              {
                "$ul": [
                  "**apiKey**: User API Key.",
                  "**currency**: Current plan Currency for prices.",
                  "**currencyFactor**: For USD, GBP, EUR - the factor is 1.",
                  "**planBaseFeesKey**: Current plan key (as in Stripe product).",
                  "**planEnded**: Datetime when the user ended the plan.",
                  "**planName**: Current plan name.",
                  "**planQuota**: Current plan quota in quantity of units (NB: some API use several units per name).",
                  "**planStarted**: Datetime when the user subscribed to the current plan.",
                  "**planStatus**: Plan status.",
                  "**price**: Current plan price for overages expressed in Currency (extra price per unit above the free quota).",
                  "**priceOverage**: Current plan price for overages expressed in Currency (extra price per unit above the free quota).",
                  "**priceOverageUSD**: Current plan price for overages expressed in USD (extra price per unit above the free quota).",
                  "**priceUSD**: Current plan monthly price expressed in USD (includes a free quota).",
                  "**priorPlanStarted**: Datetime when the user subscribed to the prior plan.",
                  "**stripeCustomerId**: Stripe customer identifier.",
                  "**stripeStatus**: Stripe status ex active.",
                  "**stripeSubscription**: Stripe subscription identifier.",
                  "**taxRate**: Applicable tax rate for the plan.",
                  "**userId**: Internal user identifier."
                ]
              }
            ]
          ]
        },
        {
          "$lang": "json",
          "$code": {
            "$encode": "json",
            "$indent": true,
            "$content": {
              "$": "$.body"
            }
          }
        }
      ]
    }
  }
}
